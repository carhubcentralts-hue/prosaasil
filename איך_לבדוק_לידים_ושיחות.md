# איך לבדוק - בדיקה ידנית לשיפורי ממשק לידים ושיחות

## סקירה כללית
מדריך זה יעזור לך לבדוק את כל התכונות החדשות שהוספנו למערכת ניהול הלידים והשיחות.

## הכנה לבדיקה

### הפעלת המערכת
```bash
# הפעל את השרת
python run_server.py

# הפעל את הממשק (בטרמינל אחר)
cd client
npm install
npm run dev
```

### התחברות
- היכנס למערכת
- התחבר עם משתמש בעל הרשאות (owner, admin, או agent)

---

## בדיקות עיקריות

### 1️⃣ דף שיחות נכנסות

**ניווט:**
1. לחץ על "שיחות נכנסות" בתפריט הצד
2. **צפוי:** דף עם אייקון טלפון ירוק

**תצוגת לידים:**
3. **צפוי:** רק לידים משיחות נכנסות מוצגים
4. כל כרטיס ליד צריך להציג:
   - שם הליד (או "לקוח אלמוני")
   - מספר טלפון
   - תווית סטטוס
   - תקציר (אם קיים)
   - זמן יחסי ("לפני 2 שעות")

**בדיקת חיפוש:**
5. הקלד מספר טלפון או שם בתיבת החיפוש
6. **צפוי:** הרשימה מסתננת בזמן אמת
7. נקה את החיפוש
8. **צפוי:** כל הלידים מופיעים שוב

**ניווט לליד:**
9. לחץ על כרטיס ליד כלשהו
10. **צפוי:** מעבר לדף פרטי הליד
11. לחץ חזור
12. **צפוי:** חזרה לדף שיחות נכנסות

---

### 2️⃣ מסננים בדף לידים

**ניווט:**
1. לחץ על "לידים" בתפריט
2. **צפוי:** דף לידים עם מספר מסננים

**מסנן כיוון שיחות:**
3. מצא את הרשימה הנפתחת "מקור שיחה"
4. בחר "נכנסות"
5. **צפוי:** רק לידים משיחות נכנסות
6. בחר "יוצאות"
7. **צפוי:** רק לידים משיחות יוצאות
8. בחר "כל השיחות"
9. **צפוי:** כל הלידים מוצגים

**מסנן רשימת יבוא:**
10. אם יש לך רשימות יבוא:
    - מצא "רשימת יבוא"
    - בחר רשימה מסוימת
    - **צפוי:** רק לידים מהרשימה מוצגים

**שילוב מסננים:**
11. הגדר כיוון ל-"יוצאות"
12. בחר רשימת יבוא
13. בחר סטטוס
14. **צפוי:** לידים שעומדים בכל הקריטריונים
15. נקה את כל המסננים
16. **צפוי:** כל הלידים מופיעים

---

### 3️⃣ דף שיחות יוצאות - תצוגת קנבן

**ניווט:**
1. לחץ על "שיחות יוצאות"
2. וודא שאתה בטאב "לידים קיימים"
3. עבור לתצוגת Kanban (אם לא ברירת מחדל)

**ניווט לליד:**
4. לחץ על כרטיס ליד בלוח הקנבן
5. **צפוי:** מעבר לדף פרטי ליד
6. חזור אחורה
7. **צפוי:** חזרה לדף שיחות יוצאות

**גרור ושחרר:**
8. גרור כרטיס ליד לעמודת סטטוס אחרת
9. **צפוי:** סטטוס הליד מתעדכן
10. לחץ על הליד שהזיז
11. **צפוי:** דף פרטים מציג סטטוס מעודכן

**בחירה:**
12. לחץ על checkbox בכרטיס ליד
13. **צפוי:** הכרטיס מקבל מסגרת כחולה
14. בחר עוד 2 לידים
15. **צפוי:** שלושה לידים נבחרים
16. נסה לבחור רביעי
17. **צפוי:** לא ניתן לבחור יותר מ-3

---

### 4️⃣ דף שיחות יוצאות - לידים מיובאים

**ניווט:**
1. לחץ על טאב "רשימת ייבוא לשיחות יוצאות"
2. **צפוי:** טבלה של לידים מיובאים (אם יש)

**ניווט משורה:**
3. לחץ על שורת ליד (לא על checkbox או מחיקה)
4. **צפוי:** מעבר לדף פרטי ליד
5. חזור אחורה

**Checkbox עצמאי:**
6. לחץ על checkbox
7. **צפוי:** נבחר אבל לא עובר לדף
8. לחץ על השורה (לא על checkbox)
9. **צפוי:** מעבר לדף ליד

**בחר הכל:**
10. לחץ על checkbox "בחר הכל" בכותרת
11. **צפוי:** עד 3 לידים נבחרים
12. לחץ שוב
13. **צפוי:** כל הבחירות מתנקות

**מחיקה מרובה:**
14. בחר 2-3 לידים
15. לחץ "מחק נבחרים"
16. **צפוי:** הלידים נמחקים

---

## סיכום התנהגות צפויה

### דף שיחות נכנסות
- ✅ מציג רק לידים נכנסים
- ✅ כרטיסי ליד לחיצים → מעבר לפרטים
- ✅ חיפוש עובד
- ✅ עימוד עובד (אם יש יותר מ-25)

### דף לידים
- ✅ מסנן כיוון עובד (הכל/נכנסות/יוצאות)
- ✅ מסנן רשימת יבוא עובד
- ✅ מסננים משולבים עובדים
- ✅ חיפוש עובד עם מסננים

### דף שיחות יוצאות
- ✅ כרטיסי קנבן מנווטים לפרטי ליד
- ✅ שורות טבלה מנווטות לפרטי ליד
- ✅ Checkboxes עצמאיים
- ✅ בחר הכל מכבד מגבלת 3
- ✅ גרור-ושחרר עדיין עובד

---

## פתרון בעיות

### "אין שיחות נכנסות" אבל יש שיחות
- בדוק שהשיחות עובדו ונשמרו
- וודא ש-`last_call_direction` מתעדכן
- בדוק שיש לידים בכלל

### מסננים לא עובדים
- נקה cache של דפדפן
- בדוק console לשגיאות
- וודא ש-API מחזיר נתונים נכונים

### ניווט לא עובד
- בדוק console לשגיאות routing
- וודא ש-ID של ליד תקין
- וודא שמסלול פרטי ליד רשום

---

## קריטריוני הצלחה

כל הבדיקות צריכות לעבור עם:
- ✅ אין שגיאות ב-console
- ✅ ניווט חלק בין דפים
- ✅ מסננים עובדים נכון
- ✅ נתונים מוצגים במדויק
- ✅ לחיצות מנווטות כצפוי
- ✅ UI מגיב לפעולות משתמש

---

## דיווח בעיות

אם מצאת בעיה:
1. רשום את הצעדים המדויקים לשחזור
2. בדוק console לשגיאות
3. צלם screenshot אם ה-UI נראה לא נכון
4. תעד התנהגות צפויה מול בפועל

## סיום בדיקה

כשכל התרחישים עוברים:
- ✅ המערכת מוכנה לפריסה
- ✅ התיעוד מלא
- ✅ כל קריטריוני הקבלה מתקיימים
