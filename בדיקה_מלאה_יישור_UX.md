# בדיקה מלאה - יישור UX סופי לידים ושיחות

## סקירה כללית

מדריך בדיקה מקיף לוודא שכל הדרישות מתקיימות:
1. ✅ רשימת ייבוא עם שינוי סטטוסים
2. ✅ רשימת ייבוא נראית בדף לידים הראשי
3. ✅ אפשרות לסנן רק רשימת ייבוא בלידים
4. ✅ שינויי סטטוס אוטומטיים בכל השיחות
5. ✅ הכל נראה טוב ועובד מושלם

---

## 1️⃣ בדיקת דף שיחות יוצאות - 3 טאבים

### הכנה
1. היכנס למערכת
2. נווט ל"שיחות יוצאות"
3. **צפוי:** רואה 3 טאבים:
   - 🟦 לידים במערכת
   - 🟦 לידים לשיחות יוצאות
   - 🟦 רשימת ייבוא לשיחות יוצאות

### טאב 1: לידים במערכת
**מטרה:** בחירת לידים להוספה לשיחות יוצאות

✅ **בדיקות:**
1. לחץ על כפתור "Kanban"
   - **צפוי:** תצוגת קנבן עם עמודות סטטוס
2. לחץ על כפתור "רשימה"
   - **צפוי:** תצוגת טבלה/רשימה
3. לחץ על ליד בקנבן
   - **צפוי:** מעבר לדף פרטי ליד
4. חזור, גרור ליד לסטטוס אחר
   - **צפוי:** הסטטוס משתנה
5. בחר עד 3 לידים עם checkbox
   - **צפוי:** נבחרים, אי אפשר לבחור יותר מ-3
6. לחץ "הפעל X שיחות"
   - **צפוי:** השיחות מתחילות

### טאב 2: לידים לשיחות יוצאות
**מטרה:** ניהול לידים פעילים בקמפיין

✅ **בדיקות:**
1. לחץ על טאב "לידים לשיחות יוצאות"
   - **צפוי:** רק לידים עם direction=outbound
2. בדוק שיש Kanban/רשימה toggle
   - **צפוי:** שני המצבים עובדים
3. שנה סטטוס ליד בקנבן
   - **צפוי:** הסטטוס משתנה מיד
4. לחץ על ליד
   - **צפוי:** מעבר לדף ליד

### טאב 3: רשימת ייבוא
**מטרה:** ניהול לידים מיובאים

✅ **בדיקות:**
1. לחץ על טאב "רשימת ייבוא"
2. בדוק שיש Kanban/רשימה toggle
   - **צפוי:** שני המצבים עובדים! (זה חדש!)
3. **בתצוגת Kanban:**
   - גרור ליד בין סטטוסים
   - **צפוי:** הסטטוס משתנה
   - לחץ על ליד
   - **צפוי:** מעבר לדף ליד
4. **בתצוגת רשימה:**
   - לחץ על שורת ליד
   - **צפוי:** מעבר לדף ליד
   - רשום את ה-ID של הליד (לשלב הבא)

---

## 2️⃣ בדיקת דף לידים ראשי - סינון רשימת ייבוא

### בדיקה
1. נווט לדף "לידים" (ראשי)
2. **צפוי:** רואה מסננים למעלה
3. חפש את הרשימה הנפתחת "כל רשימות היבוא"
   - **צפוי:** רואה רשימה עם כל רשימות הייבוא
4. בחר רשימת ייבוא מסוימת
   - **צפוי:** רק הלידים מהרשימה הזו מוצגים
5. מצא את הליד שרשמת ב-ID
   - **צפוי:** הליד מופיע כאן!
6. לחץ על הליד → עבור לדף פרטים
   - **צפוי:** רואה את כל פרטי הליד

### בדוק סטטוס ליד מיובא
1. בדף הליד, שנה סטטוס
   - **צפוי:** הסטטוס משתנה
2. חזור לדף לידים
   - **צפוי:** הסטטוס עודכן גם שם
3. חזור לשיחות יוצאות → טאב רשימת ייבוא
   - **צפוי:** הסטטוס עודכן גם שם!

---

## 3️⃣ בדיקת שיחות נכנסות

### בדיקה
1. נווט ל"שיחות נכנסות"
2. **צפוי:** רואה Kanban/רשימה toggle
3. בדוק שני מצבים:
   - **Kanban:** גרור ליד בין סטטוסים
   - **רשימה:** לחץ על כרטיס ליד
4. **צפוי:** רק לידים עם last_call_direction=inbound
5. לחץ על ליד
   - **צפוי:** מעבר לדף ליד
6. שנה סטטוס
   - **צפוי:** הסטטוס משתנה

---

## 4️⃣ בדיקת שינויי סטטוס אוטומטיים בשיחות

### הכנה
צריך ליד עם מספר טלפון תקין וקמפיין שיחות יוצאות מוגדר.

### בדיקה
1. עבור ל"שיחות יוצאות" → טאב "לידים במערכת"
2. בחר ליד אחד עם מספר טלפון שלך (לבדיקה)
3. לחץ "הפעל שיחה"
4. **ענה לשיחה** ודבר עם ה-AI
5. **במהלך השיחה:** פתח טאב נוסף בדפדפן
6. נווט ל"שיחות יוצאות" → טאב "לידים לשיחות יוצאות"
7. **צפוי:** רואה את הליד בתצוגת Kanban
8. **המתן לסיום השיחה** (או סיים אותה)
9. **רענן את הדף**
10. **צפוי:** הסטטוס של הליד השתנה אוטומטית!
    - לדוגמא: new → contacted או qualified
11. לחץ על הליד → עבור לדף פרטים
12. **צפוי:** רואה:
    - סיכום השיחה
    - הסטטוס החדש
    - last_call_direction = "outbound"

---

## 5️⃣ בדיקת כלל הזהב - last_call_direction

### תרחיש 1: שיחה יוצאת ראשונה
1. צור ליד חדש (או מצא ליד בלי שיחות)
2. התקשר אליו דרך "שיחות יוצאות"
3. **צפוי:** last_call_direction = "outbound"
4. עכשיו **תן ללקוח להתקשר אליך** (שיחה נכנסת)
5. **בדוק:** last_call_direction עדיין "outbound"
   - ✅ **חוק הזהב:** הכיוון לא משתנה!

### תרחיש 2: שיחה נכנסת ראשונה
1. קבל שיחה נכנסת מלקוח חדש
2. **צפוי:** ליד נוצר עם last_call_direction = "inbound"
3. עכשיו **התקשר חזרה ללקוח** (שיחה יוצאת)
4. **בדוק:** last_call_direction עדיין "inbound"
   - ✅ **חוק הזהב:** הכיוון לא משתנה!

---

## 6️⃣ בדיקת עקביות בין כל הדפים

### רשימת בדיקות מהירה

מצא ליד אחד ובדוק שאתה יכול לעשות הכל מכל מקום:

| פעולה | לידים ראשי | שיחות נכנסות | שיחות יוצאות (טאב 1) | שיחות יוצאות (טאב 2) | רשימת ייבוא |
|-------|-----------|--------------|---------------------|---------------------|-------------|
| רואה Kanban | ✅ | ✅ | ✅ | ✅ | ✅ |
| רואה רשימה | ✅ | ✅ | ✅ | ✅ | ✅ |
| לחיצה על ליד → דף פרטים | ✅ | ✅ | ✅ | ✅ | ✅ |
| שינוי סטטוס בקנבן | ✅ | ✅ | ✅ | ✅ | ✅ |
| שינוי סטטוס בדף ליד | ✅ | ✅ | ✅ | ✅ | ✅ |
| חיפוש ליד | ✅ | ✅ | ✅ | ✅ | ✅ |

**אם כל התאים מסומנים ✅ - מצוין! הכל עובד.**

---

## 7️⃣ בדיקת ייבוא CSV מלא

### יצירת קובץ CSV לבדיקה
צור קובץ `test_leads.csv`:

```csv
שם,טלפון,עיר,הערות
דני כהן,0501234567,תל אביב,לקוח פוטנציאלי
שרה לוי,0527654321,ירושלים,מעוניין במוצר
יוסי אברהם,0541112222,חיפה,צריך להתקשר בשעות אחה״צ
```

### ביצוע הייבוא
1. נווט ל"שיחות יוצאות" → טאב "רשימת ייבוא"
2. לחץ על אזור העלאת הקובץ
3. בחר את `test_leads.csv`
4. **צפוי:** הודעת הצלחה - "יובאו 3 לידים"
5. **צפוי:** רואה 3 לידים חדשים ברשימה

### בדיקת הלידים המיובאים
1. **בתצוגת רשימה:**
   - רואה שם, טלפון, עיר, הערות
   - לחץ על שורה → מעבר לדף ליד
2. **עבור לתצוגת Kanban:**
   - רואה 3 כרטיסי ליד
   - כולם בסטטוס "new"
3. **גרור ליד ל-"contacted"**
   - הסטטוס משתנה
4. **עבור לדף לידים ראשי**
5. **בחר ברשימה הנפתחת את שם רשימת הייבוא**
   - **צפוי:** רואה את 3 הלידים
6. **בדוק שהליד ששינית לו סטטוס מופיע ב-"contacted"**
   - ✅ עבד!

---

## 8️⃣ בדיקת ביצועים ותגובתיות

### זמני טעינה
- [ ] דף לידים טוען תוך 2 שניות
- [ ] מעבר בין Kanban/רשימה מיידי
- [ ] גרירת ליד בקנבן חלקה
- [ ] שינוי סטטוס מתעדכן מיד

### עדכון בזמן אמת
1. פתח 2 טאבים בדפדפן
2. **טאב 1:** שיחות יוצאות → לידים פעילים (Kanban)
3. **טאב 2:** דף לידים ראשי
4. **בטאב 1:** גרור ליד לסטטוס אחר
5. **בטאב 2:** רענן
6. **צפוי:** הסטטוס עודכן גם שם

---

## 9️⃣ בדיקות שגיאות ומקרי קצה

### שגיאות צפויות
1. **ניסיון לבחור יותר מ-3 לידים בבת אחת**
   - **צפוי:** לא מאפשר, מסמן בגרפיקה שהגעת למקסימום
2. **ייבוא CSV ללא עמודות חובה**
   - **צפוי:** הודעת שגיאה ברורה
3. **ייבוא מעל 5000 לידים**
   - **צפוי:** הודעה "הגעת למגבלת 5000 לידים"
4. **שינוי סטטוס לסטטוס לא קיים**
   - **צפוי:** נשאר בסטטוס הקודם

---

## 🎯 סיכום - קריטריוני הצלחה

### ✅ חובה לעבור:

1. **3 טאבים בשיחות יוצאות:**
   - [ ] לידים במערכת
   - [ ] לידים לשיחות יוצאות
   - [ ] רשימת ייבוא

2. **Kanban + רשימה בכל מקום:**
   - [ ] לידים ראשי
   - [ ] שיחות נכנסות
   - [ ] שיחות יוצאות (כל 3 הטאבים)

3. **שינוי סטטוס מכל מקום:**
   - [ ] בקנבן (גרירה)
   - [ ] בדף ליד
   - [ ] מתעדכן בכל הדפים

4. **רשימת ייבוא:**
   - [ ] יש Kanban
   - [ ] יש רשימה/טבלה
   - [ ] אפשר לשנות סטטוס
   - [ ] מופיע בדף לידים ראשי
   - [ ] אפשר לסנן רק אותה

5. **שינויי סטטוס אוטומטיים:**
   - [ ] קורים בכל שיחה
   - [ ] מתעדכנים ב-UI
   - [ ] נשמרים ב-DB

6. **last_call_direction:**
   - [ ] נקבע בשיחה הראשונה בלבד
   - [ ] לא משתנה בשיחות הבאות
   - [ ] מסנן נכון נכנסות/יוצאות

---

## 🚀 אם הכל עבר - מעולה!

**המערכת עובדת מושלם! 🎉**

אם משהו לא עבד, תעד:
1. מה עשית (צעדים מדויקים)
2. מה ציפית לראות
3. מה ראית בפועל
4. צילום מסך אם רלוונטי

---

**תאריך:** 2025-12-14  
**גרסה:** יישור UX סופי v1.0  
**סטטוס:** ✅ מוכן לבדיקה
