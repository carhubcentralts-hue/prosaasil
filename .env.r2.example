# =============================================================================
# PRODUCTION CONFIGURATION FOR R2 STORAGE
# =============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env with real credentials!
# =============================================================================

# üîê Production Mode (REQUIRED)
PRODUCTION=1  # Set to 1 for production mode

# üîí Attachment Security (REQUIRED - CHANGE THIS!)
ATTACHMENT_SECRET=CHANGE_ME_TO_RANDOM_SECRET_KEY_IN_PRODUCTION
# Generate with: python3 -c "import secrets; print(secrets.token_urlsafe(32))"

# üì¶ Storage Configuration (R2 - REQUIRED)
ATTACHMENT_STORAGE_DRIVER=r2

# üåê Cloudflare R2 Configuration (REQUIRED for R2)
R2_ACCOUNT_ID=your-cloudflare-account-id-here
R2_ACCESS_KEY_ID=your-r2-access-key-id-here
R2_SECRET_ACCESS_KEY=your-r2-secret-access-key-here
R2_BUCKET_NAME=your-r2-bucket-name-here

# ‚è±Ô∏è Signed URL TTL (Optional - defaults to 900 seconds = 15 minutes)
ATTACHMENT_SIGN_TTL_SECONDS=900

# =============================================================================
# HOW TO GET R2 CREDENTIALS:
# =============================================================================
# 1. Log in to Cloudflare Dashboard (dash.cloudflare.com)
# 2. Go to R2 ‚Üí Create bucket (or use existing)
# 3. Go to R2 ‚Üí Manage R2 API Tokens
# 4. Create API Token with:
#    - Permissions: Object Read & Write
#    - Bucket: Select your bucket
# 5. Copy the credentials:
#    - Account ID: From R2 overview page
#    - Access Key ID: From API token creation
#    - Secret Access Key: From API token creation (SAVE IT - shown once!)
#    - Bucket Name: Your bucket name
# 6. Paste values above
# 7. Restart application

# =============================================================================
# VERIFICATION:
# =============================================================================
# After setting these values and restarting, check logs for:
# ‚úÖ Using R2 (Cloudflare) storage provider
# [R2_STORAGE] Initialized with bucket: your-bucket-name
# [R2_STORAGE] ‚úÖ Bucket access verified
#
# If you see errors, check:
# - All 4 R2 variables are set correctly
# - API token has correct permissions
# - Bucket name matches exactly
# - No typos in credentials

# =============================================================================
# DATABASE MIGRATION:
# =============================================================================
# Before using attachments, run migration 76:
# python -m server.db_migrate
#
# Expected output:
# üîß MIGRATION CHECKPOINT: Running Migration 76: Create attachments table
# ‚úÖ attachments table created
# ‚úÖ Migration 76 completed

# =============================================================================
# IMPORTANT SECURITY NOTES:
# =============================================================================
# 1. NEVER commit .env file with real credentials
# 2. Add .env to .gitignore (should already be there)
# 3. ATTACHMENT_SECRET must be changed from default
# 4. Use PRODUCTION=1 only in production environment
# 5. R2 credentials should have minimal required permissions
# 6. Rotate R2 API tokens periodically
