;
; Asterisk PJSIP Configuration for ProSaaS AI Call Center
; SIP trunk configuration for DID provider integration
;

[global]
type=global
max_forwards=70
keep_alive_interval=90
endpoint_identifier_order=ip,username,anonymous

;==================================
; TRANSPORT - SIP/UDP
;==================================
[transport-udp]
type=transport
protocol=udp
bind=0.0.0.0:5060
external_media_address=${EXTERNAL_IP}
external_signaling_address=${EXTERNAL_IP}

;==================================
; SIP TRUNK (DID Provider)
;==================================
; Configure your DID provider (DIDWW, Twilio SIP, etc.)
; Replace with your provider's credentials

[provider]
type=endpoint
context=from-trunk
disallow=all
allow=ulaw,alaw
direct_media=no
trust_id_inbound=yes
send_pai=yes
dtmf_mode=rfc4733
rtp_symmetric=yes
force_rport=yes
rewrite_contact=yes
; Provider auth
aors=provider
auth=provider-auth
outbound_auth=provider-auth

[provider-auth]
type=auth
auth_type=userpass
username=${SIP_TRUNK_USERNAME}
password=${SIP_TRUNK_PASSWORD}

[provider]
type=aor
contact=sip:${SIP_TRUNK_HOST}:${SIP_TRUNK_PORT}
qualify_frequency=60

[provider]
type=identify
endpoint=provider
match=${SIP_TRUNK_IP}

;==================================
; INTERNAL - Backend/Media Gateway
;==================================
[backend]
type=endpoint
context=from-internal
disallow=all
allow=ulaw
aors=backend

[backend]
type=aor
contact=sip:backend@127.0.0.1:5061
