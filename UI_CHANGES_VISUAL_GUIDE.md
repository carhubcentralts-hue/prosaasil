# WhatsApp Broadcast Page - UI Changes Summary

## תצוגת היסטוריית תפוצות (History View)

### לפני (Before):
```
תפוצה #4
30 בדצמ׳ 2025, 15:23
[completed] ← באנגלית!
סה"כ:1 | נשלחו:1 | נכשלו:0
```

### אחרי (After):
```
תפוצה #4                           [הושלם] ← בעברית!
30 בדצמ׳ 2025, 15:23
סה"כ:1 | נשלחו:1 | נכשלו:0
[פרטים]  [עצור תפוצה] ← כפתורים חדשים!
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
[████████████████████] 100%
```

## תרגום סטטוסים לעברית

| English   | עברית    | צבע    |
|-----------|----------|--------|
| pending   | ממתין    | צהוב   |
| running   | רץ       | כחול   |
| completed | הושלם    | ירוק   |
| failed    | נכשל     | אדום   |
| paused    | מושהה    | צהוב   |
| stopped   | נעצר     | אפור   |
| partial   | חלקי     | צהוב   |

## כפתור "עצור תפוצה"

### מתי מופיע:
- רק לתפוצות עם סטטוס "רץ" או "ממתין"
- לא מופיע לתפוצות שהסתיימו

### כאשר לוחצים:
```
┌─────────────────────────────────────┐
│  האם אתה בטוח שברצונך לעצור        │
│  את התפוצה?                          │
│                                      │
│  [ביטול]            [אישור] ←       │
└─────────────────────────────────────┘
```

### אחרי עצירה:
```
התפוצה נעצרה בהצלחה!

נשלחו: 45
נכשלו: 3
נותרו: 52

[OK]
```

## מודאל פרטי תפוצה (Details Modal)

### כותרת:
```
┌────────────────────────────────────────────┐
│  פרטי תפוצה #123                    [X]   │
├────────────────────────────────────────────┤
```

### סטטיסטיקות (Cards):
```
┌──────────┐  ┌──────────┐  ┌──────────┐
│ סה"כ     │  │ נשלחו    │  │ נכשלו    │
│          │  │          │  │          │
│   100    │  │    45    │  │    3     │
└──────────┘  └──────────┘  └──────────┘
```

### פילטרים:
```
[הכל (100)]  [נשלחו (45)]  [נכשלו (3)]
     ↑              ↑            ↑
  כחול כהה      ירוק בהיר   אדום בהיר
```

### טבלת נמענים:
```
┌───────────────┬──────────────┬────────┬──────────────────────┬─────────┐
│ טלפון         │ שם           │ סטטוס  │ שגיאה                │ נשלח    │
├───────────────┼──────────────┼────────┼──────────────────────┼─────────┤
│ +972501234567 │ דני כהן      │ נשלח   │ -                    │ 15:23   │
│ +972521234567 │ מיכל לוי     │ נשלח   │ -                    │ 15:23   │
│ +972531234567 │ יוסי אברהם   │ נכשל   │ Invalid phone number │ -       │
│ +972541234567 │ -            │ בתור   │ -                    │ -       │
└───────────────┴──────────────┴────────┴──────────────────────┴─────────┘

מציג 50 מתוך 100 נמענים
```

## תכונות נוספות

### 1. רענון אוטומטי
כאשר יש תפוצה שרצה:
```
[מתעדכן אוטומטית] ⟳
```

### 2. Progress Bar
```
━━━━━━━━━━━━━━━━░░░░  45/100 (45%)
        ↑
    ירוק מלא        אפור ריק
```

### 3. הצגת מי עצר
```
תפוצה #123
נעצר על ידי: דני כהן ← חדש!
30 בדצמ׳ 2025, 15:23
```

## Rate Limiting Visualization

### זרימה:
```
הודעות 1-30    →  המתנה 3 שניות  →  הודעות 31-60
    ↓                    ↓                    ↓
  [████]              [⏱️]                [████]
    ↓                    ↓                    ↓
 30 מתוך 100         המתנה...          60 מתוך 100
```

### בלוגים:
```
[WA_BROADCAST] broadcast_id=123 batch_complete=30 waiting=3s
[WA_BROADCAST] broadcast_id=123 batch_complete=60 waiting=3s
[WA_BROADCAST] broadcast_id=123 batch_complete=90 waiting=3s
🏁 [WA_BROADCAST] broadcast_id=123 total=100 sent=97 failed=3 status=completed
```

## דוגמה מלאה של כרטיס תפוצה

```
┌─────────────────────────────────────────────────────────┐
│  תפוצה #123                              [רץ]          │
│  30 בדצמ׳ 2025, 15:23                                   │
│  נוצר על ידי: דני כהן                                  │
│                                                          │
│  סה"כ: 100                                              │
│  נשלחו: 45                                              │
│  נכשלו: 3                                               │
│                                                          │
│  [████████████░░░░░░░░░░] 45%                           │
│                                                          │
│  [עצור תפוצה]  [פרטים]                                 │
└─────────────────────────────────────────────────────────┘
```

## מקרי שימוש

### 1. משתמש רוצה לראות למי נכשל
```
1. לוחץ על "פרטים"
2. לוחץ על "נכשלו (3)"
3. רואה טבלה עם רק הנכשלים:
   - מספר טלפון
   - סיבת השגיאה
   - שם (אם יש)
```

### 2. משתמש רוצה לעצור תפוצה
```
1. רואה תפוצה עם סטטוס "רץ"
2. לוחץ על "עצור תפוצה"
3. מאשר בדיאלוג
4. רואה הודעת הצלחה עם סטטיסטיקות
5. הסטטוס משתנה ל"נעצר"
```

### 3. משתמש רוצה לראות התקדמות
```
1. שולח תפוצה של 1000 הודעות
2. רואה סטטוס "רץ"
3. Progress bar מתעדכן אוטומטית כל 5 שניות
4. רואה: [████░░░░] 30% → [████████░░] 60% → [██████████] 100%
5. סטטוס משתנה ל"הושלם"
```

## הבדלים עיקריים מהקוד הישן

| תכונה              | לפני         | אחרי              |
|--------------------|--------------|-------------------|
| שפת סטטוסים       | אנגלית       | עברית             |
| פרטי נמענים       | לא קיים     | טבלה מלאה         |
| עצירת תפוצה       | לא קיים     | כן, עם אישור      |
| סינון נמענים      | לא קיים     | הכל/נשלחו/נכשלו  |
| הצגת שגיאות       | לא קיים     | כן, לכל נמען      |
| Rate limiting     | 1-3/שנייה   | 30/3 שניות       |
| רענון אוטומטי     | לא קיים     | כל 5 שניות       |
| הצגת מי עצר       | לא קיים     | כן                |

---

כל התכונות הללו יפעלו מיד לאחר:
1. הרצת המיגרציה
2. פריסת הקוד החדש
3. בניית ה-frontend

אין צורך בשינויי קונפיגורציה נוספים!
