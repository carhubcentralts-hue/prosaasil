# ğŸ¤– ×”×’×“×¨×•×ª ×¡×‘×™×‘×” ×œ××¢×¨×›×ª ×©×™×—×•×ª ×¢×‘×¨×™×ª - ×œ××” AI Agent
# Hebrew AI Call Center Environment Configuration

# ================================
# ğŸ”‘ API Keys & Credentials (REQUIRED)
# ================================

# OpenAI API Key for Hebrew AI responses
OPENAI_API_KEY=your_openai_api_key_here

# Twilio API Credentials
TWILIO_ACCOUNT_SID=your_twilio_account_sid_here
TWILIO_AUTH_TOKEN=your_twilio_auth_token_here

# Google Cloud Service Account JSON (for STT/TTS)
# Copy the entire JSON content or provide path to JSON file
GOOGLE_CLOUD_SERVICE_ACCOUNT_JSON=your_google_cloud_json_here

# ================================
# ğŸ“ Twilio Phone Configuration
# ================================

# Twilio phone numbers
TWILIO_PHONE_FROM=+972504294724
TWILIO_PHONE_TO=+97233763805

# Your server URL (where webhooks will be sent)
SERVER_URL=https://yourdomain.com

# ================================
# ğŸ™ï¸ Hebrew Speech Configuration
# ================================

# VAD (Voice Activity Detection) Settings - Optimized for Hebrew
VAD_RMS=200                    # Voice threshold - higher for Hebrew
BARGE_IN=true                  # Allow interruptions
BARGE_IN_VOICE_FRAMES=75       # Require 1.5s continuous voice (Hebrew needs more)
GRACE_PERIOD_SEC=2.0           # Protection time at start of AI response

# Audio processing
MIN_UTT_SEC=0.8                # Minimum utterance length
MAX_UTT_SEC=3.5                # Maximum utterance length  
SAMPLE_RATE=8000               # Twilio standard
FRAME_SIZE=160                 # 20ms frames

# ================================
# ğŸ¤– AI Agent Configuration
# ================================

# OpenAI Model Settings
OPENAI_MODEL=gpt-4o-mini       # Best model for Hebrew conversations
MAX_TOKENS=60                  # Keep responses short
TEMPERATURE=0.7                # Natural variation
TOP_P=0.9                     # Response creativity

# Conversation Management
MAX_CONVERSATION_HISTORY=10    # Remember last 10 exchanges
DEDUP_WINDOW_SEC=8            # Prevent duplicate responses
REPLY_REFRACTORY_MS=400       # Cooldown between responses

# ================================
# ğŸ§ Google Cloud TTS/STT Settings  
# ================================

# Hebrew Speech-to-Text
STT_LANGUAGE_CODE=he-IL
STT_SAMPLE_RATE=8000

# Hebrew Text-to-Speech  
TTS_LANGUAGE_CODE=he-IL
TTS_VOICE_NAME=he-IL-Wavenet-A    # Best Hebrew voice
TTS_SPEAKING_RATE=1.1             # Slightly faster
TTS_PITCH=0.0                     # Natural tone
TTS_AUDIO_ENCODING=LINEAR16

# ================================
# ğŸŒ Server & WebSocket Settings
# ================================

# Server configuration
DEBUG=false
HOST=0.0.0.0
PORT=5000

# WebSocket settings
WS_KEEPALIVE_INTERVAL=18       # Seconds between keepalive messages
WS_TIMEOUT=120                 # WebSocket timeout

# Watchdog timers
PROCESSING_TIMEOUT=10          # Max processing time
SPEAKING_TIMEOUT=15            # Max speaking time (prevents cutoff)

# ================================
# ğŸ¢ Business Configuration
# ================================

# Company details
BUSINESS_NAME="×©×™ ×“×™×¨×•×ª ×•××©×¨×“×™× ×‘×¢×´×"
AGENT_NAME="×œ××”"
GREETING_MESSAGE="×©×œ×•×! ×× ×™ ×œ××” ××©×™ ×“×™×¨×•×ª ×•××©×¨×“×™×. ××™×š ×× ×™ ×™×›×•×œ×” ×œ×¢×–×•×¨?"

# Real estate context (for better STT recognition)
REAL_ESTATE_KEYWORDS="×“×™×¨×”,×“×™×¨×•×ª,×‘×™×ª,×‘×ª×™×,× ×“×œ×Ÿ,×©×›×™×¨×•×ª,××›×™×¨×”,×—×“×¨×™×,××—×™×¨,××–×•×¨,×©×›×•× ×”,××™×§×•×,×§×•××”,×ª×œ ××‘×™×‘,×™×¨×•×©×œ×™×,×—×™×¤×”,×‘××¨ ×©×‘×¢,×¤×ª×— ×ª×§×•×•×”"

# ================================
# ğŸ”§ Advanced Settings
# ================================

# Loop prevention
ENABLE_LOOP_DETECTION=true
MAX_SIMILAR_RESPONSES=2

# Performance optimization  
ENABLE_AUDIO_COMPRESSION=false
AUDIO_BUFFER_SIZE=4096
TX_QUEUE_SIZE=4096

# Logging
LOG_LEVEL=INFO
ENABLE_CONVERSATION_LOG=true
ENABLE_AUDIO_DEBUG=false

# Security
ENABLE_CALL_RECORDING=false
ALLOWED_CALLERS=                # Comma-separated phone numbers (empty = all allowed)

# ================================
# ğŸ“‹ Usage Instructions
# ================================

# 1. Copy this file to .env in your project root
# 2. Fill in all the API keys and credentials marked as "REQUIRED"
# 3. Update SERVER_URL with your actual domain
# 4. Adjust phone numbers as needed
# 5. Test with: python COMPLETE_CALL_SYSTEM.py

# ================================
# ğŸš¨ Security Notes  
# ================================

# - Never commit this file with real credentials to version control
# - Use environment variables or secure secret management in production
# - Rotate API keys regularly
# - Monitor usage and costs for OpenAI and Google Cloud
# - Set up proper firewall rules for your webhooks

# ================================
# ğŸ“ Twilio Webhook URLs
# ================================

# Set these URLs in your Twilio Console:
# Incoming Call Webhook: https://yourdomain.com/webhook/incoming_call
# Stream Status Callback: https://yourdomain.com/webhook/stream_status  
# Stream End Action: https://yourdomain.com/webhook/stream_ended

# ================================
# ğŸ’° Cost Estimates (per minute)
# ================================

# OpenAI GPT-4o-mini: ~$0.01-0.02
# Google Cloud STT: ~$0.016
# Google Cloud TTS: ~$0.016  
# Twilio Voice: ~$0.0085
# Total per minute: ~$0.05-0.07