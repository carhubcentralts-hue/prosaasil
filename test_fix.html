<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>×‘×“×™×§×ª ×ª×™×§×•×Ÿ ×‘×¢×™×™×ª ×”×©×ª×œ×˜×•×ª ×¢×¡×§×™×</title>
    <style>
        body { font-family: Arial, sans-serif; padding: 20px; background: #f5f5f5; }
        .business-card { 
            background: white; 
            margin: 10px 0; 
            padding: 15px; 
            border-radius: 8px; 
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .business-info h3 { margin: 0 0 5px 0; color: #333; }
        .business-info p { margin: 0; color: #666; font-size: 14px; }
        .takeover-btn { 
            background: #7c3aed; 
            color: white; 
            border: none; 
            padding: 10px 20px; 
            border-radius: 6px; 
            cursor: pointer; 
        }
        .takeover-btn:hover { background: #6d28d9; }
        .header { background: white; padding: 20px; border-radius: 8px; margin-bottom: 20px; text-align: center; }
    </style>
</head>
<body>
    <div class="header">
        <h1>ğŸ”§ ×‘×“×™×§×ª ×ª×™×§×•×Ÿ ×‘×¢×™×™×ª ×”×©×ª×œ×˜×•×ª</h1>
        <p>×”×‘×¢×™×”: ××©×ª××© ×ª××™×“ ××•×¢×‘×¨ ×œ×¢×¡×§ #6 ×‘××§×•× ×”×¢×¡×§ ×©×‘×—×¨</p>
        <p>×”×ª×™×§×•×Ÿ: ×¡×“×¨ × ×›×•×Ÿ + ××™×©×•×¨ ×œ×¤× ×™ ×”×©×ª×œ×˜×•×ª + ×”×•×“×¢×•×ª ×‘×¨×•×¨×•×ª</p>
    </div>

    <div id="businesses-list">
        <p>×˜×•×¢×Ÿ ×¨×©×™××ª ×¢×¡×§×™×...</p>
    </div>

    <script>
        async function loadBusinesses() {
            try {
                const response = await fetch('/api/admin/businesses');
                const businesses = await response.json();
                
                const container = document.getElementById('businesses-list');
                container.innerHTML = '<h2>×¨×©×™××ª ×¢×¡×§×™× (×¡×“×¨ ×—×“×©):</h2>';
                
                businesses.forEach((business, index) => {
                    const card = document.createElement('div');
                    card.className = 'business-card';
                    card.innerHTML = `
                        <div class="business-info">
                            <h3>×¢×¡×§ #${business.id}: ${business.name}</h3>
                            <p>×¡×•×’: ${business.type} | ××™×§×•× ×‘×¨×©×™××”: ${index + 1}</p>
                        </div>
                        <button class="takeover-btn" onclick="testTakeover(${business.id}, '${business.name}')">
                            ×”×©×ª×œ×˜ ×¢×œ ×”×¢×¡×§
                        </button>
                    `;
                    container.appendChild(card);
                });
                
            } catch (error) {
                document.getElementById('businesses-list').innerHTML = 
                    `<p style="color: red;">âŒ ×©×’×™××” ×‘×˜×¢×™× ×ª ×¢×¡×§×™×: ${error.message}</p>`;
            }
        }
        
        function testTakeover(businessId, businessName) {
            if (confirm(`×”×× ××ª×” ×‘×˜×•×— ×©×‘×¨×¦×•× ×š ×œ×”×©×ª×œ×˜ ×¢×œ ${businessName} (×¢×¡×§ #${businessId})?`)) {
                console.log(`ğŸš€ ×”×©×ª×œ×˜×•×ª ×¢×œ ×¢×¡×§ #${businessId}: ${businessName}`);
                alert(`âœ… ×‘×“×™×§×”: ×”×©×ª×œ×˜×•×ª ×¢×œ ×¢×¡×§ #${businessId} (${businessName}) ×”×™×™×ª×” ××ª×‘×¦×¢×ª ×›×¢×ª`);
            }
        }
        
        // ×˜×¢×™× ×ª ×”×¢×¡×§×™× ×›×©×”×¢××•×“ × ×˜×¢×Ÿ
        loadBusinesses();
    </script>
</body>
</html>