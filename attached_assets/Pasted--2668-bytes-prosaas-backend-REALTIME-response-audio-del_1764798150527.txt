: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 1100 frames (rms=10, reason=noise)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=16, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 5868 bytes
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ××¦×˜×¢×¨, ×× ×—× ×• ×›×¨×’×¢ ×œ× ×ª×•××›×™× ×‘×¢×™×¨ ×”×–×•. ×ª×•×“×” ×•×™×•× ×˜×•×‘.
prosaas-backend  | âš ï¸ [LOOP GUARD] Triggered by consecutive_responses!
prosaas-backend  | ğŸ›‘ [LOOP GUARD] BLOCKING further responses until user speaks!
prosaas-backend  | ğŸ›‘ [LOOP GUARD] Cleared TX queue
prosaas-backend  | ğŸ›‘ [LOOP GUARD] Sent clear to Twilio
prosaas-backend  | ğŸ’° [COST] AI utterance: 1.60s (59 chunks)
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '××¦×˜×¢×¨, ×× ×—× ×• ×›×¨×’×¢ ×œ× ×ª×•××›×™× ×‘×¢...'
prosaas-backend  | [POLITE CLOSING] Detected: '×™×•× ×˜×•×‘'
prosaas-backend  | âœ… [HANGUP BUILD 176] AI said goodbye with auto_end_on_goodbye=True + user interaction - disconnecting
prosaas-backend  | ğŸ“ [STATE] Transitioning ACTIVE â†’ CLOSING (reason: ai_goodbye_auto_end)
prosaas-backend  | ğŸ“ [BUILD 163] Pending hangup set - will disconnect after audio finishes playing
prosaas-backend  | ğŸ”‡ [SERVER_EVENT] Sent SILENTLY to AI: [SERVER] ×–×™×”×™×ª×™ ×©××ª×” ×—×•×–×¨ ×¢×œ ×¢×¦××š. ×××•×¨: '×œ× ×©××¢×ª×™ ×˜×•×‘, ××¤×©×¨ ×œ×—×–×•×¨?' ×•×ª××ª×™×Ÿ ×‘×©×§×˜.
prosaas-backend  | ğŸ›‘ [LOOP GUARD] Blocking response.create (engaged=True, consecutive=5)
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 1 frames...
prosaas-backend  | ğŸ§¹ TX_CLEAR: SUCCESS
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | âœ… [POLITE HANGUP] Twilio TX queue empty after 100ms
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | [WA-SESSION] ğŸ“± Check #3: Found 0 stale sessions to process
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 1200 frames (rms=8, reason=noise)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=11, voice_frames=0
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=463.0 > threshold=117.8
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | ğŸ“ [SMART HANGUP] === CALL ENDING ===
prosaas-backend  | ğŸ“ [SMART HANGUP] Reason: AI finished speaking politely
prosaas-backend  | ğŸ“ [SMART HANGUP] Lead captured: False
prosaas-backend  | ğŸ“ [SMART HANGUP] Goodbye detected: True
prosaas-backend  | ğŸ“ [SMART HANGUP] Lead state: {'service_type': '×ª×¨×¦×” ×¢×–×¨×”', 'city': '×§×¨×™×™×ª ××ª×'}
prosaas-backend  | ğŸ“ [SMART HANGUP] Required fields: ['service_type', 'city']
prosaas-backend  | ğŸ“ [SMART HANGUP] ===================
prosaas-backend  | âœ… [BUILD 163] Call CAee8cc7... hung up successfully: AI finished speaking politely
prosaas-backend  | WS_STOP sid=MZb375e29449ef2d8d6c351dd4d8e3797f rx=1926 tx=856
prosaas-backend  | ğŸ“ [SES-1d538471] CALL ENDED - duration=38.5s, business_id=1, rx=1926, tx=856
prosaas-backend  | ğŸ“¤ [REALTIME] Audio sender ended
prosaas-backend  | ğŸ“ [REALTIME] Text sender ended
prosaas-backend  | ğŸ§¹ Waiting for 5 background threads...
prosaas-backend  | STREAM_ENDED call=CAee8cc7c86bd48f925c87a34a75d76ceb stream=N/A status=N/A
prosaas-backend  | INFO:     172.18.0.6:50558 - "POST /webhook/stream_ended HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Found existing recording for CAee8cc7c86bd48f925c87a34a75d76ceb: /2010-04-01/Accounts/ACcd09431f076a309088b18ed1f286f32e/Recordings/RE187209ae0294eb339d105c02b6ecfd0e.json
prosaas-backend  | INFO:     172.18.0.6:50560 - "POST /webhook/call_status HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Recording queued for processing: CAee8cc7c86bd48f925c87a34a75d76ceb
prosaas-backend  | INFO:     connection closed
prosaas-backend  | âš ï¸ Background thread 0 still running after timeout
^[[Bprosaas-backend  | âš ï¸ Background thread 4 still running after timeout
prosaas-backend  | âœ… All background threads cleanup complete
prosaas-backend  | WS_DONE sid=MZb375e29449ef2d8d6c351dd4d8e3797f rx=1926 tx=856
prosaas-backend  | âœ… CALL FINALIZED: CAee8cc7c86bd48f925c87a34a75d76ceb
prosaas-backend  | ğŸ“ Summary: ### ×¡×•×’ ×”×¤× ×™×™×” ×•×”×ª×—×•×:
prosaas-backend  | ×”×¤× ×™×™×” ××ª×™×™×—×¡×ª ×œ×©×™×¨×•×ª×™ ×ª×™×•×•×š × ×“×œ"×Ÿ, ×¢× ×“×’×© ×¢×œ ×—×™×¤×•×© ×× ×©×™ ××§×¦×•×¢ ×‘×ª×—×•× ×”×—×©××œ ×•×”××™× ×¡×˜×œ×¦×™×”.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™× ×¡×¤×¦×™×¤×™×™×:
prosaas-backend  | - ×”×œ×§×•×— ××—×¤×© ×—×©××œ××™ ×‘×¢×™×¨ ×§×¨×™×™×ª ××ª×.
prosaas-backend  | - ×”×œ×§×•×— ×’× ×—×™×¤×© ××™× ×¡×˜×œ×˜×•×¨ ×‘×¢×™×¨ ×§×¨×™×™×ª ×©××•× ×”, ××š ×”×©×™×¨×•×ª ×œ× ×–××™×Ÿ ×‘××–×•×¨ ×–×”.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™ ×”×œ×§×•×—:
prosaas-backend  | ×œ× × ××¡×¨×• ×¤×¨×˜×™ ×œ×§×•×— ××• ×××¦×¢×™ ×”×ª×§×©×¨×•×ª.
prosaas-backend  | 
prosaas-backend  | ### ×¡×˜×˜×•×¡ ×•××¢×§×‘:
prosaas-backend  | - ×œ× × ×§×‘×¢×” ×¤×’×™×©×” ××• ×¤×¢×•×œ×” × ×•×¡×¤×ª.
prosaas-backend  | - ×“×—×™×¤×•×ª: ×œ× ×¦×•×™× ×” ×“×—×™×¤×•×ª.
prosaas-backend  | - ×¤×¢×•×œ×•×ª × ×“×¨×©×•×ª: ×™×© ×œ×•×•×“× ×–××™× ×•×ª ×× ×©×™ ××§×¦×•×¢ × ×•×¡×¤×™× ×‘×¢×™×¨ ×§×¨×™×™×ª ××ª× ×•×œ×”×ª×¢×“×›×Ÿ ×œ×’×‘×™ ××¤×©×¨×•×™×•×ª ×©×™×¨×•×ª ×‘×¢×™×¨ ×§×¨×™×™×ª ×©××•× ×”.
prosaas-backend  | 
prosaas-backend  | ### ×”×¢×¨×•×ª ×—×©×•×‘×•×ª:
prosaas-backend  | ×—×©×•×‘ ×œ×¢×“×›×Ÿ ××ª ×”×œ×§×•×— ×œ×’×‘×™ ×–××™× ×•×ª ×× ×©×™ ××§×¦×•×¢ × ×•×¡×¤×™× ×‘×¢×™×¨ ×§×¨×™×™×ª ××ª× ×•×œ×©×§×•×œ ×”×¨×—×‘×ª ×”×©×™×¨×•×ª×™× ×œ×¢×™×¨ ×§×¨×™×™×ª ×©××•× ×” ×‘×¢×ª×™×“.
prosaas-backend  | ğŸ¯ Intent: general_inquiry
prosaas-backend  | ğŸ“Š Next Action: ××¢×§×‘ ×ª×•×š 24 ×©×¢×•×ª
prosaas-backend  | â„¹ï¸ Appointment handling: Managed by Agent during call (BUILD 119)
prosaas-backend  | ğŸ“± [WEBHOOK] Phone extraction debug:
prosaas-backend  |    - self.phone_number: None
prosaas-backend  |    - self.customer_phone_dtmf: NOT_SET
prosaas-backend  |    - call_log.from_number: +972504294724
prosaas-backend  |    - crm_context.customer_phone: NO_CRM
prosaas-backend  |    âœ“ Using CallLog from_number: +972504294724
prosaas-backend  | ğŸ¯ [WEBHOOK] Found known professional in transcript: ×—×©××œ××™
prosaas-backend  | ğŸ“‹ [WEBHOOK] Lead capture state: {'service_type': '×ª×¨×¦×” ×¢×–×¨×”', 'city': '×§×¨×™×™×ª ××ª×'}
prosaas-backend  | [WEBHOOK] ğŸ“¦ Payload built: call_id=CA