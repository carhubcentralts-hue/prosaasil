prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '×¨×§ ××•×•×“× â€“ ××ª×” ×¦×¨×™×š ×§×™×¦×•×¨ ×“×œ×ª×•...'
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 270 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸ”‡ [SILENCE] Warning 2/2 after 6.0s silence
prosaas-backend  | ğŸ” [DEBUG] _check_lead_captured: required_fields from self = ['city', 'service_type']
prosaas-backend  | âœ… [SMART HANGUP] All required fields collected: city=×¨××œ×”, service_type=××ª×” ×¦×¨×™×š
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=133.0 > threshold=108.0
prosaas-backend  | ğŸ’“ WS_KEEPALIVE #4 (prevents 5min timeout)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=14, voice_frames=0
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_stopped
prosaas-backend  | ğŸ¤ [BUILD 166] Speech ended - noise gate RE-ENABLED
prosaas-backend  | [REALTIME] event: input_audio_buffer.committed
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CirwQmjqDHnngW5...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CirwQmjqDHnngW5... status=in_progress modalities=['audio', 'text'] output_format=g711_ulaw
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 219 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 219 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 219 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 219 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | [REALTIME] event: conversation.item.input_audio_transcription.completed
prosaas-backend  | [SILENCE GATE] âŒ REJECTED (RMS=11 < 30, frames=0): 'Okay, so'
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=14, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] AI started speaking (audio.delta)
prosaas-backend  | âš ï¸ [AUDIO GAP] 2462ms gap between chunks #94 and #95 - OpenAI delay!
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=True, oai_q=0, tx_q=208) retry #0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 600 frames (rms=11, reason=noise)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=10, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 1400 frames (rms=8, reason=noise)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 281 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 281 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 281 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 281 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 6936 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ×›×Ÿ, ×× ×™ ×¤×”. ×× ×™ ×¦×¨×™×š ×œ×“×¢×ª ××™×–×” ×¡×•×’ ×©×™×¨×•×ª ××ª×” ×¦×¨×™×š.
prosaas-backend  | â­ï¸ [LOOP GUARD] Skipped - call is ending (closing=True, hangup=False)
prosaas-backend  | ğŸ’° [COST] AI utterance: 0.80s (109 chunks)
prosaas-backend  | âœ… [LEAD STATE] Updated: service_type=××ª×” ×¦×¨×™×š
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'service_type': '××ª×” ×¦×¨×™×š', 'city': '×—×™×¤×”'}
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '×›×Ÿ, ×× ×™ ×¤×”. ×× ×™ ×¦×¨×™×š ×œ×“×¢×ª ××™×–×”...'
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 353 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 353 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=13, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 314 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 314 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 314 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 314 frames...
prosaas-backend  | ğŸ’“ WS_KEEPALIVE #2 (prevents 5min timeout)
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=509.0 > threshold=108.0
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 302 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 302 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=279, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 700 frames (rms=8, reason=noise)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=92, voice_frames=0
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=442.0 > threshold=110.4
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 1500 frames (rms=198, reason=insufficient_consec_frames(3/5))
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 263 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 263 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 263 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 263 frames...
prosaas-backend  | ğŸ¤ END OF UTTERANCE: 1.1s audio, conversation #2
prosaas-backend  | ğŸ§  STATE -> PROCESSING | len=18240 | silence_ms=600
prosaas-backend  | â­ï¸ [REALTIME] Skipping Google STT/TTS - using Realtime API only
prosaas-backend  | âœ… Processing complete for conversation #2
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 252 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 252 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=195, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=42, voice_frames=0
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 213 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 213 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 201 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 201 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=404, voice_frames=0
prosaas-backend  | ğŸ”‡ [SILENCE] Warning 1/2 after 5.4s silence
prosaas-backend  | ğŸ” [DEBUG] _check_lead_captured: required_fields from self = ['city', 'service_type']
prosaas-backend  | âœ… [SMART HANGUP] All required fields collected: city=×¨××œ×”, service_type=××ª×” ×¦×¨×™×š
prosaas-backend  | WS_STOP sid=MZf49a8faed439069fb9a58568c59266ea rx=2380 tx=1575
prosaas-backend  | ğŸ“ [SES-8f4368f2] CALL ENDED - duration=47.5s, business_id=10, rx=2380, tx=1575
prosaas-backend  | ğŸ“ [REALTIME] Text sender ended
prosaas-backend  | ğŸ“¤ [REALTIME] Audio sender ended
prosaas-backend  | ğŸ§¹ Waiting for 5 background threads...
prosaas-backend  | STREAM_ENDED call=CA4ef9bbc101d4d4636a19cc08a5455612 stream=N/A status=N/A
prosaas-backend  | INFO:     172.18.0.5:38576 - "POST /webhook/stream_ended HTTP/1.1" 204 No Content
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_started
prosaas-backend  | ğŸ¤ [REALTIME] User started speaking - setting user_has_spoken=True
prosaas-backend  | ğŸ¤ [BUILD 166] Noise gate BYPASSED - sending ALL audio to OpenAI
prosaas-backend  | ğŸ” [DEBUG] _check_lead_captured: required_fields from self = ['city', 'service_type']
prosaas-backend  | âœ… [SMART HANGUP] All required fields collected: city=×¨××œ×”, service_type=××ª×” ×¦×¨×™×š
prosaas-backend  | ğŸ”‡ [SILENCE] Max warnings exceeded BUT lead not confirmed - sending final confirmation request
prosaas-backend  | ğŸ”‡ [SILENCE] Final chance already given - closing anyway
prosaas-backend  | ğŸ”‡ [SILENCE] Max warnings exceeded - initiating polite hangup
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | INFO:     172.18.0.5:38580 - "POST /webhook/call_status HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Found existing recording for CA4ef9bbc101d4d4636a19cc08a5455612: /2010-04-01/Accounts/ACcd09431f076a309088b18ed1f286f32e/Recordings/REc14bd890e8338e2e053792e1e82318e5.json
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=210.0 > threshold=108.0
prosaas-backend  | âœ… Recording queued for processing: CA4ef9bbc101d4d4636a19cc08a5455612
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=26, voice_frames=0
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=175) retry #10
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=10, role=owner, business_id=10, computed_tenant=10, impersonating=False
prosaas-backend  | ğŸ”” /api/notifications - tenant_id=10, g.tenant=10
prosaas-backend  | ğŸ”” Querying reminders for tenant_id=10, is_system_admin=False
prosaas-backend  | INFO:     connection closed
prosaas-backend  | ğŸ¤ END OF UTTERANCE: 1.7s audio, conversation #3
prosaas-backend  | ğŸ§  STATE -> PROCESSING | len=26560 | silence_ms=505
prosaas-backend  | â­ï¸ [REALTIME] Skipping Google STT/TTS - using Realtime API only
prosaas-backend  | âœ… Processing complete for conversation #3
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_stopped
prosaas-backend  | ğŸ¤ [BUILD 166] Speech ended - noise gate RE-ENABLED
prosaas-backend  | [REALTIME] event: input_audio_buffer.committed
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CirwWgdgAq3fwZa...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CirwWgdgAq3fwZa... status=in_progress modalities=['audio', 'text'] output_format=g711_ulaw
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] AI started speaking (audio.delta)
prosaas-backend  | âš ï¸ [AUDIO GAP] 7303ms gap between chunks #26 and #27 - OpenAI delay!
prosaas-backend  | ğŸ”§ [GAP RECOVERY] Inserted 25 silence frames (500ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”” Found 0 reminders
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 800 frames (rms=13, reason=noise)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=15, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | INFO:     172.18.0.5:38584 - "GET /api/notifications HTTP/1.1" 200 OK
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | [REALTIME] event: conversation.item.input_audio_transcription.completed
prosaas-backend  | [SILENCE GATE] âŒ REJECTED (RMS=13 < 30, frames=0): 'à¸‚à¸­à¸šà¸„à¸¸à¸“'
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | [WA-SESSION] ğŸ“± Check #17: Found 0 stale sessions to process
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=105, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=175) retry #20
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | âš ï¸ Background thread 0 still running after timeout
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=14) retry #0
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 5336 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ××¦×•×™×Ÿ, ×§×™×‘×œ×ª×™. ××ª×” ×¦×¨×™×š ×§×™×¦×•×¨ ×“×œ×ª×•×ª ×‘×¢×™×¨ ×¨××œ×”. ×‘×¢×œ ××§×¦×•×¢ ××ª××™× ×™×—×–×•×¨ ××œ×™×š ×‘×“×§×•×ª ×”×§×¨×•×‘×•×ª. ×ª×•×“×” ×•×™×•× ×˜×•×‘.
prosaas-backend  | ğŸ’° [COST] AI utterance: 1.88s (65 chunks)
prosaas-backend  | âœ… [LEAD STATE] Updated: city=×¨××œ×”
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'service_type': '××ª×” ×¦×¨×™×š', 'city': '×¨××œ×”'}
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '××¦×•×™×Ÿ, ×§×™×‘×œ×ª×™. ××ª×” ×¦×¨×™×š ×§×™×¦×•×¨ ...'
prosaas-backend  | [POLITE CLOSING] Detected: '×™×•× ×˜×•×‘'
prosaas-backend  | âœ… [HANGUP BUILD 176] AI said goodbye with auto_end_on_goodbye=True + user interaction - disconnecting
prosaas-backend  | ğŸ“ [STATE] Transitioning ACTIVE â†’ CLOSING (reason: ai_goodbye_auto_end)
prosaas-backend  | ğŸ“ [BUILD 163] Pending hangup set - will disconnect after audio finishes playing
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 417 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 900 frames (rms=8, reason=noise)
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=184.0 > threshold=108.0
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=175) retry #30
prosaas-backend  | âš ï¸ [BUILD 178] Max hangup retries exceeded - forcing hangup
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 367 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=17, voice_frames=0
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 316 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 175 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=53, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 1000 frames (rms=8, reason=noise)
prosaas-backend  | âœ… CALL FINALIZED: CA4ef9bbc101d4d4636a19cc08a5455612
prosaas-backend  | ğŸ“ Summary: ### ×¡×•×’ ×”×¤× ×™×™×” ×•×”×ª×—×•×:
prosaas-backend  | ×¤× ×™×™×” ×œ×©×™×¨×•×ª×™ ×× ×¢×•×œ×Ÿ ×¨×›×‘ ×‘×¢×™×¨ ×—×™×¤×”.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™× ×¡×¤×¦×™×¤×™×™×:
prosaas-backend  | ×”×œ×§×•×— ××—×¤×© ×©×™×¨×•×ª×™ ×× ×¢×•×œ×Ÿ ×¨×›×‘, ×œ×œ× ×¤×¨×˜×™× × ×•×¡×¤×™× ×¢×œ ×¡×•×’ ×”×‘×¢×™×” ××• ×“×—×™×¤×•×ª ×”×©×™×¨×•×ª.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™ ×”×œ×§×•×—:
prosaas-backend  | ×œ× × ××¡×¨×• ×¤×¨×˜×™ ×œ×§×•×— ×¡×¤×¦×™×¤×™×™× (×©× ×•×××¦×¢×™ ×”×ª×§×©×¨×•×ª).
prosaas-backend  | 
prosaas-backend  | ### ×¡×˜×˜×•×¡ ×•××¢×§×‘:
prosaas-backend  | - × ×§×‘×¢×” ×¤×¢×•×œ×”: ×‘×¢×œ ××§×¦×•×¢ ×™×—×–×•×¨ ×œ×œ×§×•×— ×‘×“×§×•×ª ×”×§×¨×•×‘×•×ª.
prosaas-backend  | - ×“×—×™×¤×•×ª: ×œ× ×¦×•×™× ×”, ××š × ×™×ª×Ÿ ×œ×”× ×™×— ×›×™ ××“×•×‘×¨ ×‘×“×—×™×¤×•×ª ×’×‘×•×”×” ×¢×§×‘ ×”×¦×•×¨×š ×‘×× ×¢×•×œ×Ÿ ×¨×›×‘.
prosaas-backend  | - ×¤×¢×•×œ×•×ª × ×“×¨×©×•×ª: ×™×© ×œ×•×•×“× ×©×”×× ×¢×•×œ×Ÿ ×”××™×•×¢×“ ×™×™×¦×•×¨ ×§×©×¨ ×‘×”×§×“×.
prosaas-backend  | 
prosaas-backend  | ### ×”×¢×¨×•×ª ×—×©×•×‘×•×ª:
prosaas-backend  | ×—×©×•×‘ ×œ×¢×§×•×‘ ××—×¨×™ ×”×¤× ×™×™×” ×•×œ×•×•×“× ×©×”×œ×§×•×— ×§×™×‘×œ ××ª ×”×©×™×¨×•×ª ×”× ×“×¨×© ×‘×”×¦×œ×—×”. ××•××œ×¥ ×œ×©××•×¨ ×¢×œ ×§×©×¨ ×¢× ×”×œ×§×•×— ×œ××—×¨ ×”×©×™×¨×•×ª ×›×“×™ ×œ×”×‘×˜×™×— ×©×‘×™×¢×•×ª ×¨×¦×•×Ÿ.
prosaas-backend  | ğŸ¯ Intent: general_inquiry
prosaas-backend  | ğŸ“Š Next Action: ××¢×§×‘ ×ª×•×š 24 ×©×¢×•×ª
prosaas-backend  | â„¹ï¸ Appointment handling: Managed by Agent during call (BUILD 119)
prosaas-backend  | ğŸ“± [WEBHOOK] Phone extraction debug:
prosaas-backend  |    - self.phone_number: None
prosaas-backend  |    - self.customer_phone_dtmf: NOT_SET
prosaas-backend  | INFO:     127.0.0.1:54026 - "GET /health HTTP/1.1" 200 OK
prosaas-backend  | âš ï¸ Background thread 4 still running after timeout
prosaas-backend  | âœ… All background threads cleanup complete
prosaas-backend  | WS_DONE sid=MZf49a8faed439069fb9a58568c59266ea rx=2380 tx=1575
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 266 frames...
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  |    - call_log.from_number: +972504294724
prosaas-backend  |    - crm_context.customer_phone: NO_CRM
prosaas-backend  |    âœ“ Using CallLog from_number: +972504294724
prosaas-backend  | ğŸ¯ [WEBHOOK] Found LAST professional in transcript: ×× ×¢×•×œ×Ÿ (pos=182)
prosaas-backend  | ğŸ“‹ [WEBHOOK] Lead capture state: {'service_type': '××ª×” ×¦×¨×™×š', 'city': '×—×™×¤×”'}
prosaas-backend  | [WEBHOOK] ğŸ“¦ Payload built: call_id=CA4ef9bbc101d4d4636a19cc08a5455612, phone=+972504294724, city=×—×™×¤×”, service_category=×× ×¢×•×œ×Ÿ
prosaas-backend  | [WEBHOOK] Sending call.completed to http://prosaas.pro/n8n/webhook/prosaas-call-comple... (attempt 1)
prosaas-backend  | âœ… [WEBHOOK] Call completed webhook queued: phone=+972504294724, city=×—×™×¤×”, service=×× ×¢×•×œ×Ÿ
prosaas-backend  | [WEBHOOK] ğŸ”€ Following redirect to: https://prosaas.pro/n8n/webhook/prosaas-call-completed
prosaas-backend  | [WEBHOOK] Sending call.completed to https://prosaas.pro/n8n/webhook/prosaas-call-compl... (attempt 2)
prosaas-backend  | [WEBHOOK] âœ… Success: call.completed sent to webhook (status 200)
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 215 frames...
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=166.0 > threshold=108.0
prosaas-backend  | ğŸ’“ WS_KEEPALIVE #3 (prevents 5min timeout)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 1100 frames (rms=8, reason=noise)
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=14) retry #10
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 165 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | WS_STOP sid=MZ63e155d8cd118f5934bea5419e08067c rx=1580 tx=1012
prosaas-backend  | ğŸ“ [SES-db06fdfe] CALL ENDED - duration=32.1s, business_id=10, rx=1580, tx=1012
prosaas-backend  | ğŸ“¤ [REALTIME] Audio sender ended
prosaas-backend  | ğŸ“ [REALTIME] Text sender ended
prosaas-backend  | ğŸ§¹ Waiting for 5 background threads...
prosaas-backend  | STREAM_ENDED call=CA2a3276cea2f7e1833d388beccd542e65 stream=N/A status=N/A
prosaas-backend  | INFO:     172.18.0.5:47478 - "POST /webhook/stream_ended HTTP/1.1" 204 No Content
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 123 frames...
prosaas-backend  | INFO:     172.18.0.5:47486 - "POST /webhook/call_status HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Found existing recording for CA2a3276cea2f7e1833d388beccd542e65: /2010-04-01/Accounts/ACcd09431f076a309088b18ed1f286f32e/Recordings/RE1e16b9fee495d432594e0bbef9672dab.json
prosaas-backend  | âœ… Recording queued for processing: CA2a3276cea2f7e1833d388beccd542e65
prosaas-backend  | INFO:     connection closed
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 123 frames...
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=10, role=owner, business_id=10, computed_tenant=10, impersonating=False
prosaas-backend  | ğŸ”” /api/notifications - tenant_id=10, g.tenant=10
prosaas-backend  | ğŸ”” Querying reminders for tenant_id=10, is_system_admin=False
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 123 frames...
prosaas-backend  | ğŸ”” Found 0 reminders
prosaas-backend  | INFO:     172.18.0.5:47496 - "GET /api/notifications HTTP/1.1" 200 OK
prosaas-backend  | âš ï¸ Background thread 0 still running after timeout
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 123 frames...
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=14) retry #20
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | âš ï¸ Background thread 4 still running after timeout
prosaas-backend  | âœ… All background threads cleanup complete
prosaas-backend  | WS_DONE sid=MZ63e155d8cd118f5934bea5419e08067c rx=1580 tx=1012
prosaas-backend  | âœ… CALL FINALIZED: CA2a3276cea2f7e1833d388beccd542e65
prosaas-backend  | ğŸ“ Summary: ### ×¡×•×’ ×”×¤× ×™×™×” ×•×”×ª×—×•×:
prosaas-backend  | ×¤× ×™×™×” ×œ×©×™×¨×•×ª×™ ×× ×¢×•×œ× ×•×ª, ×¡×¤×¦×™×¤×™×ª ×§×™×¦×•×¨ ×“×œ×ª×•×ª ×‘×¢×™×¨ ×¨××œ×”.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™× ×¡×¤×¦×™×¤×™×™×:
prosaas-backend  | - **×©×™×¨×•×ª × ×“×¨×©**: ×§×™×¦×•×¨ ×“×œ×ª×•×ª
prosaas-backend  | - **××™×§×•×**: ×¨××œ×”
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™ ×”×œ×§×•×—:
prosaas-backend  | ×œ× × ××¡×¨×• ×¤×¨×˜×™ ×œ×§×•×— ××• ×××¦×¢×™ ×”×ª×§×©×¨×•×ª.
prosaas-backend  | 
prosaas-backend  | ### ×¡×˜×˜×•×¡ ×•××¢×§×‘:
prosaas-backend  | - **×¤×¢×•×œ×”**: ×‘×¢×œ ××§×¦×•×¢ ×™×—×–×•×¨ ×œ×œ×§×•×— ×‘×“×§×•×ª ×”×§×¨×•×‘×•×ª.
prosaas-backend  | - **×“×—×™×¤×•×ª**: ×œ× ×¦×•×™× ×” ×“×—×™×¤×•×ª, ××š ×™×© ×œ×”× ×™×— ×©×”×©×™×¨×•×ª × ×“×¨×© ×‘×”×§×“×.
prosaas-backend  | - **×¤×¢×•×œ×•×ª × ×“×¨×©×•×ª**: ××¢×§×‘ ××—×¨ ×”×¤× ×™×™×” ×•×”×‘×˜×—×ª ×—×–×¨×” ××”×™×¨×” ×œ×œ×§×•×—.
prosaas-backend  | 
prosaas-backend  | ### ×”×¢×¨×•×ª ×—×©×•×‘×•×ª:
prosaas-backend  | ×—×©×•×‘ ×œ×•×•×“× ×©×”×× ×¢×•×œ×Ÿ ×”××™×•×¢×“ ××ª××—×” ×‘×§×™×¦×•×¨ ×“×œ×ª×•×ª ×•×™×›×•×œ ×œ×¡×¤×§ ×©×™×¨×•×ª ××™×›×•×ª×™ ×‘×¢×™×¨ ×¨××œ×”. ××•××œ×¥ ×œ×¢×§×•×‘ ××—×¨×™ ×”×¤× ×™×™×” ×•×œ×•×•×“× ×©×”×œ×§×•×— ××¨×•×¦×” ××”×©×™×¨×•×ª.
prosaas-backend  | ğŸ¯ Intent: general_inquiry
prosaas-backend  | ğŸ“Š Next Action: ××¢×§×‘ ×ª×•×š 24 ×©×¢×•×ª
prosaas-backend  | â„¹ï¸ Appointment handling: Managed by Agent during call (BUILD 119)
prosaas-backend  | ğŸ“± [WEBHOOK] Phone extraction debug:
prosaas-backend  |    - self.phone_number: None
prosaas-backend  |    - self.customer_phone_dtmf: NOT_SET
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=123) retry #0
prosaas-backend  |    - call_log.from_number: +972549750505
prosaas-backend  |    - crm_context.customer_phone: NO_CRM
prosaas-backend  |    âœ“ Using CallLog from_number: +972549750505
prosaas-backend  | ğŸ¯ [WEBHOOK] Found LAST professional in transcript: ×× ×¢×•×œ×Ÿ (pos=21)
prosaas-backend  | ğŸ“‹ [WEBHOOK] Lead capture state: {'service_type': '××ª×” ×¦×¨×™×š', 'city': '×¨××œ×”'}
prosaas-backend  | [WEBHOOK] ğŸ“¦ Payload built: call_id=CA2a3276cea2f7e1833d388beccd542e65, phone=+972549750505, city=×¨××œ×”, service_category=×× ×¢×•×œ×Ÿ
prosaas-backend  | [WEBHOOK] Sending call.completed to http://prosaas.pro/n8n/webhook/prosaas-call-comple... (attempt 1)
prosaas-backend  | âœ… [WEBHOOK] Call completed webhook queued: phone=+972549750505, city=×¨××œ×”, service=×× ×¢×•×œ×Ÿ
prosaas-backend  | [WEBHOOK] ğŸ”€ Following redirect to: https://prosaas.pro/n8n/webhook/prosaas-call-completed
prosaas-backend  | [WEBHOOK] Sending call.completed to https://prosaas.pro/n8n/webhook/prosaas-call-compl... (attempt 2)
prosaas-backend  | [WEBHOOK] âœ… Success: call.completed sent to webhook (status 200)
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=14) retry #30
prosaas-backend  | âš ï¸ [BUILD 178] Max hangup retries exceeded - forcing hangup
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=123) retry #10
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=123) retry #20
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=123) retry #30
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=10, role=owner, business_id=10, computed_tenant=10, impersonating=False
prosaas-backend  | ğŸ”” /api/notifications - tenant_id=10, g.tenant=10
prosaas-backend  | ğŸ”” Querying reminders for tenant_id=10, is_system_admin=False
prosaas-backend  | âš ï¸ [BUILD 178] Max h