s_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=17, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ” LOGIN SUCCESS: user_id=9, email=freezeb123@gmail.com, role=owner, business_id=1
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 7468 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ×‘×›×™×£ ×©×™, ×”×ª×•×¨ × ×§×‘×¢. × ×©××— ×œ×¨××•×ª ××•×ª×š ××¦×œ× ×• ×‘××¡×¤×¨×ª ×”×’×œ×‘×•×¢! ×ª×•×“×” ×•×œ×”×ª×¨××•×ª.
prosaas-backend  | â­ï¸ [LOOP GUARD] Skipped - appointment flow (has_appointment=None, is_scheduling=True)
prosaas-backend  | ğŸ’° [COST] AI utterance: 1.47s (159 chunks)
prosaas-backend  | âš ï¸ [GUARD] AI said '×‘×›×™×£ ×©×™, ×”×ª×•×¨ × ×§×‘×¢. × ×©××— ×œ×¨××•×ª ××•×ª×š ××¦×œ× ×• ×‘××¡×¤×¨×ª ×”×’×œ×‘×•×¢! ×ª×•×“×” ×•×œ×”×ª×¨××•×ª.' WITHOUT server approval!
prosaas-backend  | ğŸ›¡ï¸ [GUARD] Sending immediate correction to AI...
prosaas-backend  | [GOODBYE CHECK] Clear goodbye detected: '×‘×›×™×£ ×©×™, ×”×ª×•×¨ × ×§×‘×¢. × ×©××— ×œ×¨××•×ª...'
prosaas-backend  | âœ… [HANGUP] User confirmed all details - disconnecting
prosaas-backend  | ğŸ“ [STATE] Transitioning ACTIVE â†’ CLOSING (reason: user_verified)
prosaas-backend  | ğŸ“ [BUILD 163] Pending hangup set - will disconnect after audio finishes playing
prosaas-backend  | ğŸ”‡ [SERVER_EVENT] Sent SILENTLY to AI: âš ï¸ ×ª×™×§×•×Ÿ: ×”×ª×•×¨ ×¢×“×™×™×Ÿ ×œ× ××•×©×¨ ×¢×œ ×™×“×™ ×”××¢×¨×›×ª! ××œ ×ª××©×¨ ×¢×“ ×©×ª×§×‘×œ ×”×•×“×¢×” ×©×”×ª×•×¨ × ×§×‘×¢
prosaas-backend  | ğŸ¯ [SERVER_EVENT] Triggered response.create (lock will be cleared by response.created)
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 297 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | INFO:     172.18.0.6:54118 - "POST /api/auth/login HTTP/1.1" 200 OK
prosaas-backend  | INFO:     172.18.0.6:54130 - "GET /api/notifications HTTP/1.1" 401 Unauthorized
prosaas-backend  | INFO:     172.18.0.6:54134 - "GET /api/notifications HTTP/1.1" 401 Unauthorized
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | INFO:     172.18.0.6:54146 - "GET /api/auth/csrf HTTP/1.1" 200 OK
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CitBdRNIq9Ury5C...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CitBdRNIq9Ury5C... status=in_progress modalities=['audio', 'text'] output_format=g711_ulaw
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=9, role=owner, business_id=1, computed_tenant=1, impersonating=False
prosaas-backend  | ğŸ”” /api/notifications - tenant_id=1, g.tenant=1
prosaas-backend  | ğŸ”” Querying reminders for tenant_id=1, is_system_admin=False
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=9, voice_frames=0
prosaas-backend  | 
prosaas-backend  | ============================================================
prosaas-backend  | ğŸ” [NLP RESULT] GPT-4o-mini extraction complete
prosaas-backend  | ============================================================
prosaas-backend  | ğŸ“„ [NLP RESULT] Raw response: {"action":"none","date":"2025-12-08","time":"14:00","name":"×©×™","confidence":1.0}
prosaas-backend  | ğŸ“Š [NLP RESULT] Parsed values:
prosaas-backend  | ğŸ“Š [NLP RESULT]   - action: none
prosaas-backend  | ğŸ“Š [NLP RESULT]   - date: 2025-12-08
prosaas-backend  | ğŸ“Š [NLP RESULT]   - time: 14:00
prosaas-backend  | ğŸ“Š [NLP RESULT]   - name: ×©×™
prosaas-backend  | ğŸ“Š [NLP RESULT]   - confidence: 1.0
prosaas-backend  | ============================================================
prosaas-backend  | 
prosaas-backend  | ğŸ” [NLP] â—€ï¸ NLP result: {'action': 'none', 'date': '2025-12-08', 'time': '14:00', 'name': '×©×™', 'confidence': 1.0}
prosaas-backend  | ğŸ“­ [NLP] No appointment action detected (action=none)
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 2900 frames (rms=8, reason=noise)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] AI started speaking (audio.delta)
prosaas-backend  | âš ï¸ [AUDIO GAP] 622ms gap between chunks #159 and #160 - OpenAI delay!
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 322 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”” Found 1 reminders
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | INFO:     172.18.0.6:54148 - "GET /api/notifications HTTP/1.1" 200 OK
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=9, role=owner, business_id=1, computed_tenant=1, impersonating=False
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 6936 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 542 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ×¨×’×¢, ×× ×™ ×¨×•××” ×©×”×ª×•×¨ ×¢×“×™×™×Ÿ ×œ× ××•×©×¨ ×‘××¢×¨×›×ª. ×× ×™ ×‘×•×“×§×ª ×©×•×‘. ×©× ×™×™×” ×‘×¡×‘×œ× ×•×ª.
prosaas-backend  | â­ï¸ [LOOP GUARD] Skipped - call is ending (closing=True, hangup=False)
prosaas-backend  | ğŸ’° [COST] AI utterance: 1.38s (186 chunks)
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '×¨×’×¢, ×× ×™ ×¨×•××” ×©×”×ª×•×¨ ×¢×“×™×™×Ÿ ×œ× ×...'
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (800ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 542 frames...
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 541 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 3000 frames (rms=8, reason=noise)
prosaas-backend  | INFO:     172.18.0.6:54162 - "GET /api/dashboard/stats?time_filter=today HTTP/1.1" 200 OK
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=9, role=owner, business_id=1, computed_tenant=1, impersonating=False
prosaas-backend  | INFO:     172.18.0.6:54174 - "GET /api/admin/businesses?pageSize=1 HTTP/1.1" 403 Forbidden
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=9, role=owner, business_id=1, computed_tenant=1, impersonating=False
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 492 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 492 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 491 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | INFO:     172.18.0.6:54184 - "GET /api/dashboard/activity?time_filter=today HTTP/1.1" 200 OK
prosaas-backend  | INFO:     172.18.0.6:54188 - "GET /api/auth/csrf HTTP/1.1" 200 OK
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 441 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 441 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 440 frames...
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=9, role=owner, business_id=1, computed_tenant=1, impersonating=False
prosaas-backend  | INFO:     172.18.0.6:54198 - "GET /api/admin/businesses?pageSize=1 HTTP/1.1" 403 Forbidden
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 3100 frames (rms=8, reason=noise)
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 391 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 391 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 390 frames...
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=138.0 > threshold=109.5
prosaas-backend  | ğŸ’“ WS_KEEPALIVE #6 (prevents 5min timeout)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=136, voice_frames=0
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 340 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 340 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 339 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 3200 frames (rms=8, reason=noise)
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 289 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 289 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 288 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 239 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 239 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 238 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 3300 frames (rms=8, reason=noise)
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 188 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 188 frames...
prosaas-backend  | INFO:     127.0.0.1:38878 - "GET /health HTTP/1.1" 200 OK
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 187 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 137 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 137 frames...
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 3400 frames (rms=8, reason=noise)
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 86 frames...
prosaas-backend  | â³ [POLITE HANGUP] TX queue still has 86 frames...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=13, voice_frames=0
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | ğŸ›¡ï¸ [PROTECTION] Waiting for audio (ai=False, oai_q=0, tx_q=36) retry #0
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”‡ [AUDIO GATE] Blocked 3500 frames (rms=14, reason=noise)
prosaas-backend  | ğŸ“ [SMART HANGUP] === CALL ENDING ===
prosaas-backend  | ğŸ“ [SMART HANGUP] Reason: AI finished speaking politely
prosaas-backend  | ğŸ“ [SMART HANGUP] Lead captured: False
prosaas-backend  | ğŸ“ [SMART HANGUP] Goodbye detected: True
prosaas-backend  | ğŸ“ [SMART HANGUP] Lead state: {'preferred_time': '×‘×™×•× ×©× ×™ ×‘×©×¢×” ×©×ª×™×™×. ×¨×’×¢ ××—×“.'}
prosaas-backend  | ğŸ“ [SMART HANGUP] Required fields: ['preferred_time', 'name']
prosaas-backend  | ğŸ“ [SMART HANGUP] ===================
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | âœ… [BUILD 163] Call CA3547fd... hung up successfully: AI finished speaking politely
prosaas-backend  | WS_STOP sid=MZ92680cb2c94934af0db275640e6895f9 rx=4512 tx=2807
prosaas-backend  | ğŸ“ [SES-ca7b72ab] CALL ENDED - duration=90.1s, business_id=1, rx=4512, tx=2807
prosaas-backend  | ğŸ“¤ [REALTIME] Audio sender ended
prosaas-backend  | ğŸ“ [REALTIME] Text sender ended
prosaas-backend  | STREAM_ENDED call=CA3547fdfdb5d169354c51b382ee4c37bd stream=N/A status=N/A
prosaas-backend  | INFO:     172.18.0.6:39864 - "POST /webhook/stream_ended HTTP/1.1" 204 No Content
prosaas-backend  | INFO:     172.18.0.6:39878 - "POST /webhook/call_status HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Found existing recording for CA3547fdfdb5d169354c51b382ee4c37bd: /2010-04-01/Accounts/ACcd09431f076a309088b18ed1f286f32e/Recordings/REc21c4c4171fe7e4f4170c5188dcddbbb.json
prosaas-backend  | ğŸ§¹ Waiting for 5 background threads...
prosaas-backend  | âœ… Recording queued for processing: CA3547fdfdb5d169354c51b382ee4c37bd
prosaas-backend  | INFO:     connection closed
prosaas-backend  | âš ï¸ Background thread 0 still running after timeout
prosaas-backend  | âš ï¸ Background thread 4 still running after timeout
prosaas-backend  | âœ… All background threads cleanup complete
prosaas-backend  | WS_DONE sid=MZ92680cb2c94934af0db275640e6895f9 rx=4512 tx=2807
prosaas-backend  | âœ… CALL FINALIZED: CA3547fdfdb5d169354c51b382ee4c37bd
prosaas-backend  | ğŸ“ Summary: ### ×¡×•×’ ×”×¤× ×™×™×” ×•×”×ª×—×•×:
prosaas-backend  | ×”×¤× ×™×™×” ×”×™× ×‘×ª×—×•× ×”× ×“×œ"×Ÿ ×•×ª×™×•×•×š, ×›××©×¨ ×”×œ×§×•×— ××¢×•× ×™×™×Ÿ ×œ×§×‘×•×¢ ×¤×’×™×©×” ×¢× ×¡×•×›×Ÿ × ×“×œ"×Ÿ ×‘×©× ×“× ×™.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™× ×¡×¤×¦×™×¤×™×™×:
prosaas-backend  | - **×ª××¨×™×š ×”×¤×’×™×©×”**: 8 ×‘×“×¦××‘×¨
prosaas-backend  | - **×©×¢×”**: 14:00
prosaas-backend  | - **×¡×•×›×Ÿ**: ×“× ×™
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™ ×”×œ×§×•×—:
prosaas-backend  | - **×©×**: ×©×™
prosaas-backend  | - **×××¦×¢×™ ×”×ª×§×©×¨×•×ª**: ×œ× × ××¡×¨×• ×‘×©×™×—×”.
prosaas-backend  | 
prosaas-backend  | ### ×¡×˜×˜×•×¡ ×•××¢×§×‘:
prosaas-backend  | - **×¤×’×™×©×”**: × ×§×‘×¢×” ×¢× ×“× ×™ ×‘×™×•× ×©× ×™, 8 ×‘×“×¦××‘×¨ ×‘×©×¢×” 14:00.
prosaas-backend  | - **×“×—×™×¤×•×ª**: ×’×‘×•×”×”, ×”×œ×§×•×— ××¢×•× ×™×™×Ÿ ×‘×ª×•×¨ ×§×¨×•×‘.
prosaas-backend  | - **×¤×¢×•×œ×•×ª × ×“×¨×©×•×ª**: ×™×© ×œ××©×¨ ××ª ×”×ª×•×¨ ×‘××¢×¨×›×ª.
prosaas-backend  | 
prosaas-backend  | ### ×”×¢×¨×•×ª ×—×©×•×‘×•×ª:
prosaas-backend  | ×™×© ×œ×•×•×“× ×©×”×ª×•×¨ ××•×©×¨ ×‘××¢×¨×›×ª ×œ×¤× ×™ ×”×¤×’×™×©×”. ××•××œ×¥ ×œ×”×›×™×Ÿ ××ª ×“× ×™ ×¢× ××™×“×¢ ×¨×œ×•×•× ×˜×™ ×¢×œ ×”×œ×§×•×—, ×‘××™×“×” ×•×™×© ×œ×• ×¦×¨×›×™× ××• ×©××œ×•×ª ×¡×¤×¦×™×¤×™×•×ª ×‘×ª×—×•× ×”× ×“×œ"×Ÿ.
prosaas-backend  | ğŸ¯ Intent: interested
prosaas-backend  | ğŸ“Š Next Action: ×©×œ×™×—×ª ×¤×¨×˜×™× × ×•×¡×¤×™×
prosaas-backend  | â„¹ï¸ Appointment handling: Managed by Agent during call (BUILD 119)
prosaas-backend  | ğŸ“± [WEBHOOK] Phone extraction debug:
prosaas-backend  |    - self.phone_number: None
prosaas-backend  |    - self.customer_phone_dtmf: NOT_SET
prosaas-backend  |    - call_log.from_number: +972504294724
prosaas-backend  |    - crm_context.customer_phone: NO_CRM
prosaas-backend  |    âœ“ Using CallLog from_number: +972504294724
prosaas-backend  | ğŸ“‹ [WEBHOOK] Lead capture state: {'preferred_time': '×‘×™×•× ×©× ×™ ×‘×©×¢×” ×©×ª×™×™×. ×¨×’×¢ ××—×“.'}
prosaas-backend  | [WEBHOOK] ğŸ“¦ Payload built: call_id=CA3547fdfdb5d169354c51b382ee4c37bd, phone=+972504294724, city=N/A, service_category=N/A
prosaas-backend  | [WEBHOOK] Sending call.completed to http... (attempt 1)
prosaas-backend  | âœ… [WEBHOOK] Call completed webhook queued: phone=+972504294724, city=N/A, service=N/A
prosaas-backend  | [WEBHOOK] âŒ Request error on attempt 1: Invalid URL 'http': No scheme supplied. Perhaps you meant https://http?
prosaas-backend  | [WEBHOOK] Retrying in 1s...
prosaas-backend  | [WEBHOOK] Sending call.completed to http... (attempt 2)
prosaas-backend  | [WEBHOOK] âŒ Request error on attempt 2: Invalid URL 'http': No scheme supplied. Perhaps you meant https://http?
prosaas-backend  | [WEBHOOK] Retrying in 3s...
prosaas-backend  | [WEBHOOK] Sending call.completed to http... (attempt 3)
prosaas-backend  | [WEBHOOK] âŒ Request error on attempt 3: Invalid URL 'http': No scheme supplied. Perhaps you meant https://http?
prosaas-backend  | [WEBHOOK] âŒ Failed after 3 attempts
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=9, role=owner, business_id=1, computed_tenant=1, impersonating=False
prosaas-backend  | ğŸ”” /api/notifications - tenant_id=1, g.tenant=1
prosaas-backend  | ğŸ”” Querying reminders for tenant_id=1, is_system_admin=False
prosaas-backend  | ğŸ”” Found 1 reminders