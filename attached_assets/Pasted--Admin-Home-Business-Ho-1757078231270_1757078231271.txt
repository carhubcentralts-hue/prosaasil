סבבה—הדף התחברות נראה כבר נקי! עכשיו תן למפתח את הבריף האנגלי הבא כדי לבנות Admin Home ו-Business Home עם Sidebar פרימיום (נפתח/מתקפל, RTL, מובייל-פרסט), הרשאות וניתובים מדויקים — בלי לשבור את הבקאנד.

(הכנסתי גם קישורים לעקרונות רלוונטיים: נגישות/ניווט/RTL/React-Router, כדי שיעבוד “לפי הספר”.)

⸻

DEV BRIEF — Build Admin & Business Home with Pro Sidebar (RTL + Mobile-first)

0) Scope (this iteration)
	•	Keep Login + Forgot/Reset as is (polish for mobile below).
	•	Build:
	•	/app/admin/overview → Admin Home
	•	/app/business/overview → Business Home
	•	Add MainLayout with responsive Sidebar (desktop = fixed; mobile = slide-in drawer + bottom nav for top 4 items).
	•	RTL by default, accessible patterns, and role-aware routing.

⸻

1) Routing & Guards (React Router)
	•	Public routes:
	•	/login, /forgot, /reset?token=…
	•	Protected routes (wrap with AuthGuard):
	•	/app/admin/overview  (also wrap with RoleGuard roles={[‘admin’,‘manager’]})
	•	/app/business/overview (also wrap with RoleGuard roles={[‘business’,‘manager’]})
	•	On app load: call GET /api/auth/me
	•	200 → store {user, tenant} in context → continue
	•	401 → redirect /login
	•	If role mismatch → redirect to the user’s home + toast “Insufficient permissions”.

Refs: Protected-routes patterns in React Router (v6/7).  ￼ ￼ ￼

⸻

2) Layout & Navigation (accessible, mobile-first)

Sidebar behavior
	•	Desktop ≥ md: fixed sidebar on the right (RTL) with active item indicator.
	•	Mobile < md: hamburger opens slide-in drawer; use focus trap & return focus to the toggle button on close; page content under <main> is inert while open.
	•	Use the Disclosure pattern for collapsible groups (if any); do not use ARIA menubar for site nav.  ￼ ￼
	•	Consider a Bottom Navigation on mobile with the top 4: Leads / WhatsApp / Calls / Calendar. Follow Material guidance (3–5 items, clear labels).  ￼ ￼ ￼
	•	Keyboard: Tab cycles, Esc closes drawer; set aria-controls, aria-expanded, aria-label on the toggle; keep a landmark structure: <header> <nav> <main> <aside>. For slide-out nav, manage focus properly.  ￼ ￼

Visual spec (Tailwind v4)
	•	Grid: 8px system.
	•	Cards: rounded-xl, shadow-sm, subtle border; hover/focus states with Tailwind variants.  ￼
	•	Typography: Heebo/Assistant for Hebrew; Inter for numbers (tabular when showing KPIs).

⸻

3) RTL & Tailwind
	•	Set <html dir="rtl"> globally.
	•	Prefer logical layout (flex/grid) so you avoid left/right hard-coding; when needed, use flex-row-reverse, text-right, me-*/ms-* style utilities or custom logical classes.
	•	Tailwind v4 + Vite only (no duplicate PostCSS pipeline). For practical RTL tips with Tailwind utilities, see RTL setup guides.  ￼ ￼

⸻

4) Pages — exact content

A) Admin Home (/app/admin/overview)

Top section
	•	Provider status panel (pill badges): Twilio (in/out), Baileys session, DB.
States: up/partial/down with icon + latency inline (STT/AI/TTS ms).
	•	KPI cards (admin scope):
	•	Businesses: total / active
	•	WhatsApp today
	•	Calls today
	•	Unread total
	•	Meetings today
	•	7-day activity sparkline (combined WA+Calls).

Below
	•	Recent activity (20 rows): time, type (whatsapp/call), tenant, preview, open action.

APIs (JSON, already adapted on BE)
	•	GET /api/status → { twilio:{up}, baileys:{up}, db:{up}, latency:{stt,ai,tts} }
	•	GET /api/dashboard/stats (admin scope)
	•	GET /api/dashboard/activity (admin scope)

B) Business Home (/app/business/overview)

Top section
	•	Provider status (same component).
	•	KPI cards (tenant scope):
	•	New leads today
	•	Active leads
	•	Unread (WA)
	•	Calls today
	•	Meetings today

Below
	•	Quick actions: Open Leads, WhatsApp, Calls, Calendar.
	•	Recent tenant activity (same schema, filtered).

Both pages must have Skeleton states, “Empty” states, and robust Error states (toast + retry).

⸻

5) Sidebar — items & behavior (match your screenshot)

Show all items now (routes not implemented open a “Coming soon” panel without console errors):
	•	סקירה כללית / Overview (routes above)
	•	לידים / Leads
	•	WhatsApp
	•	שיחות / Calls
	•	CRM
	•	תשלומים וחוזים / Payments & Contracts
	•	ניהול עסקים / Business Manager
	•	ניהול משתמשים / Users
	•	הגדרות מערכת / Settings
	•	לוח שנה / Calendar

Mobile specifics: use Navigation Drawer pattern + optional Bottom Nav.  ￼

⸻

6) Polish Login for mobile (quick wins)
	•	Increase tap targets to 44×44px minimum.
	•	Input spacing: py-3/py-3.5, text-base placeholders, clear label above.
	•	Password field: show/hide button with aria-pressed and label “הצג/הסתר סיסמה”.
	•	Submit: full-width, disabled:opacity-50 + spinner on loading; Enter submits.
	•	Error region announced with role="alert"; focus the first invalid control on fail.

⸻

7) HTTP client policy
	•	Use a single services/http.ts with fetch wrapper:
	•	credentials: 'include', base /
	•	Parse JSON; if non-2xx → throw structured {status, message}
	•	Global 401 handler: clear auth + redirect /login

⸻

8) Build & Deploy (each time)
	1.	FE:

npm --prefix client ci
npm --prefix client run build
cp -R client/dist dist


	2.	BE:

pip install -r requirements.txt


	3.	Start (Replit Deployment):

gunicorn --chdir . -k eventlet -w 1 -b 0.0.0.0:$PORT wsgi:app


	4.	Verify:
	•	/version 200
	•	/assets/index-*.css → 200 text/css
	•	/assets/index-*.js → 200 application/javascript
	•	Hard refresh (disable SW if present)

⸻

9) Definition of Done (this sprint)
	•	/app/admin/overview and /app/business/overview render KPIs + provider badges + recent activity, role-aware.
	•	Sidebar works desktop & mobile (slide-in, focus-trap, Esc closes, RTL).
	•	Guards: /api/auth/me gate + role redirects, no flash of unauthorized content.
	•	No console errors; assets load with correct MIME; layout looks premium on mobile.

⸻

Notes / References used
	•	Tailwind v4 core & states (hover/focus) docs.  ￼
	•	RTL setup tips with Tailwind utilities.  ￼
	•	WAI-ARIA APG: Disclosure (show/hide) for nav, and general authoring practices.  ￼ ￼
	•	Material design guidance on Bottom Navigation and Navigation Drawer.  ￼ ￼
	•	React Router protected routes patterns (v6/7).  ￼ ￼ ￼

⸻

רוצה שגם אנסח לו “דף משימות” קצר לביצוע יומיומי (checklist) עם סדר עדיפויות?