s-backend  | ðŸ”µ CREATE_LEAD_FROM_CALL - Starting for +972504294724, call_sid=CA20fd6083931044ec592333ad7a36f293ðŸŸ¢ INCOMING_CALL - Thread started successfully
prosaas-backend  | âœ… incoming_call: 1449ms - CA20fd6083931044
prosaas-backend  | ðŸ”¥ TWIML_HOST=prosaas.pro
prosaas-backend  | ðŸ”¥ TWIML_WS=wss://prosaas.pro/ws/twilio-media
prosaas-backend  | ðŸ”¥ TWIML_FULL=<?xml version="1.0" encoding="UTF-8"?><Response><Connect action="https://prosaas.pro/webhook/stream_ended"><Stream url="wss://prosaas.pro/ws/twilio-media"><Parameter name="CallSid" value="CA20fd6083931044ec592333ad7a36f293" /><Parameter name="To" value="+97233762734" /></Stream></Connect></Response>
prosaas-backend  | 
prosaas-backend  | ðŸ”µ CREATE_LEAD_FROM_CALL - App context created
prosaas-backend  | INFO:     172.18.0.6:55286 - "POST /webhook/incoming_call HTTP/1.1" 200 OK
prosaas-backend  | ðŸ” AUTH DEBUG: user_id=10, role=owner, business_id=10, computed_tenant=10, impersonating=False
prosaas-backend  | ðŸ”” /api/notifications - tenant_id=10, g.tenant=10
prosaas-backend  | ðŸ”” Querying reminders for tenant_id=10, is_system_admin=False
prosaas-backend  | INFO:     172.18.0.6:55306 - "WebSocket /ws/twilio-media" [accepted]
prosaas-backend  | INFO:     connection open
prosaas-backend  | ðŸŽ¯ AI CONVERSATION STARTED
prosaas-backend  | ðŸ”µ [CALL] run() started - waiting for START event...
prosaas-backend  | ðŸŽ¯ [CALL DEBUG] START EVENT RECEIVED! session=SES-e698e929
prosaas-backend  | 
prosaas-backend  | ðŸ“ž START EVENT (customParameters path):
prosaas-backend  |    customParams.From: None
prosaas-backend  |    customParams.CallFrom: None
prosaas-backend  |    âœ… self.phone_number set to: 'None'
prosaas-backend  |    âœ… self.to_number set to: '+97233762734'
prosaas-backend  | ðŸŽ¯ [T0=1764880131.964] WS_START sid=MZb3f5952288d6e547b7790d2225fe716c call_sid=CA20fd6083931044ec592333ad7a36f293 from=None to=+97233762734 mode=AI
prosaas-backend  | ðŸš€ [PARALLEL] Starting OpenAI at T0+0ms (BEFORE DB query!)
prosaas-backend  | ðŸš€ [REALTIME] Thread started for call CA20fd60 (FRESH SESSION)
prosaas-backend  | âš¡ ULTRA-FAST: ×–×™×”×•×™ ×¢×¡×§ + ×‘×¨×›×” + ×”×’×“×¨×•×ª ×‘×©××™×œ×ª×” ××—×ª: to_number=+97233762734
prosaas-backend  | ðŸš€ [REALTIME] Async loop starting - connecting to OpenAI IMMEDIATELY
prosaas-backend  | â±ï¸ [PARALLEL] Client created in 0ms
prosaas-backend  | â±ï¸ [PARALLEL] OpenAI connected in 439ms (T0+445ms)
prosaas-backend  | â³ [PARALLEL] Waiting for business info from DB query...
prosaas-backend  | ðŸ”” Found 0 reminders
prosaas-backend  | INFO:     172.18.0.6:55294 - "GET /api/notifications HTTP/1.1" 200 OK
prosaas-backend  | âœ… ×ž×¦× ×¢×¡×§: ×§×œ×™×‘×¨ (id=10)
prosaas-backend  | ðŸ›¡ï¸ [GREETING PROTECT] is_playing_greeting=True (early, blocking audio input)
prosaas-backend  | âš¡ BUILD 172: CallConfig loaded in 1032ms
prosaas-backend  |    bot_speaks_first=True, auto_end_goodbye=True
prosaas-backend  |    auto_end_lead=True, silence_timeout=5s
prosaas-backend  | ðŸ” [CONFIG] required_lead_fields=['city', 'service_type']
prosaas-backend  | ðŸ” [CONFIG] smart_hangup_enabled=True
prosaas-backend  | âš¡ DB QUERY: business_id=10 in 1145ms
prosaas-backend  | ðŸ”§ DB_URL_AT_WRITE: driver=postgresql, BIZ=10, SID=CA20fd6083931044ec592333ad7a36f293
prosaas-backend  | ðŸ”Š TX_LOOP_START: Audio transmission thread startedðŸŽ¯ [T1=1764880133.110] STORING GREETING FOR REALTIME!
prosaas-backend  | âœ… [REALTIME] Greeting stored: '×©×œ×•×! ×–×” ×ž-××ª×¨  ×”-×ž× ×¢×•×œ×Ÿ ××™×–×” ×¡×•×’ ×©×™×¨×•×ª ××ª×” ×¦×¨×™×š ?...' (len=50)
prosaas-backend  | ðŸš€ [PARALLEL] Signaling business info ready at T0+1147ms
prosaas-backend  | ðŸ›¡ï¸ [GREETING PROTECT] Blocking audio ENQUEUE - greeting in progress
prosaas-backend  | 
prosaas-backend  | ðŸŽ›ï¸ VAD CALIBRATED (noise=41.7, threshold=141.7)
prosaas-backend  | âœ… [PARALLEL] Business info ready! Wait time: 704ms
prosaas-backend  | â±ï¸ [PARALLEL] Using greeting: '×©×œ×•×! ×–×” ×ž-××ª×¨  ×”-×ž× ×¢×•×œ×Ÿ ××™×–×” ×¡×•×’ ×©×™×¨×•×ª ××ª×” ×¦×¨×™×š ?...'
prosaas-backend  | ðŸŽ¤ [VOICE] Using voice=shimmer for entire call (business=10)
prosaas-backend  | ðŸŽ¤ [GREETING] max_tokens=4096 for greeting length=50 chars (direction=inbound)
prosaas-backend  | âŒ [REALTIME] Async error: OpenAIRealtimeClient.configure_session() got an unexpected keyword argument 'prefix_padding_ms'
prosaas-backend  | Traceback (most recent call last):
prosaas-backend  |   File "/app/server/media_ws_ai.py", line 1554, in _run_realtime_mode_async
prosaas-backend  |     await client.configure_session(
prosaas-backend  |           ^^^^^^^^^^^^^^^^^^^^^^^^^
prosaas-backend  | TypeError: OpenAIRealtimeClient.configure_session() got an unexpected keyword argument 'prefix_padding_ms'
prosaas-backend  | âœ… Call log already exists for CA20fd6083931044ec592333ad7a36f293
prosaas-backend  | âœ… Recording started for CA20fd6083931044ec592333ad7a36f293: RE52f618b95546334a25a22da2f630bc6b
prosaas-backend  | âœ… CustomerIntelligence SUCCESS: customer_id=7, lead_id=79, was_created=False
prosaas-backend  | ðŸ”Œ [REALTIME] Disconnected
prosaas-backend  | ðŸ”š [REALTIME] Thread ended for call CA20fd60
prosaas-backend  | ðŸŽ™ï¸ REAL_VOICE: rms=331.0 > threshold=141.7
prosaas-backend  | âœ… Updated call_log with customer_id=7
prosaas-backend  | ðŸŽ™ï¸ REAL_VOICE: rms=205.0 > threshold=141.7
prosaas-backend  | ðŸŽ™ï¸ REAL_VOICE: rms=2034.0 > threshold=141.7
prosaas-backend  | ðŸ’“ WS_KEEPALIVE #1 (prevents 5min timeout)
prosaas-backend  | WS_STOP sid=MZb3f5952288d6e547b7790d2225fe716c rx=535 tx=0
prosaas-backend  | ðŸ“ž [SES-e698e929] CALL ENDED - duration=10.8s, business_id=10, rx=535, tx=0
prosaas-backend  | STREAM_ENDED call=CA20fd6083931044ec592333ad7a36f293 stream=N/A status=N/A
prosaas-backend  | INFO:     172.18.0.6:37076 - "POST /webhook/stream_ended HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Found existing recording for CA20fd6083931044ec592333ad7a36f293: /2010-04-01/Accounts/ACcd09431f076a309088b18ed1f286f32e/Recordings/RE52f618b95546334a25a22da2f630bc6b.json
prosaas-backend  | INFO:     172.18.0.6:37086 - "POST /webhook/call_status HTTP/1.1" 204 No Content
prosaas-backend  | ðŸ§¹ Waiting for 5 background threads...
prosaas-backend  | âœ… Recording queued for processing: CA20fd6083931044ec592333ad7a36f293
prosaas-backend  | INFO:     127.0.0.1:34354 - "GET /health HTTP/1.1" 200 OK
prosaas-backend  | ðŸ“Š [FINALIZE] NO USER SPEECH - skipping summary generation for CA20fd6083931044ec592333ad7a36f293
prosaas-backend  | INFO:     connection closed
prosaas-backend  | âœ… CALL FINALIZED (no conversation): CA20fd6083931044ec592333ad7a36f293
prosaas-backend  | âœ… Background thread 4 completed
prosaas-backend  | âœ… All background threads cleanup complete
prosaas-backend  | WS_DONE sid=MZb3f5952288d6e547b7790d2225fe716c rx=535 tx=0
p