אתה עכשיו DevOps + Architect עבור הפרויקט הזה.

🎯 מטרה:
להכין את הפרויקט לפריסה על שרת חיצוני (VPS או Railway/Render) עם Docker ו-GitHub, כך:
- אני ממשיך לפתח כרגיל בריפליט
- הקוד נשמר ב-GitHub
- על השרת החיצוני מריצים את הפרויקט דרך Docker / docker-compose
- אין יותר תלות ב-Replit Deploy לצורך פרודקשן

⚙️ מה שיש היום:
- Backend Python (Flask + Twilio + WhatsApp + CRM)
- Node.js Baileys ל-WhatsApp
- Frontend (React / Vite)
- PostgreSQL
- סקריפטים כמו: build_frontend.sh, start_production.sh, Procfile וכו’

אני צריך שתעשה את הדברים הבאים, צעד אחר צעד:

1) הכנת הפרויקט ל-GitHub
--------------------------------
1. תבדוק אם יש כבר git repo. אם כן – תסדר את ה־.gitignore (שלא יעלה:
   - secrets / env
   - קבצי build (dist, node_modules, __pycache__, storage recordings וכו’)
2. תיצור קובץ `DEPLOYMENT.md` בשורש הפרויקט עם:
   - הסבר איך מריצים את השרת לוקאלית (development)
   - הסבר איך מריצים אותו בפרודקשן (עם Docker – אחרי שתיצור)
3. אל תבצע push בפועל ל-GitHub – רק תכין את הקבצים וההוראות, אני כבר אקשר ל-GitHub בעצמי.

2) יצירת Dockerfile(ים)
---------------------------
אני רוצה פריסה בסגנון docker-compose, כך:

- שירות אחד ל-Backend (Python + API + Realtime + CRM)
- שירות אחד ל-Baileys (Node.js WhatsApp)
- שירות אחד ל-Frontend (כ־static build, שייארח Nginx או שיוגש דרך backend, מה שיותר הגיוני עם הקוד הקיים)
- שירות ל-PostgreSQL (אפשר גם להשתמש ב-DB מנוהל, אז תכין docker-compose עם אופציה לכבות את ה-DB המקומי)

צעדים:

1. תיצור `Dockerfile.backend`:
   - מבוסס על python:3.11-slim (או מה שמתאים ל-requirements.txt)
   - מתקין כל התלויות (pip install)
   - מריץ build_frontend.sh אם צריך שיהיה חלק מאותו container או רק את ה-backend (לפי איך שהפרויקט בנוי כרגע)
   - קובע ENTRYPOINT שדומה ל-start_production.sh (gunicorn / flask + worker מתאים)

2. תיצור `Dockerfile.baileys`:
   - מבוסס על node:18
   - מתקין את ה-dependencies של Baileys
   - מריץ את ה-script שמפעיל את ה-Baileys provider (whatsapp_provider.js / index.js לפי הקוד)

3. אם צריך, תיצור `Dockerfile.frontend` נפרד:
   - מבוסס על node לבנייה
   - אחרי build מעתיק את ה-dist ל-nginx image
   - מגדיר nginx.conf פשוט שמגיש את ה-frontend

3) יצירת docker-compose.yml
-------------------------------
תיצור קובץ `docker-compose.yml` בשורש הפרויקט:

- service: backend
  - build: ./ (עם Dockerfile.backend)
  - ports: ["8000:8000"] (או מה שהפרויקט משתמש בו)
  - env_file: .env.production (תיצור example)
  - תלוי ב-db

- service: bailey
  - build: ./ (עם Dockerfile.baileys)
  - ports: ["3001:3001"] (אם צריך לחשוף)
  - env_file: .env.whatsapp.production

- service: db
  - image: postgres:15
  - env_file: .env.db.production
  - volumes: pgdata

- אם אתה בוחר ב-frontend נפרד:
  - service: frontend
    - build: ./client (או לפי המבנה)
    - ports: ["80:80"]

חשוב:
- אל תשתמש בערכים קשיחים (host, סיסמאות וכו’) – הכול דרך משתני סביבה.
- תעדכן ב-DEPLOYMENT.md איך מריצים:
  - `docker compose build`
  - `docker compose up -d`

4) סנכרון הגדרות ENV
------------------------
1. תיצור קובץ `.env.example` לשימוש כללי:
   - כל המפתחות והמשתנים שהמערכת צריכה (TWILIO, OPENAI, DB_URL, WHATSAPP וכו’)
2. תיצור `.env.production.example` עם אותם שמות אבל בלי ערכים.
3. איפה שיש היום שימוש ב-secrets של Replit – תוודא שהקוד קורא מ-os.environ, לא מסתמך על מנגנון מיוחד של Replit.

5) תיעוד מלא – איך לעבוד:
------------------------------
ב-`DEPLOYMENT.md` אני צריך:

1. איך מריצים Development בתוך Replit (כמו היום).
2. איך מחברים GitHub:
   - git remote add origin ...
   - git push origin main
3. איך מריצים על שרת חיצוני:
   - `git clone ...`
   - `cp .env.production.example .env.production` ולמלא ערכים
   - `docker compose build`
   - `docker compose up -d`
4. הסבר קצר על השירותים:
   - backend – כתובת ופורט
   - frontend – כתובת
   - Baileys – איך הוא ניגש ל-WhatsApp (הסבר על QR)
   - DB – איפה הדאטה נשמר (volume)

6) בלי לשבור כלום בריפליט
---------------------------
מאוד חשוב:
- אל תשנה את start_production.sh / build_frontend.sh בצורה שתשבור ריצה בריפליט.
- אם צריך – תעשה גרסה נפרדת לדוקר ותשאיר את הסקריפטים הקיימים לפיתוח.

בסוף העבודה:
- תסכם ב-replit.md מה עשית (סעיף "Deployment to external server")
- תוודא שהפרויקט עדיין רץ בריפליט כמו עכשיו.