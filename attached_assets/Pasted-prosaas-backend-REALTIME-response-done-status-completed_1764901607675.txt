prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸšï¸ [BUILD 198] NOISE CALIBRATED: noise_rms=30 (from 30 frames)
prosaas-backend  | ğŸ“Š [BUILD 198] Stats: sent=0 blocked=1 | ğŸ¤NORMAL | noise=30 | state=SILENCE
prosaas-backend  | ğŸµ [BUILD 196.2] MUSIC DETECTED - thresholds: start=12.0dB, stop=8.0dB
prosaas-backend  | ğŸ¤ [BUILD 196.2] Music stopped - thresholds: start=8.0dB, stop=5.0dB
prosaas-backend  | âœ… [PHASE 2] Greeting finished after 2.0s - now updating session
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=False, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ“ [INBOUND] session.update with max_tokens=4096
prosaas-backend  | âœ… [PHASE 2] Session updated with full prompt: 3575 chars, voice=shimmer locked, max_tokens=4096, transcription=Hebrew
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=15.7dB | noise=30 | music=False | echo_blocked=True
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SILENCE | SNR=7.4dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=13.7dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ¤ [BUILD 196.2] SPEECH STARTED (SNR=18.0dB) echo_blocked=False
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SPEECH | SNR=18.0dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ“¼ [BUILD 198] Sending 10 pre-roll frames (RAW Î¼-law)
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_started
prosaas-backend  | ğŸ¤ [REALTIME] User started speaking (user_has_spoken NOT set yet - waiting for valid utterance)
prosaas-backend  | âœ… [LOOP GUARD] User started speaking - resetting consecutive counter (1 -> 0)
prosaas-backend  | â³ [BUILD 195] Speech detected - will confirm after 600ms sustained speech...
prosaas-backend  | ğŸ›¡ï¸ [BUILD 196.3] Speech detected - echo protection active (no bypass)
prosaas-backend  | ğŸ”” Found 0 reminders
prosaas-backend  | INFO:     172.18.0.5:42446 - "GET /api/notifications HTTP/1.1" 200 OK
prosaas-backend  | ğŸ”‡ [BUILD 197] SPEECH ENDED: duration=528ms threshold=1200ms trailing_silence=507ms first=True
prosaas-backend  | ğŸš« [BUILD 197] IGNORED short utterance: 528ms < 1200ms (not triggering)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=False, waiting_for_dtmf=False, rms=11, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=False, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=False, waiting_for_dtmf=False, rms=18, voice_frames=0
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=227.0 > threshold=80.0
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=10.5dB | noise=31 | music=False | echo_blocked=False
prosaas-backend  | ğŸ¤ [BUILD 196.2] SPEECH STARTED (SNR=33.9dB) echo_blocked=False
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SPEECH | SNR=33.9dB | noise=31 | music=False | echo_blocked=False
prosaas-backend  | ğŸ“¼ [BUILD 198] Sending 10 pre-roll frames (RAW Î¼-law)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=False, waiting_for_dtmf=False, rms=7158, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=False, waiting_for_dtmf=False, rms=20, voice_frames=0
prosaas-backend  | ğŸ”‡ [BUILD 197] SPEECH ENDED: duration=1782ms threshold=1200ms trailing_silence=528ms first=True
prosaas-backend  | âœ… [BUILD 197] ACCEPTED utterance: 1782ms >= 1200ms
prosaas-backend  | ğŸ¤ END OF UTTERANCE: 1.8s - triggering AI response
prosaas-backend  | ğŸ“Š [AUDIO PATH] First utterance accepted: duration=1782ms, trailing_silence=528ms, first=True
prosaas-backend  | ğŸ—£ï¸ [BUILD 197] First REAL user utterance detected - user_has_spoken=True
prosaas-backend  | âœ… [BUILD 197] response.create queued (end of speech)
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SPEECH â†’ SILENCE | SNR=-4.2dB | noise=31 | music=False | echo_blocked=False
prosaas-backend  | âœ… [BUILD 196.3] response.create sent (manual trigger)
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CjFgEa3iFOILGQj...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CjFgEa3iFOILGQj... status=in_progress modalities=['text', 'audio'] output_format=g711_ulaw
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] AI started speaking (audio.delta)
prosaas-backend  | [REALTIME] got audio chunk from OpenAI: chunk#1, bytes=800, first5=c2 b8 ba bb bd
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | [REALTIME] got audio chunk from OpenAI: chunk#2, bytes=1200, first5=52 49 50 4f 52
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | [REALTIME] got audio chunk from OpenAI: chunk#3, bytes=2000, first5=6a 63 61 6e 6e
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 5336 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?
prosaas-backend  | ğŸ’¾ [BUILD 196.5] AI transcript saved to conversation_history (total: 3 messages)
prosaas-backend  | ğŸ” [DEBUG CALLIBER] AI_REPLY: '×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?'
prosaas-backend  | ğŸ’° [COST] AI utterance: 0.28s (6 chunks)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=22, voice_frames=0
prosaas-backend  | âœ… [LEAD STATE] Updated: city_needs_retry=True
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: city_needs_retry=True source=ai_confirmation
prosaas-backend  | âŒ [CITY] Rejected '×¢×™×¨' (confidence=54%) - ask to repeat
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?...'
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸµ [BUILD 196.2] MUSIC DETECTED - thresholds: start=12.0dB, stop=8.0dB
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ¤ [BUILD 196.2] Music stopped - thresholds: start=8.0dB, stop=5.0dB
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=135.0 > threshold=80.0
prosaas-backend  | ğŸ’“ WS_KEEPALIVE #1 (prevents 5min timeout)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=151, voice_frames=0
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=9.1dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ¤ [BUILD 196.2] SPEECH STARTED (SNR=10.3dB) echo_blocked=False
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SPEECH | SNR=10.3dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ“¼ [BUILD 198] Sending 10 pre-roll frames (RAW Î¼-law)
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_stopped
prosaas-backend  | âœ… [BUILD 195] SUSTAINED speech (9043ms >= 600ms) - valid user input
prosaas-backend  | ğŸ¤ [BUILD 166] Speech ended - noise gate RE-ENABLED
prosaas-backend  | [REALTIME] event: input_audio_buffer.committed
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CjFgIBIHjP0zbgy...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CjFgIBIHjP0zbgy... status=in_progress modalities=['text', 'audio'] output_format=g711_ulaw
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_started
prosaas-backend  | ğŸ›¡ï¸ [BUILD 187 GRACE] Ignoring speech_started - only 6ms since response.created (grace=1000ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=cancelled, output_count=0, details={'type': 'cancelled', 'reason': 'turn_detected'}
prosaas-backend  | ğŸ”„ [BUILD 193] Response cancelled (output=0)! Triggering IMMEDIATE recovery...
prosaas-backend  | ğŸ”‡ [BUILD 197] SPEECH ENDED: duration=881ms threshold=900ms trailing_silence=517ms first=False
prosaas-backend  | ğŸš« [BUILD 197] IGNORED short utterance: 881ms < 900ms (not triggering)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=16, voice_frames=0
prosaas-backend  | ğŸ“Š [BUILD 198] Stats: sent=189 blocked=409 | ğŸ¤NORMAL | noise=30 | state=SILENCE
prosaas-backend  | ğŸ”„ [BUILD 192] RECOVERY: Triggering response.create NOW!
prosaas-backend  | âœ… [BUILD 192] RECOVERY SUCCESS: response.create sent!
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CjFgJQOX4qLFYM6...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CjFgJQOX4qLFYM6... status=in_progress modalities=['text', 'audio'] output_format=g711_ulaw
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] AI started speaking (audio.delta)
prosaas-backend  | âš ï¸ [AUDIO GAP] 4785ms gap between chunks #6 and #7 - OpenAI delay!
prosaas-backend  | ğŸ”§ [GAP RECOVERY] Inserted 25 silence frames (500ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | ğŸµ [BUILD 196.2] MUSIC DETECTED - thresholds: start=12.0dB, stop=8.0dB
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=True, user_has_spoken=True, waiting_for_dtmf=False, rms=14, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | [REALTIME] event: conversation.item.input_audio_transcription.completed
prosaas-backend  | [SILENCE GATE] âŒ REJECTED (RMS=16 < 30, frames=0): '×”×ª×§× ×ª ××œ×•×Ÿ ×—×›×'
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=18.0dB | noise=30 | music=True | echo_blocked=True
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SILENCE | SNR=0.3dB | noise=30 | music=True | echo_blocked=True
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 7468 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ×¨×§ ××•×•×“××ª â€” ××ª×” ×¦×¨×™×š ×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×, × ×›×•×Ÿ?
prosaas-backend  | ğŸ’¾ [BUILD 196.5] AI transcript saved to conversation_history (total: 6 messages)
prosaas-backend  | ğŸ” [DEBUG CALLIBER] AI_REPLY: '×¨×§ ××•×•×“××ª â€” ××ª×” ×¦×¨×™×š ×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×, × ×›×•×Ÿ?'
prosaas-backend  | â„¹ï¸ [BUILD 195] Verification phrase detected but lead NOT captured yet - NOT setting pending_confirmation
prosaas-backend  | ğŸ’° [COST] AI utterance: 0.77s (21 chunks)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=34, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | âœ… [LEAD STATE] Updated: city_needs_retry=True
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: city_needs_retry=True source=ai_confirmation
prosaas-backend  | âŒ [CITY] Rejected '×—×›×,' (confidence=54%) - ask to repeat
prosaas-backend  | âœ… [LEAD STATE] Updated: service_type=×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: service_type=×”×ª×§× ×ª ×× ×¢×•×œ ×—×›× source=ai_confirmation
prosaas-backend  | âœ… [LEAD STATE] Extracted service_type from confirmation: ×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '×¨×§ ××•×•×“××ª â€” ××ª×” ×¦×¨×™×š ×”×ª×§× ×ª ×× ×¢...'
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸ¤ [BUILD 196.2] Music stopped - thresholds: start=8.0dB, stop=5.0dB
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ¤ END OF UTTERANCE: 2.0s audio, conversation #0
prosaas-backend  | ğŸ§  STATE -> PROCESSING | len=32640 | silence_ms=6104
prosaas-backend  | â­ï¸ [REALTIME] END OF UTTERANCE detected - triggering AI response
prosaas-backend  | âœ… [REALTIME] response.create triggered via queue
prosaas-backend  | âœ… Processing complete for conversation #0
prosaas-backend  | âœ… [BUILD 196.3] response.create sent (manual trigger)
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=99.0 > threshold=80.0
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=8.2dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CjFgO0Vo5qcyi0C...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CjFgO0Vo5qcyi0C... status=in_progress modalities=['text', 'audio'] output_format=g711_ulaw
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SILENCE | SNR=3.1dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=8, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] AI started speaking (audio.delta)
prosaas-backend  | âš ï¸ [AUDIO GAP] 4623ms gap between chunks #21 and #22 - OpenAI delay!
prosaas-backend  | ğŸ”§ [GAP RECOVERY] Inserted 25 silence frames (500ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 4800 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”‡ [REALTIME] AI stopped speaking (response.audio.done)
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?
prosaas-backend  | ğŸ’¾ [BUILD 196.5] AI transcript saved to conversation_history (total: 8 messages)
prosaas-backend  | ğŸ” [DEBUG CALLIBER] AI_REPLY: '×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?'
prosaas-backend  | âš ï¸ [LOOP DETECT] AI repeating! Similarity=100% with: '×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?...'
prosaas-backend  | âš ï¸ [LOOP GUARD] Triggered by semantic_repetition!
prosaas-backend  | ğŸ›‘ [LOOP GUARD] BLOCKING further responses until user speaks!
prosaas-backend  | ğŸ›‘ [LOOP GUARD] Cleared TX queue
prosaas-backend  | ğŸ›‘ [LOOP GUARD] Sent clear to Twilio
prosaas-backend  | ğŸ’° [COST] AI utterance: 0.24s (27 chunks)
prosaas-backend  | ğŸ§¹ TX_CLEAR: SUCCESS
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=2595, voice_frames=0
prosaas-backend  | ğŸ”’ [CONSISTENCY] City locked to '×¢×™×¨' (majority 2/3)
prosaas-backend  | âœ… [LEAD STATE] Updated: city=×¢×™×¨ ×’× ×™×
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×', 'city': '×¢×™×¨ ×’× ×™×'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: city=×¢×™×¨ ×’× ×™× source=ai_confirmation
prosaas-backend  | âœ… [LEAD STATE] Updated: raw_city=×¢×™×¨
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×', 'city': '×¢×™×¨ ×’× ×™×', 'raw_city': '×¢×™×¨'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: raw_city=×¢×™×¨ source=ai_confirmation
prosaas-backend  | âœ… [LEAD STATE] Updated: city_confidence=100.0
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×', 'city': '×¢×™×¨ ×’× ×™×', 'raw_city': '×¢×™×¨', 'city_confidence': '100.0'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: city_confidence=100.0 source=ai_confirmation
prosaas-backend  | âœ… [LEAD STATE] Updated: city_autocorrected=True
prosaas-backend  | ğŸ“‹ [LEAD STATE] Current state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×', 'city': '×¢×™×¨ ×’× ×™×', 'raw_city': '×¢×™×¨', 'city_confidence': '100.0', 'city_autocorrected': 'True'}
prosaas-backend  | ğŸ” [DEBUG CALLIBER] LEAD_STATE_UPDATE: city_autocorrected=True source=ai_confirmation
prosaas-backend  | ğŸ”’ [CITY] Majority locked: '×¢×™×¨ ×’× ×™×' from ['×©×œ×•×!', '×¢×™×¨', '×—×›×,', '×¢×™×¨']
prosaas-backend  | [GOODBYE CHECK] No goodbye phrase: '×•×‘××™×–×• ×¢×™×¨ ××ª×” × ××¦×?...'
prosaas-backend  | ğŸ”‡ [SERVER_EVENT] Sent SILENTLY to AI: [SERVER] ×–×™×”×™×ª×™ ×©××ª×” ×—×•×–×¨ ×¢×œ ×¢×¦××š. ×××•×¨: '×œ× ×©××¢×ª×™ ×˜×•×‘, ××¤×©×¨ ×œ×—×–×•×¨?' ×•×ª××ª×™×Ÿ ×‘×©×§×˜.
prosaas-backend  | ğŸ›‘ [LOOP GUARD] Blocking response.create (engaged=True, consecutive=3)
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=19.1dB | noise=30 | music=False | echo_blocked=True
prosaas-backend  | ğŸ¤ [BUILD 196.2] SPEECH STARTED (SNR=33.4dB) echo_blocked=True
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SPEECH | SNR=33.4dB | noise=30 | music=False | echo_blocked=True
prosaas-backend  | ğŸ“¼ [BUILD 198] Sending 10 pre-roll frames (RAW Î¼-law)
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_stopped
prosaas-backend  | ğŸ¤ [BUILD 166] Speech ended - noise gate RE-ENABLED
prosaas-backend  | [REALTIME] event: input_audio_buffer.committed
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CjFgQ1Yui2q57xI...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CjFgQ1Yui2q57xI... status=in_progress modalities=['text', 'audio'] output_format=g711_ulaw
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_started
prosaas-backend  | ğŸ›¡ï¸ [BUILD 187 GRACE] Ignoring speech_started - only 10ms since response.created (grace=1000ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=cancelled, output_count=0, details={'type': 'cancelled', 'reason': 'turn_detected'}
prosaas-backend  | ğŸ”„ [BUILD 193] Response cancelled (output=0)! Triggering IMMEDIATE recovery...
prosaas-backend  | [REALTIME] event: conversation.item.input_audio_transcription.completed
prosaas-backend  | ğŸ”¥ [BUILD 171 COOLDOWN] âŒ REJECTED: Transcript arrived 573ms after AI finished (min: 700ms)
prosaas-backend  |    Rejected text: '×©×—×§....' (likely hallucination)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=21, voice_frames=0
prosaas-backend  | [REALTIME] event: input_audio_buffer.speech_stopped
prosaas-backend  | ğŸ¤ [BUILD 166] Speech ended - noise gate RE-ENABLED
prosaas-backend  | [REALTIME] event: input_audio_buffer.committed
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.created: id=resp_CjFgRvUPC3ia2EN...
prosaas-backend  | ğŸ¯ [RESPONSE.CREATED] id=resp_CjFgRvUPC3ia2EN... status=in_progress modalities=['text', 'audio'] output_format=g711_ulaw
prosaas-backend  | ğŸ”‡ [BUILD 197] SPEECH ENDED: duration=963ms threshold=900ms trailing_silence=507ms first=False
prosaas-backend  | âœ… [BUILD 197] ACCEPTED utterance: 963ms >= 900ms
prosaas-backend  | ğŸ¤ END OF UTTERANCE: 1.0s - triggering AI response
prosaas-backend  | ğŸ“Š [AUDIO PATH] First utterance accepted: duration=963ms, trailing_silence=507ms, first=False
prosaas-backend  | âœ… [BUILD 197] response.create queued (end of speech)
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SPEECH â†’ SILENCE | SNR=-7.3dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | â­ï¸ [BUILD 196.3] Active response in progress (resp_CjFgRvUPC3...) - NOT creating new one
prosaas-backend  | ğŸ”„ [BUILD 192] RECOVERY: Triggering response.create NOW!
prosaas-backend  | âœ… [BUILD 192] RECOVERY SUCCESS: response.create sent!
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.added
prosaas-backend  | [REALTIME] event: conversation.item.created
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.added
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1068 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 1600 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸµ [BUILD 196.2] MUSIC DETECTED - thresholds: start=12.0dB, stop=8.0dB
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=21, voice_frames=0
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | [REALTIME] event: conversation.item.input_audio_transcription.completed
prosaas-backend  | [SILENCE GATE] âŒ REJECTED (RMS=21 < 30, frames=0): '× ×›×•×Ÿ'
prosaas-backend  | âŒ [REALTIME] ERROR: {'type': 'invalid_request_error', 'code': 'conversation_already_has_active_response', 'message': 'Conversation already has an active response in progress: resp_CjFgRvUPC3ia2EN9B09Eg. Wait until the response is finished before creating a new one.', 'param': None, 'event_id': None}
prosaas-backend  | [REALTIME] event: error
prosaas-backend  | âŒ [REALTIME] Error event: Conversation already has an active response in progress: resp_CjFgRvUPC3ia2EN9B09Eg. Wait until the response is finished before creating a new one.
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.delta
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ¤ END OF UTTERANCE: 0.6s audio, conversation #1
prosaas-backend  | ğŸ§  STATE -> PROCESSING | len=10240 | silence_ms=1985
prosaas-backend  | â­ï¸ [REALTIME] END OF UTTERANCE detected - triggering AI response
prosaas-backend  | âœ… [REALTIME] response.create triggered via queue
prosaas-backend  | âœ… Processing complete for conversation #1
prosaas-backend  | ğŸ’“ WS_KEEPALIVE #2 (prevents 5min timeout)
prosaas-backend  | âœ… [BUILD 196.3] response.create sent (manual trigger)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | âŒ [REALTIME] ERROR: {'type': 'invalid_request_error', 'code': 'conversation_already_has_active_response', 'message': 'Conversation already has an active response in progress: resp_CjFgRvUPC3ia2EN9B09Eg. Wait until the response is finished before creating a new one.', 'param': None, 'event_id': None}
prosaas-backend  | [REALTIME] event: error
prosaas-backend  | âŒ [REALTIME] Error event: Conversation already has an active response in progress: resp_CjFgRvUPC3ia2EN9B09Eg. Wait until the response is finished before creating a new one.
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ™ï¸ REAL_VOICE: rms=103.0 > threshold=80.0
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=15.6dB | noise=30 | music=True | echo_blocked=False
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 2668 bytes
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SILENCE | SNR=3.7dB | noise=30 | music=True | echo_blocked=False
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.delta: 7468 bytes
prosaas-backend  | ğŸ”Š [REALTIME] response.audio.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | ğŸ”Š [REALTIME] response.audio_transcript.done
prosaas-backend  | ğŸ¤– [REALTIME] AI said: ××¦×•×™×Ÿ, ×§×™×‘×œ×ª×™. ×‘×¢×œ ××§×¦×•×¢ ××ª××™× ×™×—×–×•×¨ ××œ×™×š ×‘×“×§×•×ª ×”×§×¨×•×‘×•×ª. ×ª×•×“×” ×•×œ×”×ª×¨××•×ª.
prosaas-backend  | ğŸ’¾ [BUILD 196.5] AI transcript saved to conversation_history (total: 12 messages)
prosaas-backend  | ğŸ” [DEBUG CALLIBER] AI_REPLY: '××¦×•×™×Ÿ, ×§×™×‘×œ×ª×™. ×‘×¢×œ ××§×¦×•×¢ ××ª××™× ×™×—×–×•×¨ ××œ×™×š ×‘×“×§×•×ª ×”×§×¨×•×‘×•×ª. ×ª×•×“×” ×•×œ×”×ª×¨××•×ª.'
prosaas-backend  | ğŸ”’ [CITY] Already locked to '×¢×™×¨' - ignoring new input
prosaas-backend  | [GOODBYE CHECK] Clear goodbye detected: '××¦×•×™×Ÿ, ×§×™×‘×œ×ª×™. ×‘×¢×œ ××§×¦×•×¢ ××ª××™×...'
prosaas-backend  | âœ… [HANGUP BUILD 176] AI said goodbye with auto_end_on_goodbye=True + user interaction - disconnecting
prosaas-backend  | ğŸ”’ [BUILD 194] Hangup triggered - blocking future transcripts
prosaas-backend  | ğŸ”‡ [BUILD 194] Cleared audio input buffer
prosaas-backend  | ğŸ“ [STATE] Transitioning ACTIVE â†’ CLOSING (reason: ai_goodbye_auto_end)
prosaas-backend  | ğŸ“ [BUILD 163] Pending hangup set - will disconnect after audio finishes playing
prosaas-backend  | ğŸ”Š [REALTIME] response.content_part.done
prosaas-backend  | ğŸ”Š [REALTIME] response.output_item.done
prosaas-backend  | ğŸ”¥ [BUILD 171] AI finished speaking - cooldown started (700ms)
prosaas-backend  | â³ [POLITE HANGUP] Starting wait for audio to finish...
prosaas-backend  | âœ… [POLITE HANGUP] OpenAI queue empty after 0ms
prosaas-backend  | âœ… [POLITE HANGUP] Twilio TX queue empty after 0ms
prosaas-backend  | â³ [POLITE HANGUP] Queues empty, waiting 2s for network...
prosaas-backend  | ğŸ”Š [REALTIME] response.done: status=completed, output_count=1, details=None
prosaas-backend  |    output[0]: type=message, content_types=['audio']
prosaas-backend  | [REALTIME] event: rate_limits.updated
prosaas-backend  | [REALTIME] event: input_audio_buffer.cleared
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=14, voice_frames=0
prosaas-backend  | ğŸ“Š [BUILD 198] Stats: sent=270 blocked=839 | ğŸµMUSIC | noise=30 | state=SILENCE
prosaas-backend  | ğŸ¤ [BUILD 196.2] Music stopped - thresholds: start=8.0dB, stop=5.0dB
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: SILENCE â†’ MAYBE_SPEECH | SNR=10.5dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ¤ [BUILD 196.2] SPEECH STARTED (SNR=18.7dB) echo_blocked=False
prosaas-backend  | ğŸ“Š [BUILD 196.2] State: MAYBE_SPEECH â†’ SPEECH | SNR=18.7dB | noise=30 | music=False | echo_blocked=False
prosaas-backend  | ğŸ“¼ [BUILD 198] Sending 10 pre-roll frames (RAW Î¼-law)
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=18, voice_frames=0
prosaas-backend  | ğŸ”’ [BUILD 197] CLOSING state - ignoring utterance (672ms)
prosaas-backend  | ğŸ“ [BUILD 163] Audio playback complete - triggering polite hangup now
prosaas-backend  | ğŸ“ [SMART HANGUP] === CALL ENDING ===
prosaas-backend  | ğŸ“ [SMART HANGUP] Reason: AI finished speaking politely
prosaas-backend  | ğŸ“ [SMART HANGUP] Lead captured: False
prosaas-backend  | ğŸ“ [SMART HANGUP] Goodbye detected: True
prosaas-backend  | ğŸ“ [SMART HANGUP] Lead state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×', 'city': '×¢×™×¨ ×’× ×™×', 'raw_city': '×¢×™×¨', 'city_confidence': '100.0', 'city_autocorrected': 'True'}
prosaas-backend  | ğŸ“ [SMART HANGUP] Required fields: ['city', 'service_type']
prosaas-backend  | ğŸ“ [SMART HANGUP] ===================
prosaas-backend  | ğŸµ [BUILD 196.2] MUSIC DETECTED - thresholds: start=12.0dB, stop=8.0dB
prosaas-backend  | ğŸ” [BARGE-IN DEBUG] is_ai_speaking=False, user_has_spoken=True, waiting_for_dtmf=False, rms=11, voice_frames=0
prosaas-backend  | âœ… [BUILD 163] Call CAf815c2... hung up successfully: AI finished speaking politely
prosaas-backend  | WS_STOP sid=MZ978ef80d7a575046144ff13cace123e8 rx=1342 tx=516
prosaas-backend  | ğŸ“ [SES-d1f9c2ae] CALL ENDED - duration=26.8s, business_id=10, rx=1342, tx=516
prosaas-backend  | ğŸ“¤ [REALTIME] Audio sender ended
prosaas-backend  | ğŸ“ [REALTIME] Text sender ended
prosaas-backend  | ğŸ§¹ Waiting for 5 background threads...
prosaas-backend  | STREAM_ENDED call=CAf815c2c330137396b51e854085d0c0ef stream=N/A status=N/A
prosaas-backend  | INFO:     172.18.0.5:57766 - "POST /webhook/stream_ended HTTP/1.1" 204 No Content
prosaas-backend  | INFO:     172.18.0.5:57772 - "POST /webhook/call_status HTTP/1.1" 204 No Content
prosaas-backend  | âœ… Found existing recording for CAf815c2c330137396b51e854085d0c0ef: /2010-04-01/Accounts/ACcd09431f076a309088b18ed1f286f32e/Recordings/REecac0f94f9977fb6d9ea47b5aeb3321a.json
prosaas-backend  | âœ… Recording queued for processing: CAf815c2c330137396b51e854085d0c0ef
prosaas-backend  | INFO:     connection closed
prosaas-backend  | INFO:     127.0.0.1:54530 - "GET /health HTTP/1.1" 200 OK
prosaas-backend  | âš ï¸ Background thread 0 still running after timeout
prosaas-backend  | âœ… CALL FINALIZED: CAf815c2c330137396b51e854085d0c0ef
prosaas-backend  | ğŸ“ Summary: ### ×¡×•×’ ×”×¤× ×™×™×” ×•×”×ª×—×•×:
prosaas-backend  | ×”×¤× ×™×™×” ×”×™× ×‘×ª×—×•× ×”×× ×¢×•×œ×™× ×•×”×‘×™×˜×—×•×Ÿ, ×¢× ×“×’×© ×¢×œ ×”×ª×§× ×ª ×× ×¢×•×œ ×—×›× ×‘××œ×•×Ÿ.
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™× ×¡×¤×¦×™×¤×™×™×:
prosaas-backend  | - **×©×™×¨×•×ª × ×“×¨×©**: ×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×.
prosaas-backend  | - **××™×§×•×**: ×©×—×§ (×¢×™×¨ ×œ× ×‘×¨×•×¨×”, ×™×© ×œ×‘×“×•×§ ××ª ×”×›×ª×•×‘×ª ×”××“×•×™×§×ª).
prosaas-backend  | 
prosaas-backend  | ### ×¤×¨×˜×™ ×”×œ×§×•×—:
prosaas-backend  | ×œ× × ××¡×¨×• ×¤×¨×˜×™ ×œ×§×•×— ×›××• ×©× ××• ×××¦×¢×™ ×”×ª×§×©×¨×•×ª.
prosaas-backend  | 
prosaas-backend  | ### ×¡×˜×˜×•×¡ ×•××¢×§×‘:
prosaas-backend  | - **×¤×¢×•×œ×”**: ×‘×¢×œ ××§×¦×•×¢ ××ª××™× ×™×—×–×•×¨ ×œ×œ×§×•×— ×‘×“×§×•×ª ×”×§×¨×•×‘×•×ª.
prosaas-backend  | - **×“×—×™×¤×•×ª**: ×œ× ×¦×•×™× ×” ×“×—×™×¤×•×ª, ××š ×™×© ×œ×”× ×™×— ×©×”×©×™×¨×•×ª × ×“×¨×© ×‘×”×§×“×.
prosaas-backend  | 
prosaas-backend  | ### ×”×¢×¨×•×ª ×—×©×•×‘×•×ª:
prosaas-backend  | ×™×© ×œ×•×•×“× ××ª ×”××™×§×•× ×”××“×•×™×§ ×©×œ ×”×œ×§×•×— ×•×œ×‘×¨×¨ ×¤×¨×˜×™× × ×•×¡×¤×™× ×‘××™×“×ª ×”×¦×•×¨×š, ×›×’×•×Ÿ ×¡×•×’ ×”××œ×•×Ÿ ×•×“×¨×™×©×•×ª × ×•×¡×¤×•×ª ×œ×”×ª×§× ×”. ××•××œ×¥ ×œ×¢×§×•×‘ ××—×¨×™ ×”×¤× ×™×™×” ×•×œ×•×•×“× ×©×”×œ×§×•×— ×§×™×‘×œ ××ª ×”×©×™×¨×•×ª ×”× ×“×¨×©.
prosaas-backend  | ğŸ¯ Intent: general_inquiry
prosaas-backend  | ğŸ“Š Next Action: ××¢×§×‘ ×ª×•×š 24 ×©×¢×•×ª
prosaas-backend  | â„¹ï¸ Appointment handling: Managed by Agent during call (BUILD 119)
prosaas-backend  | ğŸ“± [WEBHOOK] Phone extraction debug:
prosaas-backend  |    - self.phone_number: None
prosaas-backend  |    - self.customer_phone_dtmf: NOT_SET
prosaas-backend  | âš ï¸ Background thread 4 still running after timeout
prosaas-backend  | âœ… All background threads cleanup complete
prosaas-backend  | WS_DONE sid=MZ978ef80d7a575046144ff13cace123e8 rx=1342 tx=516
prosaas-backend  |    - call_log.from_number: +972504294724
prosaas-backend  |    - crm_context.customer_phone: NO_CRM
prosaas-backend  |    âœ“ Using CallLog from_number: +972504294724
prosaas-backend  | ğŸ¯ [WEBHOOK] Extracted SPECIFIC service from AI confirmation: '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×'
prosaas-backend  | ğŸ“‹ [WEBHOOK] Lead capture state: {'city_needs_retry': 'True', 'service_type': '×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×', 'city': '×¢×™×¨ ×’× ×™×', 'raw_city': '×¢×™×¨', 'city_confidence': '100.0', 'city_autocorrected': 'True'}
prosaas-backend  | [WEBHOOK] ğŸ“¦ Payload built: call_id=CAf815c2c330137396b51e854085d0c0ef, phone=+972504294724, city=×¢×™×¨ ×’× ×™×, direction=inbound
prosaas-backend  | [WEBHOOK] Sending call.completed to http://prosaas.pro/n8n/webhook/prosaas-call-comple... (attempt 1)
prosaas-backend  | âœ… [WEBHOOK] Call completed webhook queued: phone=+972504294724, city=×¢×™×¨ ×’× ×™×, service=×”×ª×§× ×ª ×× ×¢×•×œ ×—×›×
prosaas-backend  | [WEBHOOK] ğŸ”€ Following redirect to: https://prosaas.pro/n8n/webhook/prosaas-call-completed
prosaas-backend  | [WEBHOOK] Sending call.completed to https://prosaas.pro/n8n/webhook/prosaas-call-compl... (attempt 2)
prosaas-backend  | [WEBHOOK] âš ï¸ Response 404: {"code":404,"message":"The requested webhook \"POST prosaas-call-completed\" is not registered.","hint":"The workflow must be active for a production URL to run successfully. You can activate the work
prosaas-backend  | [WEBHOOK] Retrying in 3s...
prosaas-backend  | ğŸ” AUTH DEBUG: user_id=10, role=owner, business_id=10, computed_tenant=10, impersonating=False
prosaas-backend  | ğŸ”” /api/notifications - tenant_id=10, g.tenant=10
prosaas-backend  | ğŸ”” Querying reminders for tenant_id=10, is_system_admin=False
prosaas-backend  | ğŸ”” Found 0 reminders
prosaas-backend  | INFO:     172.18.0.5:41902 - "GET /api/notifications HTTP/1.1" 200 OK
prosaas-backend  | [WEBHOOK] Sending call.completed to https://prosaas.pro/n8n/webhook/prosaas-call-compl... (attempt 3)
prosaas-backend  | [WEBHOOK] âš ï¸ Response 404: {"code":404,"message":"The requested webhook \"POST prosaas-call-completed\" is not registered.","hint":"The workflow must be active for a productio