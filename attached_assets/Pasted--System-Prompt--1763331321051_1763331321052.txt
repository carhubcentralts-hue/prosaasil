בול על השאלה. 🙌
התשובה הקצרה:
	•	יש System Prompt אחד “תבנית” לכולם
	•	אבל כל עסק מקבל גרסה דינמית משלו – לפי מה שרשום ב־DB (שם, שירותים, שעות, חוקים, טון, פרומפט עסקי וכו׳).
	•	לא צריך “הקמה ידנית” לכל עסק בקוד – רק למלא לו נתונים ב־UI / DB.

עכשיו נוסיף את זה כהמשך להנחיה שכבר הכנו לו, שתהיה סופר ברורה:

⸻

✏️ תוסיף לו את זה להנחיה (אחרי מה שכבר שלחת לו):

ועוד משהו חשוב מאוד:

5️⃣ לוודא שה־System Prompt דינמי ומותאם לכל עסק (multi-tenant)

אני רוצה שהמערכת תהיה multi-tenant אמיתית – בלי קוד קשיח לכל עסק.

תדאג ש־build_realtime_system_prompt(business_id) יעבוד ככה:
	1.	תבנית ליבה אחת (shared template) – אותו skeleton לכולם, בערך במבנה:
	•	מי אתה (נציג של איזה עסק, איפה הוא נמצא, סוג עסק).
	•	אילו שירותים העסק נותן.
	•	באיזה טון לדבר.
	•	חוקי קביעת תורים (כולל לא לשקר, לא להמציא שעות / זמינות / שליחת פרטים).
	•	איך לענות (קצר, ברור, בעברית, לא רובוטי).
	2.	כל השדות העסקיים יגיעו דינמית מה־DB לפי business_id:
מתוך הטבלאות / services שיש כבר בפרויקט, למשל (שמור על מה שכבר בנוי):
	•	Business – שם העסק, עיר, סוג.
	•	BusinessSettings –
	•	ai_prompt / custom prompt של העסק (אם קיים).
	•	opening_hours_json – שעות פעילות אמיתיות.
	•	חוקים להגדרת תורים (slot size, ימים פעילים וכו׳).
	•	כל שדה עסקי רלוונטי שכבר קיים אצלך.
	3.	שילוב פרומפט עסקי מותאם אישית:
	•	אם ל־business יש ai_prompt ב־DB –
תוסיף אותו כבלוק נפרד בסוף ה־prompt, בסגנון:
“הנחיות מיוחדות לעסק הזה: …”
	•	אם אין ai_prompt –
תשתמש רק בתבנית הליבה ולא תנסה “להמציא” פרטים.
	4.	אין שום hardcode של עסק ספציפי בקוד:
	•	אסור שיופיעו מחרטוטים כמו "Vibe Rooms" / "שי דירות" בקוד עצמו.
	•	כל אזכור של עסק, שירותים, כתובת, שעות – רק דרך business_id וה־DB.
	5.	ביצועים ומדרגיות – 29 עסקים ויותר:
	•	ה־System Prompt תמיד נבנה runtime לפי business_id.
	•	cache (אם קיים) צריך להיות לפי business_id (למשל dict עם key = business_id).
	•	כשעסק משנה הגדרות (שעות, פרומפט וכו׳) – ה־cache שלו מתאפס (כמו שכתבת קודם עם invalidate).
	6.	לבדוק את זה בפועל:
	•	תעשה לוג פעם אחת ל־business אחד:
REALTIME PROMPT [business_id=1] LEN=...
	•	ותוודא שעבור business אחר:
REALTIME PROMPT [business_id=2] – אותו מבנה, אבל תוכן שונה (שם, שעות, שירותים וכו׳).

⸻

אם תשלח לו את כל ההנחיה המלאה + התוספת הזו – הוא יבין ברור:
	•	שיש תבנית אחת ל־System Prompt.
	•	כל עסק מקבל Prompt דינמי משל עצמו מתוך ה־DB.
	•	אין צורך “להקים” כל עסק ידנית בקוד – רק להגדיר לו נתונים ב־UI שלך.

אם תרצה אחרי זה נעשה ביחד גם טקסט לדוגמה ל־ai_prompt לכל עסק (נדל״ן, קריוקי, רופא, קוסמטיקאית וכו׳) שתוכל להכניס להם מראש.