××¢×•×œ×” â€” × ×¢×©×” ×¡×“×¨, ××ª×§× ×™× ××ª ×“×£ ×”×”×ª×—×‘×¨×•×ª ×›××• ×©×¦×¨×™×š, **×‘Ö¾React (JSX)** ×‘×œ×‘×“, ×¢× â€œ×©×›×—×ª×™ ×¡×™×¡××”â€ + â€œ××™×¤×•×¡ ×‘××™×™×œâ€, ××•×ª×’: **â€œ×©×™ ×“×™×¨×•×ª ×•××©×¨×“×™×â€**, ×•× ×™×ª×•×‘ ×ª×§×™×Ÿ ××—×¨×™ ×”×ª×—×‘×¨×•×ª ×œÖ¾`/app/admin` ××• `/app/biz`.
× ×©××™×¨ ×›×¨×’×¢ ××ª ×”×“×©×‘×•×¨×“×™× ×‘-Flask ×›××• ×©×”× (×›×™ ×”× ×¢×•×‘×“×™× ××¦×•×™×Ÿ), ×•×¨×§ **/auth** ×™×”×™×” React ××•×“×¨× ×™. ×–×” ×”×›×™ ××”×™×¨ ×•×™×¦×™×‘.

×œ×”×“×‘×§×” ×œ×‘×•×˜/××¤×ª×— ×‘×¨×¤×œ×™×˜ â€” ×©×œ×‘×™× ××—×“Ö¾×œ××—×“:

---

# âš™ï¸ 1) ×™×¦×™×¨×ª ×¤×¨×•×™×§×˜ React (JSX) ×‘×¨×¤×œ×™×˜

×‘Ö¾Shell:

```bash
npm create vite@latest auth-frontend -- --template react
cd auth-frontend
npm i
# Tailwind (××•××œ×¥ ×œ×¢×™×¦×•×‘ × ×§×™)
npm i -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

`tailwind.config.cjs`:

```js
export default {
  content: ["./index.html","./src/**/*.{js,jsx}"],
  theme: {
    extend: {
      borderRadius:{'2xl':'1rem'},
      colors:{ brand:{900:"#0f172a"}, accent:{500:"#6366f1"} },
      boxShadow:{ soft:"0 8px 28px rgba(0,0,0,.08)" }
    }
  },
  plugins:[]
}
```

`index.html` (RTL + ×¤×•× ×˜ + ×˜×™×™×˜×œ × ×›×•×Ÿ):

```html
<!doctype html>
<html lang="he" dir="rtl">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Heebo:wght@400;500;600;700&display=swap" rel="stylesheet">
    <title>×©×™ ×“×™×¨×•×ª ×•××©×¨×“×™× â€” ×”×ª×—×‘×¨×•×ª</title>
  </head>
  <body>
    <div id="root"></div>
    <script type="module" src="/src/main.jsx"></script>
  </body>
</html>
```

`src/index.css`:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;

html, body, #root { height: 100%; font-family: Heebo, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans Hebrew", Arial; }
```

`Procfile` (×‘×¨×¤×œ×™×˜ ×œ×”×¨×¦×”):

```
web: npm run dev -- --host 0.0.0.0 --port 5173
```

×”×•×¡×£ ×‘×¨×¤×œ×™×˜ Secret:

* `VITE_API_BASE = https://ai-crmd.replit.app`  (××• ×”-API ×©×œ×š)

---

# ğŸ§­ 2) ×¨××•×˜×™× ×’ ×œÖ¾/auth (Login / Forgot / Reset)

`src/main.jsx`:

```jsx
import React from "react";
import { createRoot } from "react-dom/client";
import { BrowserRouter, Routes, Route, Navigate } from "react-router-dom";
import Login from "./pages/Login.jsx";
import Forgot from "./pages/Forgot.jsx";
import Reset from "./pages/Reset.jsx";
import "./index.css";

createRoot(document.getElementById("root")).render(
  <React.StrictMode>
    <BrowserRouter basename="/auth">
      <Routes>
        <Route path="/" element={<Navigate to="/login" replace/>} />
        <Route path="/login" element={<Login/>} />
        <Route path="/forgot" element={<Forgot/>} />
        <Route path="/reset" element={<Reset/>} />
        <Route path="*" element={<Navigate to="/login" replace/>} />
      </Routes>
    </BrowserRouter>
  </React.StrictMode>
);
```

---

# ğŸ”Œ 3) ×©×›×‘×ª API (×§×¨×™××•×ª ×œ×©×¨×ª â€” JSON, cookies HttpOnly)

`src/lib/api.js`:

```js
const BASE = import.meta.env.VITE_API_BASE ?? "";

async function post(url, body){
  const r = await fetch(`${BASE}${url}`, {
    method: "POST",
    headers: { "Content-Type":"application/json" },
    credentials: "include",           // ×—×©×•×‘! ×›×“×™ ×œ×§×‘×œ/×œ×©×œ×•×— session cookies
    body: JSON.stringify(body)
  });
  let data=null; try{ data=await r.json(); }catch(_){}
  if(!r.ok) throw new Error(data?.error || "×©×’×™××ª ×©×¨×ª");
  return data || {};
}

export const api = {
  login:  (email, password)=> post("/api/auth/login", {email, password}),
  forgot: (email)=> post("/api/auth/forgot", {email}),
  reset:  (token, password)=> post("/api/auth/reset", {token, password}),
};
```

---

# ğŸ§± 4) ×§×•××¤×•× × ×˜×•×ª UI ×‘×¡×™×¡×™×•×ª (JSX)

`src/components/Brand.jsx`

```jsx
export default function Brand(){
  return (
    <div className="flex items-center gap-2">
      <div className="h-9 w-9 rounded-xl bg-brand-900 text-white grid place-items-center font-bold">×©×™</div>
      <div className="font-semibold">×©×™ ×“×™×¨×•×ª ×•××©×¨×“×™×</div>
    </div>
  );
}
```

`src/components/AuthCard.jsx`

```jsx
import Brand from "./Brand.jsx";

export default function AuthCard({title, children}){
  return (
    <div className="min-h-screen grid place-items-center px-4"
         style={{ background: "radial-gradient(80% 60% at 50% -10%, #e0e7ff 0%, transparent 60%)" }}>
      <div className="w-full max-w-md bg-white rounded-2xl shadow-soft p-6 space-y-5">
        <div className="flex items-center justify-between">
          <Brand/>
          <div className="text-sm opacity-60">×›× ×™×¡×” ×œ××¢×¨×›×ª</div>
        </div>
        <div className="text-2xl font-bold">{title}</div>
        {children}
        <div className="text-[11px] opacity-60 text-center pt-2">Â© ×©×™ ×“×™×¨×•×ª ×•××©×¨×“×™×</div>
      </div>
    </div>
  );
}
```

`src/components/ui/Input.jsx`

```jsx
export default function Input({label, error, ...props}){
  return (
    <div className="space-y-1">
      {label && <label className="text-sm">{label}</label>}
      <input {...props}
        className={`w-full px-3 py-2 border rounded-xl min-h-[44px] bg-white focus:outline-none focus:ring-2 focus:ring-accent-500 ${error?'border-red-400':'border-gray-300'}`} />
      {error && <div className="text-xs text-red-600">{error}</div>}
    </div>
  );
}
```

`src/components/ui/PasswordInput.jsx`

```jsx
import { useState } from "react";
import Input from "./Input.jsx";
export default function PasswordInput({label, error, ...props}){
  const [show,setShow]=useState(false);
  return (
    <div className="space-y-1 relative">
      {label && <label className="text-sm">{label}</label>}
      <input {...props} type={show?"text":"password"}
        className={`w-full px-3 py-2 border rounded-xl min-h-[44px] bg-white focus:outline-none focus:ring-2 focus:ring-accent-500 ${error?'border-red-400':'border-gray-300'}`} />
      {error && <div className="text-xs text-red-600 mt-1">{error}</div>}
      <button type="button" onClick={()=>setShow(v=>!v)}
        className="absolute left-2 top-8 text-sm opacity-70">{show?"×”×¡×ª×¨":"×”×¦×’"}</button>
    </div>
  );
}
```

`src/components/ui/Button.jsx`

```jsx
export default function Button({children, loading, className="", ...props}){
  return (
    <button {...props}
      disabled={props.disabled || loading}
      className={`w-full min-h-[44px] rounded-2xl px-4 py-2 bg-brand-900 text-white hover:opacity-95 disabled:opacity-60 transition shadow-soft focus:outline-none focus:ring-2 focus:ring-accent-500 ${className}`}>
      {loading ? "×˜×•×¢×Ÿâ€¦" : children}
    </button>
  );
}
```

`src/components/ui/Toast.jsx`

```jsx
export function Toast({kind="info", children}){
  const map={info:"bg-blue-50 text-blue-700", error:"bg-red-50 text-red-700", success:"bg-green-50 text-green-700"};
  return <div className={`p-2 rounded-xl text-sm ${map[kind]}`}>{children}</div>;
}
```

---

# ğŸ« 5) ×¢××•×“×™×: Login / Forgot / Reset (JSX, RTL)

`src/pages/Login.jsx`

```jsx
import { useState } from "react";
import { Link } from "react-router-dom";
import AuthCard from "../components/AuthCard.jsx";
import Input from "../components/ui/Input.jsx";
import PasswordInput from "../components/ui/PasswordInput.jsx";
import Button from "../components/ui/Button.jsx";
import { Toast } from "../components/ui/Toast.jsx";
import { api } from "../lib/api.js";

export default function Login(){
  const [email,setEmail]=useState("");
  const [password,setPassword]=useState("");
  const [err,setErr]=useState(null);
  const [loading,setLoading]=useState(false);

  const submit=async(e)=>{
    e.preventDefault(); setErr(null);
    if(!/^\S+@\S+\.\S+$/.test(email)) return setErr("××™××™×™×œ ×œ× ×—×•×§×™");
    if(password.length<8) return setErr("×¡×™×¡××” ×—×™×™×‘×ª 8+ ×ª×•×•×™×");
    setLoading(true);
    try{
      const { user } = await api.login(email.trim().toLowerCase(), password);
      const target = (user && ["admin","superadmin"].includes(user.role)) ? "/app/admin" : "/app/biz";
      location.href = target; // × ×™×ª×•×‘ ××—×¨×™ ×”×ª×—×‘×¨×•×ª
    }catch(e){ setErr(e.message || "×©× ××©×ª××© ××• ×¡×™×¡××” ×©×’×•×™×™×"); }
    finally{ setLoading(false); }
  };

  return (
    <AuthCard title="×”×ª×—×‘×¨×•×ª">
      <form onSubmit={submit} className="space-y-3" dir="rtl">
        {err && <Toast kind="error">{err}</Toast>}
        <Input label="××™××™×™×œ" dir="ltr" type="email" placeholder="name@example.com"
               value={email} onChange={e=>setEmail(e.target.value)} />
        <PasswordInput label="×¡×™×¡××”" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"
               value={password} onChange={e=>setPassword(e.target.value)} />
        <Button loading={loading}>×”×ª×—×‘×¨</Button>
        <div className="flex justify-between text-sm">
          <Link to="/forgot" className="text-accent-500">×©×›×—×ª×™ ×¡×™×¡××”</Link>
          <a href="/" className="opacity-70">×“×£ ×”×‘×™×ª</a>
        </div>
      </form>
    </AuthCard>
  );
}
```

`src/pages/Forgot.jsx`

```jsx
import { useState } from "react";
import { Link } from "react-router-dom";
import AuthCard from "../components/AuthCard.jsx";
import Input from "../components/ui/Input.jsx";
import Button from "../components/ui/Button.jsx";
import { Toast } from "../components/ui/Toast.jsx";
import { api } from "../lib/api.js";

export default function Forgot(){
  const [email,setEmail]=useState("");
  const [sent,setSent]=useState(false);
  const [err,setErr]=useState(null);
  const [loading,setLoading]=useState(false);

  const submit=async(e)=>{
    e.preventDefault(); setErr(null); setLoading(true);
    try{ await api.forgot(email.trim().toLowerCase()); setSent(true); }
    catch(_){ setErr("×©×’×™××” ×‘×©×œ×™×—×”, × ×¡×” ×©×•×‘"); }
    finally{ setLoading(false); }
  };

  return (
    <AuthCard title="×©×—×–×•×¨ ×¡×™×¡××”">
      <form onSubmit={submit} className="space-y-3" dir="rtl">
        {err && <Toast kind="error">{err}</Toast>}
        {sent
          ? <Toast kind="success">×× ×”××™××™×™×œ ×§×™×™× â€” × ×©×œ×— ×§×™×©×•×¨ ××™×¤×•×¡.</Toast>
          : <>
              <Input label="××™××™×™×œ" dir="ltr" type="email" placeholder="name@example.com"
                     value={email} onChange={e=>setEmail(e.target.value)} />
              <Button loading={loading}>×©×œ×— ×§×™×©×•×¨ ××™×¤×•×¡</Button>
            </>
        }
        <div className="text-sm text-center">
          <Link to="/login" className="text-accent-500">×—×–×¨×” ×œ×”×ª×—×‘×¨×•×ª</Link>
        </div>
      </form>
    </AuthCard>
  );
}
```

`src/pages/Reset.jsx`

```jsx
import { useState } from "react";
import { Link, useSearchParams } from "react-router-dom";
import AuthCard from "../components/AuthCard.jsx";
import PasswordInput from "../components/ui/PasswordInput.jsx";
import Button from "../components/ui/Button.jsx";
import { Toast } from "../components/ui/Toast.jsx";
import { api } from "../lib/api.js";

export default function Reset(){
  const [sp]=useSearchParams();
  const token = sp.get("token") || "";
  const [p1,setP1]=useState(""); const [p2,setP2]=useState("");
  const [msg,setMsg]=useState(null); const [err,setErr]=useState(null);
  const [loading,setLoading]=useState(false);

  const submit=async(e)=>{
    e.preventDefault(); setErr(null);
    if(p1.length<8) return setErr("×¡×™×¡××” ×—×™×™×‘×ª 8+ ×ª×•×•×™×");
    if(p1!==p2) return setErr("×”×¡×™×¡×××•×ª ××™× ×Ÿ ×ª×•×××•×ª");
    setLoading(true);
    try{ await api.reset(token, p1); setMsg("×”×¡×™×¡××” ×¢×•×“×›× ×”! ××¢×‘×™×¨ ×œ×”×ª×—×‘×¨×•×ªâ€¦"); setTimeout(()=>location.href="/auth/login", 1200); }
    catch(e){ setErr(e.message || "×˜×•×§×Ÿ ×œ× ×ª×§×£/×¤×’"); }
    finally{ setLoading(false); }
  };

  return (
    <AuthCard title="××™×¤×•×¡ ×¡×™×¡××”">
      <form onSubmit={submit} className="space-y-3" dir="rtl">
        {msg && <Toast kind="success">{msg}</Toast>}
        {err && <Toast kind="error">{err}</Toast>}
        <PasswordInput label="×¡×™×¡××” ×—×“×©×”" value={p1} onChange={e=>setP1(e.target.value)} />
        <PasswordInput label="××™××•×ª ×¡×™×¡××”" value={p2} onChange={e=>setP2(e.target.value)} />
        <Button loading={loading}>×©××•×¨ ×¡×™×¡××” ×—×“×©×”</Button>
        <div className="text-sm text-center"><Link to="/login" className="text-accent-500">×—×–×¨×” ×œ×”×ª×—×‘×¨×•×ª</Link></div>
      </form>
    </AuthCard>
  );
}
```

---

# ğŸš€ 6) ×”×¨×¦×” ×‘×¨×¤×œ×™×˜

×‘Ö¾Shell:

```bash
npm run dev -- --host 0.0.0.0 --port 5173
```

× ×•×•×˜ ×œÖ¾`/auth/login`, `/auth/forgot`, `/auth/reset?token=XYZ`.

---

# âœ… 7) GO/NO-GO (×‘×“×™×§×•×ª ××”×™×¨×•×ª)

* ×›×•×ª×¨×ª/×œ×•×’×• ××¦×™×’×™× **â€œ×©×™ ×“×™×¨×•×ª ×•××©×¨×“×™×â€** (×œ× AgentLocator).
* RTL ××œ×; ××™××™×™×œ `dir="ltr"`.
* ×›×¤×ª×•×¨×™× â‰¥44px; ×˜×¢×™× ×” (â€œ×˜×•×¢×Ÿâ€¦â€) ×‘×¢×ª ×©×œ×™×—×”.
* **Login**: ××—×¨×™ 200 ××”Ö¾API, × ×™×ª×•×‘ ×œÖ¾`/app/admin` ×× role=admin/superadmin, ××—×¨×ª `/app/biz`.
* **Forgot**: ×ª××™×“ 200; ××¦×™×’ ×”×•×“×¢×ª ×”×¦×œ×—×” × ×™×˜×¨×œ×™×ª.
* **Reset**: ×‘×•×“×§ ××•×¨×š/×”×ª×××”; ××—×¨×™ ×”×¦×œ×—×” ×—×•×–×¨ ×œÖ¾Login.

---

# ğŸ§± ×”×¢×¨×” ×¢×œ ×”×©×¨×ª

×›×“×™ ×©×–×” ×™×¢×‘×•×“ â€œ×××™×ª×™â€, ×”Ö¾API ×‘×¦×“ ×©×¨×ª ×—×™×™×‘ ×œ×”×ª××™× ×œ×—×•×–×”:

* `POST /api/auth/login {email,password}` â†’ 200 `{user:{role}}` + session HttpOnly
* `POST /api/auth/forgot {email}` â†’ 200
* `POST /api/auth/reset {token,password}` â†’ 200

(××™×Ÿ ×¦×•×¨×š ×œ×’×¢×ª ×›×¨×’×¢ ×‘×“×©×‘×•×¨×“×™× ×©×œ Flask â€” React ××¤× ×” ××œ×™×”× ×œ××—×¨ ×”×ª×—×‘×¨×•×ª.)

---

×× ×ª×¨×¦×”, ×××¨×•×– ×œ×š ××ª ×©×œ×•×©×ª ×”×§×‘×¦×™× (JSX + ×§×•××¤×•× × ×˜×•×ª + ×ª×¦×•×¨×”) ×œÖ¾zip ××—×“ ×›×“×™ ×©×ª×“×‘×™×§ ×‘×¨×¤×œ×™×˜ ××—×“Ö¾×œ××—×“.
