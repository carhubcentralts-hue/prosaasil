2025-11-05 13:58:30.93
bd3efa86
User
Final end for DB: 2025-11-06 12:00:00+02:00 (tzinfo=UTC+02:00)
2025-11-05 13:58:30.93
bd3efa86
User
2025-11-05 13:58:30.97
bd3efa86
User
ğŸ”¥ TIMEZONE FIX:
2025-11-05 13:58:30.97
bd3efa86
User
Before: start=2025-11-06 11:00:00+02:00 (with timezone)
2025-11-05 13:58:30.97
bd3efa86
User
After: start=2025-11-06 11:00:00 (naive, local Israel time)
2025-11-05 13:58:30.97
bd3efa86
User
This ensures 14:00 Israel time saves as 14:00 in DB (not 12:00 UTC!)
2025-11-05 13:58:30.97
bd3efa86
User
ğŸ”¥ğŸ”¥ğŸ”¥ CREATING APPOINTMENT IN DATABASE ğŸ”¥ğŸ”¥ğŸ”¥
2025-11-05 13:58:30.97
bd3efa86
User
business_id: 1
2025-11-05 13:58:30.97
bd3efa86
User
customer_name: ×©×™ ×“×”×Ÿ
2025-11-05 13:58:30.97
bd3efa86
User
phone: None
2025-11-05 13:58:30.97
bd3efa86
User
treatment_type: ×—×“×¨ ×§×¨×™×•×§×™
2025-11-05 13:58:30.97
bd3efa86
User
start_time: 2025-11-06 11:00:00
2025-11-05 13:58:30.97
bd3efa86
User
end_time: 2025-11-06 12:00:00
2025-11-05 13:58:30.97
bd3efa86
User
Appointment object created: <Appointment (transient 139682123460112)>
2025-11-05 13:58:30.97
bd3efa86
User
Added to session
2025-11-05 13:58:31.31
bd3efa86
User
âœ…âœ…âœ… COMMITTED TO DATABASE! Appointment ID: 53
2025-11-05 13:58:31.31
bd3efa86
User
ğŸ“¥ RESULT from _calendar_create_appointment_impl: appointment_id=53 status='confirmed' confirmation_message='××¢×•×œ×”! ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”! ğŸ˜Š'
2025-11-05 13:58:31.31
bd3efa86
User
âœ… SUCCESS! Appointment ID: 53
2025-11-05 13:58:31.31
bd3efa86
User
ğŸ“¤ Returning success: {'ok': True, 'appointment_id': 53, 'status': 'confirmed', 'confirmation_message': '××¢×•×œ×”! ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”! ğŸ˜Š'}
2025-11-05 13:58:32.60
bd3efa86
User
âœ… Runner.run() completed in 4012ms
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ“ Agent final response: '××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”....'
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ” Result type: RunResult

2025-11-05 13:58:32.60
bd3efa86
User
ğŸ” Has new_items: True
2025-11-05 13:58:32.60
bd3efa86
User
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ” new_items value: [ToolCallItem(agent=Agent(name='booking_agent_×©×™ ×“×™×¨×•×ª', handoff_description=None, tools=[FunctionTool(name='calendar_find_slots_wrapped', description='Find available appointment slots for a specific date', params_json_schema={'properties': {'date_iso': {'description': 'Date in ISO format (YYYY-MM-DD) like "2025-11-10"', 'title': 'Date Iso', 'type': 'string'}, 'duration_min': {'default': 60, 'description': 'Duration in minutes (default 60)', 'title': 'Duration Min', 'type': 'integer'}}, 'required': ['date_iso', 'duration_min'], 'title': 'calendar_find_slots_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a4fb6fb00>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='calendar_create_appointment_wrapped', description='Create a new appointment in the calendar\n\nCRITICAL: Agent should NEVER ask for phone by voice!\nPhone is automatically captured from call/WhatsApp context.', params_json_schema={'properties': {'treatment_type': {'description': 'Type of treatment (required)', 'title': 'Treatment Type', 'type': 'string'}, 'start_iso': {'description': 'Start time in ISO format (required)', 'title': 'Start Iso', 'type': 'string'}, 'end_iso': {'description': 'End time in ISO format (required)', 'title': 'End Iso', 'type': 'string'}, 'customer_phone': {'default': '', 'description': 'Leave EMPTY - system captures automatically', 'title': 'Customer Phone', 'type': 'string'}, 'customer_name': {'default': '', 'description': 'Customer name (optional)', 'title': 'Customer Name', 'type': 'string'}, 'notes': {'description': 'Additional notes (optional)', 'title': 'Notes', 'type': 'string'}}, 'required': ['treatment_type', 'start_iso', 'end_iso', 'customer_phone', 'customer_name', 'notes'], 'title': 'calendar_create_appointment_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a51e61300>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='leads_upsert_wrapped', description='Create or update customer lead', params_json_schema={'properties': {'name': {'description': 'Customer name (required)', 'title': 'Name', 'type': 'string'}, 'phone_e164': {'default': '', 'description': 'Customer phone (optional - uses context if not provided)', 'title': 'Phone E164', 'type': 'string'}, 'notes': {'description': 'Additional notes (optional)', 'title': 'Notes', 'type': 'string'}}, 'required': ['name', 'phone_e164', 'notes'], 'title': 'leads_upsert_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a4fb9c400>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='leads_search', description='Search for leads\n\nFilters:\n- Phone number (E.164 format)\n- Email address\n- Status', params_json_schema={'$defs': {'SearchLeadInput': {'description': 'Input for searching leads', 'properties': {'business_id': {'description': 'Business ID', 'minimum': 1, 'title': 'Business Id', 'type': 'integer'}, 'phone': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Phone number to search', 'title': 'Phone'}, 'email': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Email to search', 'title': 'Email'}, 'status': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Filter by status', 'title': 'Status'}}, 'required': ['business_id', 'phone', 'email', 'status'], 'title': 'SearchLeadInput', 'type': 'object', 'additionalProperties': False}}, 'properties': {'input': {'$ref': '#/$defs/SearchLeadInput'}}, 'required': ['input'], 'title': 'leads_search_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a526bb1a0>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='whatsapp_send', description='Send WhatsApp message\n\nRecipient (to):\n- If provided: use it\n- If not provided: auto-use customer_phone from context (conversation partner)\n\nProvider logic:\n- Auto: tries Baileys first, falls back to Twilio\n- Baileys: for real-time conversations (24h window)\n- Twilio: for templates and out-of-window messages', params_json_schema={'$defs': {'SendWhatsAppInput': {'description': 'Input for sending WhatsApp message', 'properties': {'to': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Recipient phone in E.164 format (+972...). Leave empty to auto-use customer from context.', 'title': 'To'}, 'message': {'description': 'Message text to send', 'maxLength': 4000, 'minLength': 1, 'title': 'Message', 'type': 'string'}, 'provider': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Provider to use (baileys/twilio/auto)', 'title': 'Provider'}}, 'required': ['to', 'message', 'provider'], 'title': 'SendWhatsAppInput', 'type': 'object', 'additionalProperties': False}}, 'properties': {'input': {'$ref': '#/$defs/SendWhatsAppInput'}}, 'required': ['input'], 'title': 'whatsapp_send_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a52748720>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None)], mcp_servers=[], mcp_config={}, instructions='TODAY: 2025-11-05 13:55 Israel\n\n\n×©×: ×“× ×™××œ\n×ª×¤×§×™×“: × ×¦×™×’ ××ª×—× ×”×§×¨×™×•×§×™ â€œSingStarâ€\n×©×¤×”: ×¢×‘×¨×™×ª ×‘×œ×‘×“\n××˜×¨×”: ×œ×¢×–×•×¨ ×œ×œ×§×•×—×•×ª ×œ×”×–××™×Ÿ ×—×“×¨ ×§×¨×™×•×§×™ ×‘×¦×•×¨×” ×× ×•×©×™×ª, × ×¢×™××” ×•×‘×¨×•×¨×”, ×œ×¤×™ ×›×œ×œ×™ ×”×”×–×× ×” ×•×”×–××Ÿ.\n×˜×•×Ÿ: ×—×, ×¨×’×•×¢, ×©×™×¨×•×ª×™, ×˜×‘×¢×™ â€“ ×œ× ×¨×•×‘×•×˜×™, ×œ× ×©×™×•×•×§×™.\n××™×¡×•×¨×™× ××•×—×œ×˜×™×: ××™×Ÿ ××™××•×’×³×™×, ××™×Ÿ ×¡×™×× ×™ ×§×¨×™××”, ××™×Ÿ ×¤×ª×™×—×•×ª ×—×•×–×¨×•×ª (â€œ×©×œ×•× ×©×•×‘â€), ××™×Ÿ ×”×¦×¢×•×ª ×›×¤×•×œ×•×ª ×œ×§×‘×™×¢×ª ×ª×•×¨.\n×“× ×™××œ ××“×‘×¨ ×›××• ××“× ×××™×ª×™ ×‘×©×™×—×ª ×˜×œ×¤×•×Ÿ, ×‘×§×¦×‘ × ×•×¨××œ×™, ×¢× ××©×¤×˜×™× ×§×¦×¨×™× ×•×‘×¨×•×¨×™×.\n\nâ¸»\n\nâ° ×›×œ×œ×™ ×”××¨×ª ×–××Ÿ\n\n×›××©×¨ ×œ×§×•×— ××•××¨ ×©×¢×” ×‘××™×œ×™× ××• ×‘××¡×¤×¨×™×:\n\tâ€¢\t×× × ×××¨ ××¡×¤×¨ 1â€“8 ×œ×œ× â€œ×‘×‘×•×§×¨â€ â†’ ×œ×¤×¨×© ×›×©×¢×•×ª ××—×”×´×¦ (13:00â€“20:00).\n×œ×“×•×’××”: â€œ2â€ ××• â€œ×©×ª×™×™×â€ = 14:00, â€œ3â€ = 15:00, â€œ8â€ = 20:00.\n\tâ€¢\tâ€œ9 ×‘×‘×•×§×¨â€ = 09:00.\n\tâ€¢\tâ€œ11:30â€ × ×©××¨ 11:30, ××‘×œ ××™×Ÿ ×œ×§×‘×•×¢ ×—×¦××™ ×•×¨×‘×¢×™ ×©×¢×•×ª.\n\tâ€¢\t×× × ×××¨ ×–××Ÿ ×©××™× ×• ×©×¢×” ×¢×’×•×œ×” (×›××• 10:15, 10:30, 11:45) ×™×© ×œ×”×©×™×‘:\nâ€œ××¤×©×¨ ×œ×”×–××™×Ÿ ×¨×§ ×œ×©×¢×” ×¢×’×•×œ×”, ×›××• 10:00, 11:00 ××• 12:00.â€\n\nâ¸»\n\nğŸ“… ×›×œ×œ×™ ×§×‘×™×¢×ª ×ª×•×¨\n\t1.\t× ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×¨×§ ×œ×©×¢×•×ª ×¢×’×•×œ×•×ª.\n\t2.\t×ª××™×“ ×œ×©××•×œ ×§×•×“×: â€œ×‘××™×–×• ×©×¢×” × ×•×— ×œ×›× ×œ×”×’×™×¢?â€\n\t3.\t×œ×‘×“×•×§ ×–××™× ×•×ª ×¨×§ ×œ×©×¢×” ×©×‘×™×§×©×•.\n\t4.\t×× ×œ× ×¤× ×•×™, ×œ×”×¦×™×¢ ×¢×“ ×©×ª×™ ×©×¢×•×ª ×§×¨×•×‘×•×ª ×‘×œ×‘×“.\n\t5.\t×œ×¤× ×™ ×§×‘×™×¢×” â€“ ×—×•×‘×” ×œ××¡×•×£ ×©× ×•×˜×œ×¤×•×Ÿ.\n\t6.\t×œ×‘×§×© ×˜×œ×¤×•×Ÿ ×›×š: â€œ× × ×œ×”×§×œ×™×“ ××ª ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×•×œ×”×§×™×© ×¡×•×œ××™×ª ×‘×¡×™×•×.â€\n\t7.\t×œ××©×¨: â€œ×ª×•×“×”, ××– [×©×], [×˜×œ×¤×•×Ÿ], × ×›×•×Ÿ?â€\n\t8.\t×œ××©×¨ ×”×–×× ×” ×¨×§ ×× ×‘×××ª × ×§×‘×¢×”: â€œ××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×œ-[×™×•×] ×‘-[×©×¢×”].â€\n××™×Ÿ ×œ×•××¨ â€œ×§×‘×¢×ª×™â€ ×× ×”×”×–×× ×” ×œ× × ×©××¨×” ×‘×¤×•×¢×œ.\n\t9.\t×œ×“×‘×¨ ×‘×¢×‘×¨×™×ª ×˜×‘×¢×™×ª, ×§×¦×¨×” ×•×‘×¨×•×¨×” ×‘×œ×‘×“.\n\t10.\t×œ×”×™×•×ª ×ª××™×“ ××“×•×™×§ â€“ ×œ× ×œ× ×—×©, ×œ× ×œ×©×§×¨, ×œ× ×œ×”××¦×™× ×–××™× ×•×ª.\n\nâ¸»\n\nğŸ  ××™×“×¢ ×©×“× ×™××œ ×ª××™×“ ×™×•×“×¢\n\n××ª×—× â€œSingStarâ€ ×›×•×œ×œ 6 ×—×“×¨×™ ×§×¨×™×•×§×™ ×¤×¨×˜×™×™× ×¢× ××¢×¨×›×ª ×¡××•× ×“ ××§×¦×•×¢×™×ª, ××¡×›×™× ×’×“×•×œ×™× ×•××™×§×¨×•×¤×•× ×™× ××œ×—×•×˜×™×™×.\n× ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×œ×¤×™ ×©×¢×”, ×œ×–×•×’×•×ª, ××©×¤×—×•×ª ××• ×§×‘×•×¦×•×ª ×¢×“ 15 ××™×©.\n×”××§×•× ×›×©×¨ ×œ××”×“×¨×™×Ÿ â€“ ×’× ×”××•×›×œ ×•×’× ×”×©×ª×™×™×”.\n×™×© ×ª×¤×¨×™×˜ ×©×œ ×¤×™×¦×•×ª, × ×©× ×•×©×™×, ×©×ª×™×™×” ×§×œ×” ×•××œ×›×•×”×•×œ×™×ª.\n×©×¢×•×ª ×¤×¢×™×œ×•×ª:\n\tâ€¢\t×¨××©×•×Ÿ ×¢×“ ×—××™×©×™ 10:00â€“00:00\n\tâ€¢\t×©×™×©×™ 10:00â€“15:00\n\tâ€¢\t××•×¦××™ ×©×‘×ª â€“ ×›×—×¦×™ ×©×¢×” ××—×¨×™ ×™×¦×™××ª ×©×‘×ª ×¢×“ 01:00.\n\nâ¸»\n\nğŸ’¬ ×¡×’× ×•×Ÿ ×ª×’×•×‘×” ×•×“×•×’×××•×ª\n\n×œ×§×•×—: ××” ×›×•×œ×œ ×”××§×•×?\n×“× ×™××œ: ×™×© ××¦×œ× ×• ×—×“×¨×™× ×¤×¨×˜×™×™× ×¢× ×¡××•× ×“ ××§×¦×•×¢×™, ××¡×š ×’×“×•×œ ×•××™×§×¨×•×¤×•× ×™× ××œ×—×•×˜×™×™×.\n\n×œ×§×•×—: ×–×” ×›×©×¨?\n×“× ×™××œ: ×›×Ÿ, ×”×›×œ ×›×©×¨ ×œ××”×“×¨×™×Ÿ â€“ ×’× ×”××•×›×œ ×•×’× ×”×©×ª×™×™×”.\n\n×œ×§×•×—: ××¤×©×¨ ×œ×”×–××™×Ÿ ×œ×©×¢×” ×©×ª×™×™×?\n×“× ×™××œ: ×”×‘× ×ª×™, 14:00. ×¨×’×¢ ×‘×•×“×§ ×× ×¤× ×•×™.\n×× ×¤× ×•×™: â€œ×¤× ×•×™. ×¢×œ ××™×–×” ×©× ×œ×¨×©×•× ×•××” ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×©×œ×š?â€\n×× ×œ× ×¤× ×•×™: â€œ14:00 ×ª×¤×•×¡, ×¤× ×•×™ ×‘-13:00 ××• ×‘-15:00, ××” ××ª××™×?â€\n\n×œ×§×•×—: 11:30 ××ª××™×?\n×“× ×™××œ: ×× ×—× ×• ×§×•×‘×¢×™× ×¨×§ ×‘×©×¢×•×ª ×¢×’×•×œ×•×ª. ×¨×•×¦×” ×©××‘×“×•×§ 11:00 ××• 12:00?\n\n×œ×§×•×—: ×¢×“×™ 0541234567#\n×“× ×™××œ: ×ª×•×“×”, ×¢×“×™, 0541234567, × ×›×•×Ÿ?\n×œ××—×¨ ××™×©×•×¨ ×××™×ª×™: â€œ××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×œ××—×¨ ×‘-14:00.â€\n\nâ¸»\n\nâŒ ×“× ×™××œ ×œ× ×¢×•×©×”\n\tâ€¢\t×œ× ××©×ª××© ×‘××™××•×’×³×™×, ×¡×™×× ×™ ×§×¨×™××” ××• ×¡×œ× ×’.\n\tâ€¢\t×œ× ×¤×•×ª×— ××—×“×© â€œ×©×œ×•×â€, â€œ××”×œ×Ÿâ€, â€œ×”×™×™â€.\n\tâ€¢\t×œ× ×“×•×—×£ ×œ×§×‘×™×¢×” ×× ×œ× ×”×ª×‘×§×©.\n\tâ€¢\t×œ× × ×•×ª×Ÿ ×¨×©×™××ª ×©×¢×•×ª.\n\tâ€¢\t×œ× ××•××¨ ×©× ×§×‘×¢ ×ª×•×¨ ×× ×–×” ×œ× ×‘×××ª ×§×¨×”.\n\tâ€¢\t×œ× ××“×‘×¨ ××¨×•×š ××“×™ ××• ×—×•×–×¨ ×¢×œ ×¢×¦××•.\n\nâ¸»\n\nğŸ§  ××˜×¨×ª ×“× ×™××œ\n\n×“× ×™××œ × ×•×¢×“ ×œ× ×”×œ ×©×™×—×•×ª ×©×™×¨×•×ª ×××™×ª×™×•×ª, ×‘×“×™×•×§ ×›××• ×¢×•×‘×“ ×× ×•×©×™ ×‘××•×§×“.\n×”××˜×¨×” ×”×™× ×œ×”×‘×™×Ÿ ××ª ×¨×¦×•×Ÿ ×”×œ×§×•×—, ×œ×”×¡×‘×™×¨ ×‘×§×¦×¨×”, ×œ×§×‘×•×¢ ×¨×§ ×›×©××‘×•×§×©, ×•×œ×©××•×¨ ×¢×œ ×××™× ×•×ª ××œ××”.\n×©×¤×”: ×¢×‘×¨×™×ª ×˜×‘×¢×™×ª, ×§×•×œ ×¨×’×•×¢, ×‘×œ×™ ×”×¦×’×” ××™×•×ª×¨×ª â€“ ×¨×§ ×©×™×¨×•×ª × ×§×™, ×× ×•×©×™ ×•××“×•×™×§', prompt=None, handoffs=[], model='gpt-4o-mini', model_settings=ModelSettings(temperature=0.3, top_p=None, frequency_penalty=None, presence_penalty=None, tool_choice=None, parallel_tool_calls=None, truncation=None, max_tokens=200, reasoning=None, verbosity=None, metadata=None, store=None, include_usage=None, response_include=None, top_logprobs=None, extra_query=None, extra_body=None, extra_headers=None, extra_args=None), input_guardrails=[], output_guardrails=[], output_type=None, hooks=None, tool_use_behavior='run_llm_again', reset_tool_choice=True), raw_item=ResponseFunctionToolCall(arguments='{"treatment_type":"×—×“×¨ ×§×¨×™×•×§×™","start_iso":"2025-11-06T11:00:00+02:00","end_iso":"2025-11-06T12:00:00+02:00","customer_phone":"","customer_name":"×©×™ ×“×”×Ÿ","notes":""}', call_id='call_lTpjm42Y2boMBKjZTKNLJQFQ', name='calendar_create_appointment_wrapped', type='function_call', id='fc_0621016276ec561100690b3be598f0819197fd1c827e7b9d5e', status='completed'), type='tool_call_item'), ToolCallOutputItem(agent=Agent(name='booking_agent_×©×™ ×“×™×¨×•×ª', handoff_description=None, tools=[FunctionTool(name='calendar_find_slots_wrapped', description='Find available appointment slots for a specific date', params_json_schema={'properties': {'date_iso': {'description': 'Date in ISO format (YYYY-MM-DD) like "2025-11-10"', 'title': 'Date Iso', 'type': 'string'}, 'duration_min': {'default': 60, 'description': 'Duration in minutes (default 60)', 'title': 'Duration Min', 'type': 'integer'}}, 'required': ['date_iso', 'duration_min'], 'title': 'calendar_find_slots_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a4fb6fb00>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='calendar_create_appointment_wrapped', description='Create a new appointment in the calendar\n\nCRITICAL: Agent should NEVER ask for phone by voice!\nPhone is automatically captured from call/WhatsApp context.', params_json_schema={'properties': {'treatment_type': {'description': 'Type of treatment (required)', 'title': 'Treatment Type', 'type': 'string'}, 'start_iso': {'description': 'Start time in ISO format (required)', 'title': 'Start Iso', 'type': 'string'}, 'end_iso': {'description': 'End time in ISO format (required)', 'title': 'End Iso', 'type': 'string'}, 'customer_phone': {'default': '', 'description': 'Leave EMPTY - system captures automatically', 'title': 'Customer Phone', 'type': 'string'}, 'customer_name': {'default': '', 'description': 'Customer name (optional)', 'title': 'Customer Name', 'type': 'string'}, 'notes': {'description': 'Additional notes (optional)', 'title': 'Notes', 'type': 'string'}}, 'required': ['treatment_type', 'start_iso', 'end_iso', 'customer_phone', 'customer_name', 'notes'], 'title': 'calendar_create_appointment_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a51e61300>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='leads_upsert_wrapped', description='Create or update customer lead', params_json_schema={'properties': {'name': {'description': 'Customer name (required)', 'title': 'Name', 'type': 'string'}, 'phone_e164': {'default': '', 'description': 'Customer phone (optional - uses context if not provided)', 'title': 'Phone E164', 'type': 'string'}, 'notes': {'description': 'Additional notes (optional)', 'title': 'Notes', 'type': 'string'}}, 'required': ['name', 'phone_e164', 'notes'], 'title': 'leads_upsert_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a4fb9c400>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='leads_search', description='Search for leads\n\nFilters:\n- Phone number (E.164 format)\n- Email address\n- Status', params_json_schema={'$defs': {'SearchLeadInput': {'description': 'Input for searching leads', 'properties': {'business_id': {'description': 'Business ID', 'minimum': 1, 'title': 'Business Id', 'type': 'integer'}, 'phone': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Phone number to search', 'title': 'Phone'}, 'email': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Email to search', 'title': 'Email'}, 'status': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Filter by status', 'title': 'Status'}}, 'required': ['business_id', 'phone', 'email', 'status'], 'title': 'SearchLeadInput', 'type': 'object', 'additionalProperties': False}}, 'properties': {'input': {'$ref': '#/$defs/SearchLeadInput'}}, 'required': ['input'], 'title': 'leads_search_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a526bb1a0>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='whatsapp_send', description='Send WhatsApp message\n\nRecipient (to):\n- If provided: use it\n- If not provided: auto-use customer_phone from context (conversation partner)\n\nProvider logic:\n- Auto: tries Baileys first, falls back to Twilio\n- Baileys: for real-time conversations (24h window)\n- Twilio: for templates and out-of-window messages', params_json_schema={'$defs': {'SendWhatsAppInput': {'description': 'Input for sending WhatsApp message', 'properties': {'to': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Recipient phone in E.164 format (+972...). Leave empty to auto-use customer from context.', 'title': 'To'}, 'message': {'description': 'Message text to send', 'maxLength': 4000, 'minLength': 1, 'title': 'Message', 'type': 'string'}, 'provider': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Provider to use (baileys/twilio/auto)', 'title': 'Provider'}}, 'required': ['to', 'message', 'provider'], 'title': 'SendWhatsAppInput', 'type': 'object', 'additionalProperties': False}}, 'properties': {'input': {'$ref': '#/$defs/SendWhatsAppInput'}}, 'required': ['input'], 'title': 'whatsapp_send_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a52748720>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None)], mcp_servers=[], mcp_config={}, instructions='TODAY: 2025-11-05 13:55 Israel\n\n\n×©×: ×“× ×™××œ\n×ª×¤×§×™×“: × ×¦×™×’ ××ª×—× ×”×§×¨×™×•×§×™ â€œSingStarâ€\n×©×¤×”: ×¢×‘×¨×™×ª ×‘×œ×‘×“\n××˜×¨×”: ×œ×¢×–×•×¨ ×œ×œ×§×•×—×•×ª ×œ×”×–××™×Ÿ ×—×“×¨ ×§×¨×™×•×§×™ ×‘×¦×•×¨×” ×× ×•×©×™×ª, × ×¢×™××” ×•×‘×¨×•×¨×”, ×œ×¤×™ ×›×œ×œ×™ ×”×”×–×× ×” ×•×”×–××Ÿ.\n×˜×•×Ÿ: ×—×, ×¨×’×•×¢, ×©×™×¨×•×ª×™, ×˜×‘×¢×™ â€“ ×œ× ×¨×•×‘×•×˜×™, ×œ× ×©×™×•×•×§×™.\n××™×¡×•×¨×™× ××•×—×œ×˜×™×: ××™×Ÿ ××™××•×’×³×™×, ××™×Ÿ ×¡×™×× ×™ ×§×¨×™××”, ××™×Ÿ ×¤×ª×™×—×•×ª ×—×•×–×¨×•×ª (â€œ×©×œ×•× ×©×•×‘â€), ××™×Ÿ ×”×¦×¢×•×ª ×›×¤×•×œ×•×ª ×œ×§×‘×™×¢×ª ×ª×•×¨.\n×“× ×™××œ ××“×‘×¨ ×›××• ××“× ×××™×ª×™ ×‘×©×™×—×ª ×˜×œ×¤×•×Ÿ, ×‘×§×¦×‘ × ×•×¨××œ×™, ×¢× ××©×¤×˜×™× ×§×¦×¨×™× ×•×‘×¨×•×¨×™×.\n\nâ¸»\n\nâ° ×›×œ×œ×™ ×”××¨×ª ×–××Ÿ\n\n×›××©×¨ ×œ×§×•×— ××•××¨ ×©×¢×” ×‘××™×œ×™× ××• ×‘××¡×¤×¨×™×:\n\tâ€¢\t×× × ×××¨ ××¡×¤×¨ 1â€“8 ×œ×œ× â€œ×‘×‘×•×§×¨â€ â†’ ×œ×¤×¨×© ×›×©×¢×•×ª ××—×”×´×¦ (13:00â€“20:00).\n×œ×“×•×’××”: â€œ2â€ ××• â€œ×©×ª×™×™×â€ = 14:00, â€œ3â€ = 15:00, â€œ8â€ = 20:00.\n\tâ€¢\tâ€œ9 ×‘×‘×•×§×¨â€ = 09:00.\n\tâ€¢\tâ€œ11:30â€ × ×©××¨ 11:30, ××‘×œ ××™×Ÿ ×œ×§×‘×•×¢ ×—×¦××™ ×•×¨×‘×¢×™ ×©×¢×•×ª.\n\tâ€¢\t×× × ×××¨ ×–××Ÿ ×©××™× ×• ×©×¢×” ×¢×’×•×œ×” (×›××• 10:15, 10:30, 11:45) ×™×© ×œ×”×©×™×‘:\nâ€œ××¤×©×¨ ×œ×”×–××™×Ÿ ×¨×§ ×œ×©×¢×” ×¢×’×•×œ×”, ×›××• 10:00, 11:00 ××• 12:00.â€\n\nâ¸»\n\nğŸ“… ×›×œ×œ×™ ×§×‘×™×¢×ª ×ª×•×¨\n\t1.\t× ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×¨×§ ×œ×©×¢×•×ª ×¢×’×•×œ×•×ª.\n\t2.\t×ª××™×“ ×œ×©××•×œ ×§×•×“×: â€œ×‘××™×–×• ×©×¢×” × ×•×— ×œ×›× ×œ×”×’×™×¢?â€\n\t3.\t×œ×‘×“×•×§ ×–××™× ×•×ª ×¨×§ ×œ×©×¢×” ×©×‘×™×§×©×•.\n\t4.\t×× ×œ× ×¤× ×•×™, ×œ×”×¦×™×¢ ×¢×“ ×©×ª×™ ×©×¢×•×ª ×§×¨×•×‘×•×ª ×‘×œ×‘×“.\n\t5.\t×œ×¤× ×™ ×§×‘×™×¢×” â€“ ×—×•×‘×” ×œ××¡×•×£ ×©× ×•×˜×œ×¤×•×Ÿ.\n\t6.\t×œ×‘×§×© ×˜×œ×¤×•×Ÿ ×›×š: â€œ× × ×œ×”×§×œ×™×“ ××ª ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×•×œ×”×§×™×© ×¡×•×œ××™×ª ×‘×¡×™×•×.â€\n\t7.\t×œ××©×¨: â€œ×ª×•×“×”, ××– [×©×], [×˜×œ×¤×•×Ÿ], × ×›×•×Ÿ?â€\n\t8.\t×œ××©×¨ ×”×–×× ×” ×¨×§ ×× ×‘×××ª × ×§×‘×¢×”: â€œ××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×œ-[×™×•×] ×‘-[×©×¢×”].â€\n××™×Ÿ ×œ×•××¨ â€œ×§×‘×¢×ª×™â€ ×× ×”×”×–×× ×” ×œ× × ×©××¨×” ×‘×¤×•×¢×œ.\n\t9.\t×œ×“×‘×¨ ×‘×¢×‘×¨×™×ª ×˜×‘×¢×™×ª, ×§×¦×¨×” ×•×‘×¨×•×¨×” ×‘×œ×‘×“.\n\t10.\t×œ×”×™×•×ª ×ª××™×“ ××“×•×™×§ â€“ ×œ× ×œ× ×—×©, ×œ× ×œ×©×§×¨, ×œ× ×œ×”××¦×™× ×–××™× ×•×ª.\n\nâ¸»\n\nğŸ  ××™×“×¢ ×©×“× ×™××œ ×ª××™×“ ×™×•×“×¢\n\n××ª×—× â€œSingStarâ€ ×›×•×œ×œ 6 ×—×“×¨×™ ×§×¨×™×•×§×™ ×¤×¨×˜×™×™× ×¢× ××¢×¨×›×ª ×¡××•× ×“ ××§×¦×•×¢×™×ª, ××¡×›×™× ×’×“×•×œ×™× ×•××™×§×¨×•×¤×•× ×™× ××œ×—×•×˜×™×™×.\n× ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×œ×¤×™ ×©×¢×”, ×œ×–×•×’×•×ª, ××©×¤×—×•×ª ××• ×§×‘×•×¦×•×ª ×¢×“ 15 ××™×©.\n×”××§×•× ×›×©×¨ ×œ××”×“×¨×™×Ÿ â€“ ×’× ×”××•×›×œ ×•×’× ×”×©×ª×™×™×”.\n×™×© ×ª×¤×¨×™×˜ ×©×œ ×¤×™×¦×•×ª, × ×©× ×•×©×™×, ×©×ª×™×™×” ×§×œ×” ×•××œ×›×•×”×•×œ×™×ª.\n×©×¢×•×ª ×¤×¢×™×œ×•×ª:\n\tâ€¢\t×¨××©×•×Ÿ ×¢×“ ×—××™×©×™ 10:00â€“00:00\n\tâ€¢\t×©×™×©×™ 10:00â€“15:00\n\tâ€¢\t××•×¦××™ ×©×‘×ª â€“ ×›×—×¦×™ ×©×¢×” ××—×¨×™ ×™×¦×™××ª ×©×‘×ª ×¢×“ 01:00.\n\nâ¸»\n\nğŸ’¬ ×¡×’× ×•×Ÿ ×ª×’×•×‘×” ×•×“×•×’×××•×ª\n\n×œ×§×•×—: ××” ×›×•×œ×œ ×”××§×•×?\n×“× ×™××œ: ×™×© ××¦×œ× ×• ×—×“×¨×™× ×¤×¨×˜×™×™× ×¢× ×¡××•× ×“ ××§×¦×•×¢×™, ××¡×š ×’×“×•×œ ×•××™×§×¨×•×¤×•× ×™× ××œ×—×•×˜×™×™×.\n\n×œ×§×•×—: ×–×” ×›×©×¨?\n×“× ×™××œ: ×›×Ÿ, ×”×›×œ ×›×©×¨ ×œ××”×“×¨×™×Ÿ â€“ ×’× ×”××•×›×œ ×•×’× ×”×©×ª×™×™×”.\n\n×œ×§×•×—: ××¤×©×¨ ×œ×”×–××™×Ÿ ×œ×©×¢×” ×©×ª×™×™×?\n×“× ×™××œ: ×”×‘× ×ª×™, 14:00. ×¨×’×¢ ×‘×•×“×§ ×× ×¤× ×•×™.\n×× ×¤× ×•×™: â€œ×¤× ×•×™. ×¢×œ ××™×–×” ×©× ×œ×¨×©×•× ×•××” ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×©×œ×š?â€\n×× ×œ× ×¤× ×•×™: â€œ14:00 ×ª×¤×•×¡, ×¤× ×•×™ ×‘-13:00 ××• ×‘-15:00, ××” ××ª××™×?â€\n\n×œ×§×•×—: 11:30 ××ª××™×?\n×“× ×™××œ: ×× ×—× ×• ×§×•×‘×¢×™× ×¨×§ ×‘×©×¢×•×ª ×¢×’×•×œ×•×ª. ×¨×•×¦×” ×©××‘×“×•×§ 11:00 ××• 12:00?\n\n×œ×§×•×—: ×¢×“×™ 0541234567#\n×“× ×™××œ: ×ª×•×“×”, ×¢×“×™, 0541234567, × ×›×•×Ÿ?\n×œ××—×¨ ××™×©×•×¨ ×××™×ª×™: â€œ××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×œ××—×¨ ×‘-14:00.â€\n\nâ¸»\n\nâŒ ×“× ×™××œ ×œ× ×¢×•×©×”\n\tâ€¢\t×œ× ××©×ª××© ×‘××™××•×’×³×™×, ×¡×™×× ×™ ×§×¨×™××” ××• ×¡×œ× ×’.\n\tâ€¢\t×œ× ×¤×•×ª×— ××—×“×© â€œ×©×œ×•×â€, â€œ××”×œ×Ÿâ€, â€œ×”×™×™â€.\n\tâ€¢\t×œ× ×“×•×—×£ ×œ×§×‘×™×¢×” ×× ×œ× ×”×ª×‘×§×©.\n\tâ€¢\t×œ× × ×•×ª×Ÿ ×¨×©×™××ª ×©×¢×•×ª.\n\tâ€¢\t×œ× ××•××¨ ×©× ×§×‘×¢ ×ª×•×¨ ×× ×–×” ×œ× ×‘×××ª ×§×¨×”.\n\tâ€¢\t×œ× ××“×‘×¨ ××¨×•×š ××“×™ ××• ×—×•×–×¨ ×¢×œ ×¢×¦××•.\n\nâ¸»\n\nğŸ§  ××˜×¨×ª ×“× ×™××œ\n\n×“× ×™××œ × ×•×¢×“ ×œ× ×”×œ ×©×™×—×•×ª ×©×™×¨×•×ª ×××™×ª×™×•×ª, ×‘×“×™×•×§ ×›××• ×¢×•×‘×“ ×× ×•×©×™ ×‘××•×§×“.\n×”××˜×¨×” ×”×™× ×œ×”×‘×™×Ÿ ××ª ×¨×¦×•×Ÿ ×”×œ×§×•×—, ×œ×”×¡×‘×™×¨ ×‘×§×¦×¨×”, ×œ×§×‘×•×¢ ×¨×§ ×›×©××‘×•×§×©, ×•×œ×©××•×¨ ×¢×œ ×××™× ×•×ª ××œ××”.\n×©×¤×”: ×¢×‘×¨×™×ª ×˜×‘×¢×™×ª, ×§×•×œ ×¨×’×•×¢, ×‘×œ×™ ×”×¦×’×” ××™×•×ª×¨×ª â€“ ×¨×§ ×©×™×¨×•×ª × ×§×™, ×× ×•×©×™ ×•××“×•×™×§', prompt=None, handoffs=[], model='gpt-4o-mini', model_settings=ModelSettings(temperature=0.3, top_p=None, frequency_penalty=None, presence_penalty=None, tool_choice=None, parallel_tool_calls=None, truncation=None, max_tokens=200, reasoning=None, verbosity=None, metadata=None, store=None, include_usage=None, response_include=None, top_logprobs=None, extra_query=None, extra_body=None, extra_headers=None, extra_args=None), input_guardrails=[], output_guardrails=[], output_type=None, hooks=None, tool_use_behavior='run_llm_again', reset_tool_choice=True), raw_item={'call_id': 'call_lTpjm42Y2boMBKjZTKNLJQFQ', 'output': "{'ok': True, 'appointment_id': 53, 'status': 'confirmed', 'confirmation_message': '××¢×•×œ×”! ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”! ğŸ˜Š'}", 'type': 'function_call_output'}, output={'ok': True, 'appointment_id': 53, 'status': 'confirmed', 'confirmation_message': '××¢×•×œ×”! ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”! ğŸ˜Š'}, type='tool_call_output_item'), MessageOutputItem(agent=Agent(name='booking_agent_×©×™ ×“×™×¨×•×ª', handoff_description=None, tools=[FunctionTool(name='calendar_find_slots_wrapped', description='Find available appointment slots for a specific date', params_json_schema={'properties': {'date_iso': {'description': 'Date in ISO format (YYYY-MM-DD) like "2025-11-10"', 'title': 'Date Iso', 'type': 'string'}, 'duration_min': {'default': 60, 'description': 'Duration in minutes (default 60)', 'title': 'Duration Min', 'type': 'integer'}}, 'required': ['date_iso', 'duration_min'], 'title': 'calendar_find_slots_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a4fb6fb00>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='calendar_create_appointment_wrapped', description='Create a new appointment in the calendar\n\nCRITICAL: Agent should NEVER ask for phone by voice!\nPhone is automatically captured from call/WhatsApp context.', params_json_schema={'properties': {'treatment_type': {'description': 'Type of treatment (required)', 'title': 'Treatment Type', 'type': 'string'}, 'start_iso': {'description': 'Start time in ISO format (required)', 'title': 'Start Iso', 'type': 'string'}, 'end_iso': {'description': 'End time in ISO format (required)', 'title': 'End Iso', 'type': 'string'}, 'customer_phone': {'default': '', 'description': 'Leave EMPTY - system captures automatically', 'title': 'Customer Phone', 'type': 'string'}, 'customer_name': {'default': '', 'description': 'Customer name (optional)', 'title': 'Customer Name', 'type': 'string'}, 'notes': {'description': 'Additional notes (optional)', 'title': 'Notes', 'type': 'string'}}, 'required': ['treatment_type', 'start_iso', 'end_iso', 'customer_phone', 'customer_name', 'notes'], 'title': 'calendar_create_appointment_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a51e61300>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='leads_upsert_wrapped', description='Create or update customer lead', params_json_schema={'properties': {'name': {'description': 'Customer name (required)', 'title': 'Name', 'type': 'string'}, 'phone_e164': {'default': '', 'description': 'Customer phone (optional - uses context if not provided)', 'title': 'Phone E164', 'type': 'string'}, 'notes': {'description': 'Additional notes (optional)', 'title': 'Notes', 'type': 'string'}}, 'required': ['name', 'phone_e164', 'notes'], 'title': 'leads_upsert_wrapped_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a4fb9c400>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='leads_search', description='Search for leads\n\nFilters:\n- Phone number (E.164 format)\n- Email address\n- Status', params_json_schema={'$defs': {'SearchLeadInput': {'description': 'Input for searching leads', 'properties': {'business_id': {'description': 'Business ID', 'minimum': 1, 'title': 'Business Id', 'type': 'integer'}, 'phone': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Phone number to search', 'title': 'Phone'}, 'email': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Email to search', 'title': 'Email'}, 'status': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Filter by status', 'title': 'Status'}}, 'required': ['business_id', 'phone', 'email', 'status'], 'title': 'SearchLeadInput', 'type': 'object', 'additionalProperties': False}}, 'properties': {'input': {'$ref': '#/$defs/SearchLeadInput'}}, 'required': ['input'], 'title': 'leads_search_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a526bb1a0>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None), FunctionTool(name='whatsapp_send', description='Send WhatsApp message\n\nRecipient (to):\n- If provided: use it\n- If not provided: auto-use customer_phone from context (conversation partner)\n\nProvider logic:\n- Auto: tries Baileys first, falls back to Twilio\n- Baileys: for real-time conversations (24h window)\n- Twilio: for templates and out-of-window messages', params_json_schema={'$defs': {'SendWhatsAppInput': {'description': 'Input for sending WhatsApp message', 'properties': {'to': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Recipient phone in E.164 format (+972...). Leave empty to auto-use customer from context.', 'title': 'To'}, 'message': {'description': 'Message text to send', 'maxLength': 4000, 'minLength': 1, 'title': 'Message', 'type': 'string'}, 'provider': {'anyOf': [{'type': 'string'}, {'type': 'null'}], 'description': 'Provider to use (baileys/twilio/auto)', 'title': 'Provider'}}, 'required': ['to', 'message', 'provider'], 'title': 'SendWhatsAppInput', 'type': 'object', 'additionalProperties': False}}, 'properties': {'input': {'$ref': '#/$defs/SendWhatsAppInput'}}, 'required': ['input'], 'title': 'whatsapp_send_args', 'type': 'object', 'additionalProperties': False}, on_invoke_tool=<function function_tool.<locals>._create_function_tool.<locals>._on_invoke_tool at 0x7f0a52748720>, strict_json_schema=True, is_enabled=True, tool_input_guardrails=None, tool_output_guardrails=None)], mcp_servers=[], mcp_config={}, instructions='TODAY: 2025-11-05 13:55 Israel\n\n\n×©×: ×“× ×™××œ\n×ª×¤×§×™×“: × ×¦×™×’ ××ª×—× ×”×§×¨×™×•×§×™ â€œSingStarâ€\n×©×¤×”: ×¢×‘×¨×™×ª ×‘×œ×‘×“\n××˜×¨×”: ×œ×¢×–×•×¨ ×œ×œ×§×•×—×•×ª ×œ×”×–××™×Ÿ ×—×“×¨ ×§×¨×™×•×§×™ ×‘×¦×•×¨×” ×× ×•×©×™×ª, × ×¢×™××” ×•×‘×¨×•×¨×”, ×œ×¤×™ ×›×œ×œ×™ ×”×”×–×× ×” ×•×”×–××Ÿ.\n×˜×•×Ÿ: ×—×, ×¨×’×•×¢, ×©×™×¨×•×ª×™, ×˜×‘×¢×™ â€“ ×œ× ×¨×•×‘×•×˜×™, ×œ× ×©×™×•×•×§×™.\n××™×¡×•×¨×™× ××•×—×œ×˜×™×: ××™×Ÿ ××™××•×’×³×™×, ××™×Ÿ ×¡×™×× ×™ ×§×¨×™××”, ××™×Ÿ ×¤×ª×™×—×•×ª ×—×•×–×¨×•×ª (â€œ×©×œ×•× ×©×•×‘â€), ××™×Ÿ ×”×¦×¢×•×ª ×›×¤×•×œ×•×ª ×œ×§×‘×™×¢×ª ×ª×•×¨.\n×“× ×™××œ ××“×‘×¨ ×›××• ××“× ×××™×ª×™ ×‘×©×™×—×ª ×˜×œ×¤×•×Ÿ, ×‘×§×¦×‘ × ×•×¨××œ×™, ×¢× ××©×¤×˜×™× ×§×¦×¨×™× ×•×‘×¨×•×¨×™×.\n\nâ¸»\n\nâ° ×›×œ×œ×™ ×”××¨×ª ×–××Ÿ\n\n×›××©×¨ ×œ×§×•×— ××•××¨ ×©×¢×” ×‘××™×œ×™× ××• ×‘××¡×¤×¨×™×:\n\tâ€¢\t×× × ×××¨ ××¡×¤×¨ 1â€“8 ×œ×œ× â€œ×‘×‘×•×§×¨â€ â†’ ×œ×¤×¨×© ×›×©×¢×•×ª ××—×”×´×¦ (13:00â€“20:00).\n×œ×“×•×’××”: â€œ2â€ ××• â€œ×©×ª×™×™×â€ = 14:00, â€œ3â€ = 15:00, â€œ8â€ = 20:00.\n\tâ€¢\tâ€œ9 ×‘×‘×•×§×¨â€ = 09:00.\n\tâ€¢\tâ€œ11:30â€ × ×©××¨ 11:30, ××‘×œ ××™×Ÿ ×œ×§×‘×•×¢ ×—×¦××™ ×•×¨×‘×¢×™ ×©×¢×•×ª.\n\tâ€¢\t×× × ×××¨ ×–××Ÿ ×©××™× ×• ×©×¢×” ×¢×’×•×œ×” (×›××• 10:15, 10:30, 11:45) ×™×© ×œ×”×©×™×‘:\nâ€œ××¤×©×¨ ×œ×”×–××™×Ÿ ×¨×§ ×œ×©×¢×” ×¢×’×•×œ×”, ×›××• 10:00, 11:00 ××• 12:00.â€\n\nâ¸»\n\nğŸ“… ×›×œ×œ×™ ×§×‘×™×¢×ª ×ª×•×¨\n\t1.\t× ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×¨×§ ×œ×©×¢×•×ª ×¢×’×•×œ×•×ª.\n\t2.\t×ª××™×“ ×œ×©××•×œ ×§×•×“×: â€œ×‘××™×–×• ×©×¢×” × ×•×— ×œ×›× ×œ×”×’×™×¢?â€\n\t3.\t×œ×‘×“×•×§ ×–××™× ×•×ª ×¨×§ ×œ×©×¢×” ×©×‘×™×§×©×•.\n\t4.\t×× ×œ× ×¤× ×•×™, ×œ×”×¦×™×¢ ×¢×“ ×©×ª×™ ×©×¢×•×ª ×§×¨×•×‘×•×ª ×‘×œ×‘×“.\n\t5.\t×œ×¤× ×™ ×§×‘×™×¢×” â€“ ×—×•×‘×” ×œ××¡×•×£ ×©× ×•×˜×œ×¤×•×Ÿ.\n\t6.\t×œ×‘×§×© ×˜×œ×¤×•×Ÿ ×›×š: â€œ× × ×œ×”×§×œ×™×“ ××ª ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×•×œ×”×§×™×© ×¡×•×œ××™×ª ×‘×¡×™×•×.â€\n\t7.\t×œ××©×¨: â€œ×ª×•×“×”, ××– [×©×], [×˜×œ×¤×•×Ÿ], × ×›×•×Ÿ?â€\n\t8.\t×œ××©×¨ ×”×–×× ×” ×¨×§ ×× ×‘×××ª × ×§×‘×¢×”: â€œ××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×œ-[×™×•×] ×‘-[×©×¢×”].â€\n××™×Ÿ ×œ×•××¨ â€œ×§×‘×¢×ª×™â€ ×× ×”×”×–×× ×” ×œ× × ×©××¨×” ×‘×¤×•×¢×œ.\n\t9.\t×œ×“×‘×¨ ×‘×¢×‘×¨×™×ª ×˜×‘×¢×™×ª, ×§×¦×¨×” ×•×‘×¨×•×¨×” ×‘×œ×‘×“.\n\t10.\t×œ×”×™×•×ª ×ª××™×“ ××“×•×™×§ â€“ ×œ× ×œ× ×—×©, ×œ× ×œ×©×§×¨, ×œ× ×œ×”××¦×™× ×–××™× ×•×ª.\n\nâ¸»\n\nğŸ  ××™×“×¢ ×©×“× ×™××œ ×ª××™×“ ×™×•×“×¢\n\n××ª×—× â€œSingStarâ€ ×›×•×œ×œ 6 ×—×“×¨×™ ×§×¨×™×•×§×™ ×¤×¨×˜×™×™× ×¢× ××¢×¨×›×ª ×¡××•× ×“ ××§×¦×•×¢×™×ª, ××¡×›×™× ×’×“×•×œ×™× ×•××™×§×¨×•×¤×•× ×™× ××œ×—×•×˜×™×™×.\n× ×™×ª×Ÿ ×œ×”×–××™×Ÿ ×œ×¤×™ ×©×¢×”, ×œ×–×•×’×•×ª, ××©×¤×—×•×ª ××• ×§×‘×•×¦×•×ª ×¢×“ 15 ××™×©.\n×”××§×•× ×›×©×¨ ×œ××”×“×¨×™×Ÿ â€“ ×’× ×”××•×›×œ ×•×’× ×”×©×ª×™×™×”.\n×™×© ×ª×¤×¨×™×˜ ×©×œ ×¤×™×¦×•×ª, × ×©× ×•×©×™×, ×©×ª×™×™×” ×§×œ×” ×•××œ×›×•×”×•×œ×™×ª.\n×©×¢×•×ª ×¤×¢×™×œ×•×ª:\n\tâ€¢\t×¨××©×•×Ÿ ×¢×“ ×—××™×©×™ 10:00â€“00:00\n\tâ€¢\t×©×™×©×™ 10:00â€“15:00\n\tâ€¢\t××•×¦××™ ×©×‘×ª â€“ ×›×—×¦×™ ×©×¢×” ××—×¨×™ ×™×¦×™××ª ×©×‘×ª ×¢×“ 01:00.\n\nâ¸»\n\nğŸ’¬ ×¡×’× ×•×Ÿ ×ª×’×•×‘×” ×•×“×•×’×××•×ª\n\n×œ×§×•×—: ××” ×›×•×œ×œ ×”××§×•×?\n×“× ×™××œ: ×™×© ××¦×œ× ×• ×—×“×¨×™× ×¤×¨×˜×™×™× ×¢× ×¡××•× ×“ ××§×¦×•×¢×™, ××¡×š ×’×“×•×œ ×•××™×§×¨×•×¤×•× ×™× ××œ×—×•×˜×™×™×.\n\n×œ×§×•×—: ×–×” ×›×©×¨?\n×“× ×™××œ: ×›×Ÿ, ×”×›×œ ×›×©×¨ ×œ××”×“×¨×™×Ÿ â€“ ×’× ×”××•×›×œ ×•×’× ×”×©×ª×™×™×”.\n\n×œ×§×•×—: ××¤×©×¨ ×œ×”×–××™×Ÿ ×œ×©×¢×” ×©×ª×™×™×?\n×“× ×™××œ: ×”×‘× ×ª×™, 14:00. ×¨×’×¢ ×‘×•×“×§ ×× ×¤× ×•×™.\n×× ×¤× ×•×™: â€œ×¤× ×•×™. ×¢×œ ××™×–×” ×©× ×œ×¨×©×•× ×•××” ××¡×¤×¨ ×”×˜×œ×¤×•×Ÿ ×©×œ×š?â€\n×× ×œ× ×¤× ×•×™: â€œ14:00 ×ª×¤×•×¡, ×¤× ×•×™ ×‘-13:00 ××• ×‘-15:00, ××” ××ª××™×?â€\n\n×œ×§×•×—: 11:30 ××ª××™×?\n×“× ×™××œ: ×× ×—× ×• ×§×•×‘×¢×™× ×¨×§ ×‘×©×¢×•×ª ×¢×’×•×œ×•×ª. ×¨×•×¦×” ×©××‘×“×•×§ 11:00 ××• 12
2025-11-05 13:58:32.60
bd3efa86
User
:00?\n\n×œ×§×•×—: ×¢×“×™ 0541234567#\n×“× ×™××œ: ×ª×•×“×”, ×¢×“×™, 0541234567, × ×›×•×Ÿ?\n×œ××—×¨ ××™×©×•×¨ ×××™×ª×™: â€œ××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×œ××—×¨ ×‘-14:00.â€\n\nâ¸»\n\nâŒ ×“× ×™××œ ×œ× ×¢×•×©×”\n\tâ€¢\t×œ× ××©×ª××© ×‘××™××•×’×³×™×, ×¡×™×× ×™ ×§×¨×™××” ××• ×¡×œ× ×’.\n\tâ€¢\t×œ× ×¤×•×ª×— ××—×“×© â€œ×©×œ×•×â€, â€œ××”×œ×Ÿâ€, â€œ×”×™×™â€.\n\tâ€¢\t×œ× ×“×•×—×£ ×œ×§×‘×™×¢×” ×× ×œ× ×”×ª×‘×§×©.\n\tâ€¢\t×œ× × ×•×ª×Ÿ ×¨×©×™××ª ×©×¢×•×ª.\n\tâ€¢\t×œ× ××•××¨ ×©× ×§×‘×¢ ×ª×•×¨ ×× ×–×” ×œ× ×‘×××ª ×§×¨×”.\n\tâ€¢\t×œ× ××“×‘×¨ ××¨×•×š ××“×™ ××• ×—×•×–×¨ ×¢×œ ×¢×¦××•.\n\nâ¸»\n\nğŸ§  ××˜×¨×ª ×“× ×™××œ\n\n×“× ×™××œ × ×•×¢×“ ×œ× ×”×œ ×©×™×—×•×ª ×©×™×¨×•×ª ×××™×ª×™×•×ª, ×‘×“×™×•×§ ×›××• ×¢×•×‘×“ ×× ×•×©×™ ×‘××•×§×“.\n×”××˜×¨×” ×”×™× ×œ×”×‘×™×Ÿ ××ª ×¨×¦×•×Ÿ ×”×œ×§×•×—, ×œ×”×¡×‘×™×¨ ×‘×§×¦×¨×”, ×œ×§×‘×•×¢ ×¨×§ ×›×©××‘×•×§×©, ×•×œ×©××•×¨ ×¢×œ ×××™× ×•×ª ××œ××”.\n×©×¤×”: ×¢×‘×¨×™×ª ×˜×‘×¢×™×ª, ×§×•×œ ×¨×’×•×¢, ×‘×œ×™ ×”×¦×’×” ××™×•×ª×¨×ª â€“ ×¨×§ ×©×™×¨×•×ª × ×§×™, ×× ×•×©×™ ×•××“×•×™×§', prompt=None, handoffs=[], model='gpt-4o-mini', model_settings=ModelSettings(temperature=0.3, top_p=None, frequency_penalty=None, presence_penalty=None, tool_choice=None, parallel_tool_calls=None, truncation=None, max_tokens=200, reasoning=None, verbosity=None, metadata=None, store=None, include_usage=None, response_include=None, top_logprobs=None, extra_query=None, extra_body=None, extra_headers=None, extra_args=None), input_guardrails=[], output_guardrails=[], output_type=None, hooks=None, tool_use_behavior='run_llm_again', reset_tool_choice=True), raw_item=ResponseOutputMessage(id='msg_0621016276ec561100690b3be7cb208191bd68545d5539ab4d', content=[ResponseOutputText(annotations=[], text='××¢×•×œ×”, ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”.', type='output_text', logprobs=[])], role='assistant', status='completed', type='message'), type='message_output_item')]
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ” new_items length: 3
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ“Š Agent returned 3 items
2025-11-05 13:58:32.60
bd3efa86
User
- Item #0: ToolCallItem
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ”§ Tool call #1: unknown
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ“‹ Item attributes: ['__abstractmethods__', '__annotations__', '__class__', '__class_getitem__', '__dataclass_fields__', '__dataclass_params__', '__delattr__', '__dict__', '__dir__', '__doc__']...
2025-11-05 13:58:32.60
bd3efa86
User
- Item #1: ToolCallOutputItem
2025-11-05 13:58:32.60
bd3efa86
User
ğŸ“¤ Tool output: {'ok': True, 'appointment_id': 53, 'status': 'confirmed', 'confirmation_message': '××¢×•×œ×”! ×§×‘×¢×ª×™ ×œ×š ×—×“×¨ ×§×¨×™×•×§×™ ×œ×™×•× ×—××™×©×™ 06/11 ×‘×©×¢×” 11:00. × ×ª×¨××”! ğŸ˜Š'}...
2025-11-05 13:58:32.60
bd3efa86
User
- Item #2: MessageOutputItem
2025-11-05 13:58:32.60
bd3efa86
User
ğŸš¨ BLOCKED HALLUCINATED BOOKING!
2025-11-05 13:58:32.60
bd3efa86
User
âœ… Replaced with: '×× ×™ ×¢×“×™×™×Ÿ ×¦×¨×™×š ×œ×‘×“×•×§ ×–××™× ×•×ª. ××™×–×” ×™×•× ×•×©×¢×” ×”×™×™×ª ×¨×•×¦×”?'
2025-11-05 13:58:32.67
bd3efa86
User
ğŸ¤– AGENT_RESPONSE: Generated 53 chars in 4.087s (business 1)
2025-11-05 13:58:32.67
bd3efa86
User
ğŸ“Š AI_LATENCY: 4.087s (target: <1.5s)
2025-11-05 13:58:32.67
bd3efa86
User
ğŸ”“ SHORT_RESPONSE (10 words) - BARGE-IN ENABLED
2025-11-05 13:58:32.67
bd3efa86
User
ğŸ”Š TTS_START: '×× ×™ ×¢×“×™×™×Ÿ ×¦×¨×™×š ×œ×‘×“×•×§ ×–××™× ×•×ª. ××™×–×” ×™×•× ×•×©×¢×” ×”×™×™×ª ×¨×•×¦×”?'
2025-11-05 13:58:32.67
bd3efa86
User
âœ… Punctuation polished: '×× ×™ ×¢×“×™×™×Ÿ ×¦×¨×™×š ×œ×‘×“×•×§ ×–××™× ×•×ª. ××™×–×” ×™×•× ×•×©...'
2025-11-05 13:58:33.79
bd3efa86
User
2025-11-05 13:58:36.95
bd3efa86
User
ğŸ™ï¸ REAL_VOICE: rms=694, threshold=35.0

Collapse

Wrap

Colors

