Now implement a SMALL guard on our side to prevent AI talking
before the user has really spoken, without touching turn_detection.

Files allowed:
- server/media_ws_ai.py ONLY

------------------------------------------------
STEP 1 – Track if user has ever spoken
------------------------------------------------

In MediaStreamHandler.__init__, add:

    self.user_has_spoken = False

In `_realtime_audio_receiver`, inside the handler:
    "conversation.item.input_audio_transcription.completed"

AFTER the noise filter and AFTER you set:

    transcript = text

add:

    # Mark that the user really spoke at least once
    self.user_has_spoken = True

Do NOT add more flags than this.

------------------------------------------------
STEP 2 – Ignore / cancel AI responses before first real user utterance
------------------------------------------------

Still in `_realtime_audio_receiver`, in the parts that handle assistant audio,
you already have something like:

    elif event_type == "response.audio.delta":
        audio_b64 = ...
        # send to TTS / Twilio etc...

    elif event_type == "response.audio.done":
        ...

We want to avoid playing *any* AI audio to the caller
if it was generated before the user has spoken AND it is not the explicit greeting.

Add this guard at the top of your assistant-audio handling:

    # At the top of handling response.audio.delta and similar assistant responses:
    if not self.user_has_spoken and not getattr(self, "greeting_sent", False):
        # User never spoke, and this is not the greeting – block it
        logger.info("[GUARD] Blocking AI audio response before first real user utterance")
        # If there is a response_id in the event, send response.cancel once (optional)
        response_id = event.get("response_id")
        if response_id:
            try:
                await client.send_event({
                    "type": "response.cancel",
                    "response_id": response_id,
                })
            except Exception:
                logger.exception("[GUARD] Failed to send response.cancel for pre-user-response")
        continue  # do NOT enqueue audio for TTS

Important:
- Do NOT block the explicit greeting that we send via send_text_response(greeting_text).
  That path does not go through response.audio.delta.
- This guard should ONLY affect early assistant audio generated by Realtime
  before any user transcript has been confirmed.

------------------------------------------------
RULES:

- Do NOT touch turn_detection.
- Do NOT add new state machines or complex flags.
- Do NOT change any other logic (barge-in, VAD etc.) beyond this simple guard.